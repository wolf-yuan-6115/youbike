var y1=Object.create;var{getPrototypeOf:h1,defineProperty:NQ,getOwnPropertyNames:i2,getOwnPropertyDescriptor:m1}=Object,n2=Object.prototype.hasOwnProperty;var x8=($,X,Z)=>{Z=$!=null?y1(h1($)):{};let Q=X||!$||!$.__esModule?NQ(Z,"default",{value:$,enumerable:!0}):Z;for(let Y of i2($))if(!n2.call(Q,Y))NQ(Q,Y,{get:()=>$[Y],enumerable:!0});return Q},p2=new WeakMap,d1=($)=>{var X=p2.get($),Z;if(X)return X;if(X=NQ({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")i2($).map((Q)=>!n2.call(X,Q)&&NQ(X,Q,{get:()=>$[Q],enumerable:!(Z=m1($,Q))||Z.enumerable}));return p2.set($,X),X},GZ=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var $8=($,X)=>{for(var Z in X)NQ($,Z,{get:X[Z],enumerable:!0,configurable:!0,set:(Q)=>X[Z]=()=>Q})};var c1=($,X)=>()=>($&&(X=$($=0)),X);var _Q=GZ((Pm,A5)=>{var w5=12,kw=0,QJ=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function gw($){var X=$.indexOf("%");if(X===-1)return $;var Z=$.length,Q="",Y=0,J=0,W=X,z=w5;while(X>-1&&X<Z){var G=O5($[X+1],4),M=O5($[X+2],0),q=G|M,B=QJ[q];if(z=QJ[256+z+B],J=J<<6|q&QJ[364+B],z===w5)Q+=$.slice(Y,W),Q+=J<=65535?String.fromCharCode(J):String.fromCharCode(55232+(J>>10),56320+(J&1023)),J=0,Y=X+3,X=W=$.indexOf("%",Y);else if(z===kw)return null;else{if(X+=3,X<Z&&$.charCodeAt(X)===37)continue;return null}}return Q+$.slice(Y)}var fw={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function O5($,X){var Z=fw[$];return Z===void 0?255:Z<<X}A5.exports=gw});var ZG=GZ((XG)=>{Object.defineProperty(XG,"__esModule",{value:!0});XG.parse=bj;XG.serialize=xj;var Sj=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Ij=/^[\u0021-\u003A\u003C-\u007E]*$/,Rj=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Ej=/^[\u0020-\u003A\u003D-\u007E]*$/,Tj=Object.prototype.toString,_j=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function bj($,X){let Z=new _j,Q=$.length;if(Q<2)return Z;let Y=X?.decode||kj,J=0;do{let W=$.indexOf("=",J);if(W===-1)break;let z=$.indexOf(";",J),G=z===-1?Q:z;if(W>G){J=$.lastIndexOf(";",W-1)+1;continue}let M=e5($,J,W),q=$G($,W,M),B=$.slice(M,q);if(Z[B]===void 0){let w=e5($,W+1,G),H=$G($,G,w),U=Y($.slice(w,H));Z[B]=U}J=G+1}while(J<Q);return Z}function e5($,X,Z){do{let Q=$.charCodeAt(X);if(Q!==32&&Q!==9)return X}while(++X<Z);return Z}function $G($,X,Z){while(X>Z){let Q=$.charCodeAt(--X);if(Q!==32&&Q!==9)return X+1}return Z}function xj($,X,Z){let Q=Z?.encode||encodeURIComponent;if(!Sj.test($))throw new TypeError(`argument name is invalid: ${$}`);let Y=Q(X);if(!Ij.test(Y))throw new TypeError(`argument val is invalid: ${X}`);let J=$+"="+Y;if(!Z)return J;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);J+="; Max-Age="+Z.maxAge}if(Z.domain){if(!Rj.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);J+="; Domain="+Z.domain}if(Z.path){if(!Ej.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);J+="; Path="+Z.path}if(Z.expires){if(!gj(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);J+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly)J+="; HttpOnly";if(Z.secure)J+="; Secure";if(Z.partitioned)J+="; Partitioned";if(Z.priority)switch(typeof Z.priority==="string"?Z.priority.toLowerCase():void 0){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite==="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"none":J+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return J}function kj($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(X){return $}}function gj($){return Tj.call($)==="[object Date]"}});var GG=GZ((Gl,zG)=>{zG.exports=function($){if(!($&&$.length>1))return null;if($[0]===255&&$[1]===216&&$[2]===255)return{ext:"jpg",mime:"image/jpeg"};if($[0]===137&&$[1]===80&&$[2]===78&&$[3]===71)return{ext:"png",mime:"image/png"};if($[0]===71&&$[1]===73&&$[2]===70)return{ext:"gif",mime:"image/gif"};if($[8]===87&&$[9]===69&&$[10]===66&&$[11]===80)return{ext:"webp",mime:"image/webp"};if($[0]===70&&$[1]===76&&$[2]===73&&$[3]===70)return{ext:"flif",mime:"image/flif"};if(($[0]===73&&$[1]===73&&$[2]===42&&$[3]===0||$[0]===77&&$[1]===77&&$[2]===0&&$[3]===42)&&$[8]===67&&$[9]===82)return{ext:"cr2",mime:"image/x-canon-cr2"};if($[0]===73&&$[1]===73&&$[2]===42&&$[3]===0||$[0]===77&&$[1]===77&&$[2]===0&&$[3]===42)return{ext:"tif",mime:"image/tiff"};if($[0]===66&&$[1]===77)return{ext:"bmp",mime:"image/bmp"};if($[0]===73&&$[1]===73&&$[2]===188)return{ext:"jxr",mime:"image/vnd.ms-photo"};if($[0]===56&&$[1]===66&&$[2]===80&&$[3]===83)return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if($[0]===80&&$[1]===75&&$[2]===3&&$[3]===4&&$[30]===109&&$[31]===105&&$[32]===109&&$[33]===101&&$[34]===116&&$[35]===121&&$[36]===112&&$[37]===101&&$[38]===97&&$[39]===112&&$[40]===112&&$[41]===108&&$[42]===105&&$[43]===99&&$[44]===97&&$[45]===116&&$[46]===105&&$[47]===111&&$[48]===110&&$[49]===47&&$[50]===101&&$[51]===112&&$[52]===117&&$[53]===98&&$[54]===43&&$[55]===122&&$[56]===105&&$[57]===112)return{ext:"epub",mime:"application/epub+zip"};if($[0]===80&&$[1]===75&&$[2]===3&&$[3]===4&&$[30]===77&&$[31]===69&&$[32]===84&&$[33]===65&&$[34]===45&&$[35]===73&&$[36]===78&&$[37]===70&&$[38]===47&&$[39]===109&&$[40]===111&&$[41]===122&&$[42]===105&&$[43]===108&&$[44]===108&&$[45]===97&&$[46]===46&&$[47]===114&&$[48]===115&&$[49]===97)return{ext:"xpi",mime:"application/x-xpinstall"};if($[0]===80&&$[1]===75&&($[2]===3||$[2]===5||$[2]===7)&&($[3]===4||$[3]===6||$[3]===8))return{ext:"zip",mime:"application/zip"};if($[257]===117&&$[258]===115&&$[259]===116&&$[260]===97&&$[261]===114)return{ext:"tar",mime:"application/x-tar"};if($[0]===82&&$[1]===97&&$[2]===114&&$[3]===33&&$[4]===26&&$[5]===7&&($[6]===0||$[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if($[0]===31&&$[1]===139&&$[2]===8)return{ext:"gz",mime:"application/gzip"};if($[0]===66&&$[1]===90&&$[2]===104)return{ext:"bz2",mime:"application/x-bzip2"};if($[0]===55&&$[1]===122&&$[2]===188&&$[3]===175&&$[4]===39&&$[5]===28)return{ext:"7z",mime:"application/x-7z-compressed"};if($[0]===120&&$[1]===1)return{ext:"dmg",mime:"application/x-apple-diskimage"};if($[0]===0&&$[1]===0&&$[2]===0&&($[3]===24||$[3]===32)&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112||$[0]===51&&$[1]===103&&$[2]===112&&$[3]===53||$[0]===0&&$[1]===0&&$[2]===0&&$[3]===28&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112&&$[8]===109&&$[9]===112&&$[10]===52&&$[11]===50&&$[16]===109&&$[17]===112&&$[18]===52&&$[19]===49&&$[20]===109&&$[21]===112&&$[22]===52&&$[23]===50&&$[24]===105&&$[25]===115&&$[26]===111&&$[27]===109||$[0]===0&&$[1]===0&&$[2]===0&&$[3]===28&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112&&$[8]===105&&$[9]===115&&$[10]===111&&$[11]===109||$[0]===0&&$[1]===0&&$[2]===0&&$[3]===28&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112&&$[8]===109&&$[9]===112&&$[10]===52&&$[11]===50&&$[12]===0&&$[13]===0&&$[14]===0&&$[15]===0)return{ext:"mp4",mime:"video/mp4"};if($[0]===0&&$[1]===0&&$[2]===0&&$[3]===28&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112&&$[8]===77&&$[9]===52&&$[10]===86)return{ext:"m4v",mime:"video/x-m4v"};if($[0]===77&&$[1]===84&&$[2]===104&&$[3]===100)return{ext:"mid",mime:"audio/midi"};if($[31]===109&&$[32]===97&&$[33]===116&&$[34]===114&&$[35]===111&&$[36]===115&&$[37]===107&&$[38]===97)return{ext:"mkv",mime:"video/x-matroska"};if($[0]===26&&$[1]===69&&$[2]===223&&$[3]===163)return{ext:"webm",mime:"video/webm"};if($[0]===0&&$[1]===0&&$[2]===0&&$[3]===20&&$[4]===102&&$[5]===116&&$[6]===121&&$[7]===112)return{ext:"mov",mime:"video/quicktime"};if($[0]===82&&$[1]===73&&$[2]===70&&$[3]===70&&$[8]===65&&$[9]===86&&$[10]===73)return{ext:"avi",mime:"video/x-msvideo"};if($[0]===48&&$[1]===38&&$[2]===178&&$[3]===117&&$[4]===142&&$[5]===102&&$[6]===207&&$[7]===17&&$[8]===166&&$[9]===217)return{ext:"wmv",mime:"video/x-ms-wmv"};if($[0]===0&&$[1]===0&&$[2]===1&&$[3].toString(16)[0]==="b")return{ext:"mpg",mime:"video/mpeg"};if($[0]===73&&$[1]===68&&$[2]===51||$[0]===255&&$[1]===251)return{ext:"mp3",mime:"audio/mpeg"};if($[4]===102&&$[5]===116&&$[6]===121&&$[7]===112&&$[8]===77&&$[9]===52&&$[10]===65||$[0]===77&&$[1]===52&&$[2]===65&&$[3]===32)return{ext:"m4a",mime:"audio/m4a"};if($[28]===79&&$[29]===112&&$[30]===117&&$[31]===115&&$[32]===72&&$[33]===101&&$[34]===97&&$[35]===100)return{ext:"opus",mime:"audio/opus"};if($[0]===79&&$[1]===103&&$[2]===103&&$[3]===83)return{ext:"ogg",mime:"audio/ogg"};if($[0]===102&&$[1]===76&&$[2]===97&&$[3]===67)return{ext:"flac",mime:"audio/x-flac"};if($[0]===82&&$[1]===73&&$[2]===70&&$[3]===70&&$[8]===87&&$[9]===65&&$[10]===86&&$[11]===69)return{ext:"wav",mime:"audio/x-wav"};if($[0]===35&&$[1]===33&&$[2]===65&&$[3]===77&&$[4]===82&&$[5]===10)return{ext:"amr",mime:"audio/amr"};if($[0]===37&&$[1]===80&&$[2]===68&&$[3]===70)return{ext:"pdf",mime:"application/pdf"};if($[0]===77&&$[1]===90)return{ext:"exe",mime:"application/x-msdownload"};if(($[0]===67||$[0]===70)&&$[1]===87&&$[2]===83)return{ext:"swf",mime:"application/x-shockwave-flash"};if($[0]===123&&$[1]===92&&$[2]===114&&$[3]===116&&$[4]===102)return{ext:"rtf",mime:"application/rtf"};if($[0]===119&&$[1]===79&&$[2]===70&&$[3]===70&&($[4]===0&&$[5]===1&&$[6]===0&&$[7]===0||$[4]===79&&$[5]===84&&$[6]===84&&$[7]===79))return{ext:"woff",mime:"application/font-woff"};if($[0]===119&&$[1]===79&&$[2]===70&&$[3]===50&&($[4]===0&&$[5]===1&&$[6]===0&&$[7]===0||$[4]===79&&$[5]===84&&$[6]===84&&$[7]===79))return{ext:"woff2",mime:"application/font-woff"};if($[34]===76&&$[35]===80&&($[8]===0&&$[9]===0&&$[10]===1||$[8]===1&&$[9]===0&&$[10]===2||$[8]===2&&$[9]===0&&$[10]===2))return{ext:"eot",mime:"application/octet-stream"};if($[0]===0&&$[1]===1&&$[2]===0&&$[3]===0&&$[4]===0)return{ext:"ttf",mime:"application/font-sfnt"};if($[0]===79&&$[1]===84&&$[2]===84&&$[3]===79&&$[4]===0)return{ext:"otf",mime:"application/font-sfnt"};if($[0]===0&&$[1]===0&&$[2]===1&&$[3]===0)return{ext:"ico",mime:"image/x-icon"};if($[0]===70&&$[1]===76&&$[2]===86&&$[3]===1)return{ext:"flv",mime:"video/x-flv"};if($[0]===37&&$[1]===33)return{ext:"ps",mime:"application/postscript"};if($[0]===253&&$[1]===55&&$[2]===122&&$[3]===88&&$[4]===90&&$[5]===0)return{ext:"xz",mime:"application/x-xz"};if($[0]===83&&$[1]===81&&$[2]===76&&$[3]===105)return{ext:"sqlite",mime:"application/x-sqlite3"};if($[0]===78&&$[1]===69&&$[2]===83&&$[3]===26)return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if($[0]===67&&$[1]===114&&$[2]===50&&$[3]===52)return{ext:"crx",mime:"application/x-google-chrome-extension"};if($[0]===77&&$[1]===83&&$[2]===67&&$[3]===70||$[0]===73&&$[1]===83&&$[2]===99&&$[3]===40)return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if($[0]===33&&$[1]===60&&$[2]===97&&$[3]===114&&$[4]===99&&$[5]===104&&$[6]===62&&$[7]===10&&$[8]===100&&$[9]===101&&$[10]===98&&$[11]===105&&$[12]===97&&$[13]===110&&$[14]===45&&$[15]===98&&$[16]===105&&$[17]===110&&$[18]===97&&$[19]===114&&$[20]===121)return{ext:"deb",mime:"application/x-deb"};if($[0]===33&&$[1]===60&&$[2]===97&&$[3]===114&&$[4]===99&&$[5]===104&&$[6]===62)return{ext:"ar",mime:"application/x-unix-archive"};if($[0]===237&&$[1]===171&&$[2]===238&&$[3]===219)return{ext:"rpm",mime:"application/x-rpm"};if($[0]===31&&$[1]===160||$[0]===31&&$[1]===157)return{ext:"Z",mime:"application/x-compress"};if($[0]===76&&$[1]===90&&$[2]===73&&$[3]===80)return{ext:"lz",mime:"application/x-lzip"};if($[0]===208&&$[1]===207&&$[2]===17&&$[3]===224&&$[4]===161&&$[5]===177&&$[6]===26&&$[7]===225)return{ext:"msi",mime:"application/x-msi"};return null}});var X9={};$8(X9,{fetch:()=>_E,default:()=>N2,Response:()=>xE,Request:()=>bE,Headers:()=>w2});var TE=function(){if(typeof self!=="undefined")return self;if(typeof window!=="undefined")return window;if(typeof global!=="undefined")return global;throw new Error("unable to locate global object")},a9,_E,N2,w2,bE,xE;var S8=c1(()=>{a9=TE(),_E=a9.fetch,N2=a9.fetch.bind(a9),w2=a9.Headers,bE=a9.Request,xE=a9.Response});var O2=GZ((WB)=>{Object.defineProperty(WB,"__esModule",{value:!0});class JB extends Error{constructor($){super($.message);this.name="PostgrestError",this.details=$.details,this.hint=$.hint,this.code=$.code}}WB.default=JB});var A2=GZ((zY)=>{var zB=zY&&zY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(zY,"__esModule",{value:!0});var fE=zB((S8(),d1(X9))),vE=zB(O2());class GB{constructor($){var X,Z;if(this.shouldThrowOnError=!1,this.method=$.method,this.url=$.url,this.headers=new Headers($.headers),this.schema=$.schema,this.body=$.body,this.shouldThrowOnError=(X=$.shouldThrowOnError)!==null&&X!==void 0?X:!1,this.signal=$.signal,this.isMaybeSingle=(Z=$.isMaybeSingle)!==null&&Z!==void 0?Z:!1,$.fetch)this.fetch=$.fetch;else if(typeof fetch==="undefined")this.fetch=fE.default;else this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader($,X){return this.headers=new Headers(this.headers),this.headers.set($,X),this}then($,X){if(this.schema===void 0);else if(["GET","HEAD"].includes(this.method))this.headers.set("Accept-Profile",this.schema);else this.headers.set("Content-Profile",this.schema);if(this.method!=="GET"&&this.method!=="HEAD")this.headers.set("Content-Type","application/json");let Z=this.fetch,Q=Z(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async(Y)=>{var J,W,z,G;let M=null,q=null,B=null,w=Y.status,H=Y.statusText;if(Y.ok){if(this.method!=="HEAD"){let A=await Y.text();if(A==="");else if(this.headers.get("Accept")==="text/csv")q=A;else if(this.headers.get("Accept")&&((J=this.headers.get("Accept"))===null||J===void 0?void 0:J.includes("application/vnd.pgrst.plan+text")))q=A;else q=JSON.parse(A)}let O=(W=this.headers.get("Prefer"))===null||W===void 0?void 0:W.match(/count=(exact|planned|estimated)/),F=(z=Y.headers.get("content-range"))===null||z===void 0?void 0:z.split("/");if(O&&F&&F.length>1)B=parseInt(F[1]);if(this.isMaybeSingle&&this.method==="GET"&&Array.isArray(q))if(q.length>1)M={code:"PGRST116",details:`Results contain ${q.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},q=null,B=null,w=406,H="Not Acceptable";else if(q.length===1)q=q[0];else q=null}else{let O=await Y.text();try{if(M=JSON.parse(O),Array.isArray(M)&&Y.status===404)q=[],M=null,w=200,H="OK"}catch(F){if(Y.status===404&&O==="")w=204,H="No Content";else M={message:O}}if(M&&this.isMaybeSingle&&((G=M===null||M===void 0?void 0:M.details)===null||G===void 0?void 0:G.includes("0 rows")))M=null,w=200,H="OK";if(M&&this.shouldThrowOnError)throw new vE.default(M)}return{error:M,data:q,count:B,status:w,statusText:H}});if(!this.shouldThrowOnError)Q=Q.catch((Y)=>{var J,W,z;return{error:{message:`${(J=Y===null||Y===void 0?void 0:Y.name)!==null&&J!==void 0?J:"FetchError"}: ${Y===null||Y===void 0?void 0:Y.message}`,details:`${(W=Y===null||Y===void 0?void 0:Y.stack)!==null&&W!==void 0?W:""}`,hint:"",code:`${(z=Y===null||Y===void 0?void 0:Y.code)!==null&&z!==void 0?z:""}`},data:null,count:null,status:0,statusText:""}});return Q.then($,X)}returns(){return this}overrideTypes(){return this}}zY.default=GB});var L2=GZ((GY)=>{var yE=GY&&GY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(GY,"__esModule",{value:!0});var hE=yE(A2());class MB extends hE.default{select($){let X=!1,Z=($!==null&&$!==void 0?$:"*").split("").map((Q)=>{if(/\s/.test(Q)&&!X)return"";if(Q==='"')X=!X;return Q}).join("");return this.url.searchParams.set("select",Z),this.headers.append("Prefer","return=representation"),this}order($,{ascending:X=!0,nullsFirst:Z,foreignTable:Q,referencedTable:Y=Q}={}){let J=Y?`${Y}.order`:"order",W=this.url.searchParams.get(J);return this.url.searchParams.set(J,`${W?`${W},`:""}${$}.${X?"asc":"desc"}${Z===void 0?"":Z?".nullsfirst":".nullslast"}`),this}limit($,{foreignTable:X,referencedTable:Z=X}={}){let Q=typeof Z==="undefined"?"limit":`${Z}.limit`;return this.url.searchParams.set(Q,`${$}`),this}range($,X,{foreignTable:Z,referencedTable:Q=Z}={}){let Y=typeof Q==="undefined"?"offset":`${Q}.offset`,J=typeof Q==="undefined"?"limit":`${Q}.limit`;return this.url.searchParams.set(Y,`${$}`),this.url.searchParams.set(J,`${X-$+1}`),this}abortSignal($){return this.signal=$,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){if(this.method==="GET")this.headers.set("Accept","application/json");else this.headers.set("Accept","application/vnd.pgrst.object+json");return this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:$=!1,verbose:X=!1,settings:Z=!1,buffers:Q=!1,wal:Y=!1,format:J="text"}={}){var W;let z=[$?"analyze":null,X?"verbose":null,Z?"settings":null,Q?"buffers":null,Y?"wal":null].filter(Boolean).join("|"),G=(W=this.headers.get("Accept"))!==null&&W!==void 0?W:"application/json";if(this.headers.set("Accept",`application/vnd.pgrst.plan+${J}; for="${G}"; options=${z};`),J==="json")return this;else return this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected($){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${$}`),this}}GY.default=MB});var e6=GZ((MY)=>{var mE=MY&&MY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(MY,"__esModule",{value:!0});var dE=mE(L2());class qB extends dE.default{eq($,X){return this.url.searchParams.append($,`eq.${X}`),this}neq($,X){return this.url.searchParams.append($,`neq.${X}`),this}gt($,X){return this.url.searchParams.append($,`gt.${X}`),this}gte($,X){return this.url.searchParams.append($,`gte.${X}`),this}lt($,X){return this.url.searchParams.append($,`lt.${X}`),this}lte($,X){return this.url.searchParams.append($,`lte.${X}`),this}like($,X){return this.url.searchParams.append($,`like.${X}`),this}likeAllOf($,X){return this.url.searchParams.append($,`like(all).{${X.join(",")}}`),this}likeAnyOf($,X){return this.url.searchParams.append($,`like(any).{${X.join(",")}}`),this}ilike($,X){return this.url.searchParams.append($,`ilike.${X}`),this}ilikeAllOf($,X){return this.url.searchParams.append($,`ilike(all).{${X.join(",")}}`),this}ilikeAnyOf($,X){return this.url.searchParams.append($,`ilike(any).{${X.join(",")}}`),this}is($,X){return this.url.searchParams.append($,`is.${X}`),this}in($,X){let Z=Array.from(new Set(X)).map((Q)=>{if(typeof Q==="string"&&new RegExp("[,()]").test(Q))return`"${Q}"`;else return`${Q}`}).join(",");return this.url.searchParams.append($,`in.(${Z})`),this}contains($,X){if(typeof X==="string")this.url.searchParams.append($,`cs.${X}`);else if(Array.isArray(X))this.url.searchParams.append($,`cs.{${X.join(",")}}`);else this.url.searchParams.append($,`cs.${JSON.stringify(X)}`);return this}containedBy($,X){if(typeof X==="string")this.url.searchParams.append($,`cd.${X}`);else if(Array.isArray(X))this.url.searchParams.append($,`cd.{${X.join(",")}}`);else this.url.searchParams.append($,`cd.${JSON.stringify(X)}`);return this}rangeGt($,X){return this.url.searchParams.append($,`sr.${X}`),this}rangeGte($,X){return this.url.searchParams.append($,`nxl.${X}`),this}rangeLt($,X){return this.url.searchParams.append($,`sl.${X}`),this}rangeLte($,X){return this.url.searchParams.append($,`nxr.${X}`),this}rangeAdjacent($,X){return this.url.searchParams.append($,`adj.${X}`),this}overlaps($,X){if(typeof X==="string")this.url.searchParams.append($,`ov.${X}`);else this.url.searchParams.append($,`ov.{${X.join(",")}}`);return this}textSearch($,X,{config:Z,type:Q}={}){let Y="";if(Q==="plain")Y="pl";else if(Q==="phrase")Y="ph";else if(Q==="websearch")Y="w";let J=Z===void 0?"":`(${Z})`;return this.url.searchParams.append($,`${Y}fts${J}.${X}`),this}match($){return Object.entries($).forEach(([X,Z])=>{this.url.searchParams.append(X,`eq.${Z}`)}),this}not($,X,Z){return this.url.searchParams.append($,`not.${X}.${Z}`),this}or($,{foreignTable:X,referencedTable:Z=X}={}){let Q=Z?`${Z}.or`:"or";return this.url.searchParams.append(Q,`(${$})`),this}filter($,X,Z){return this.url.searchParams.append($,`${X}.${Z}`),this}}MY.default=qB});var K2=GZ((BY)=>{var cE=BY&&BY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(BY,"__esModule",{value:!0});var qY=cE(e6());class BB{constructor($,{headers:X={},schema:Z,fetch:Q}){this.url=$,this.headers=new Headers(X),this.schema=Z,this.fetch=Q}select($,X){let{head:Z=!1,count:Q}=X!==null&&X!==void 0?X:{},Y=Z?"HEAD":"GET",J=!1,W=($!==null&&$!==void 0?$:"*").split("").map((z)=>{if(/\s/.test(z)&&!J)return"";if(z==='"')J=!J;return z}).join("");if(this.url.searchParams.set("select",W),Q)this.headers.append("Prefer",`count=${Q}`);return new qY.default({method:Y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert($,{count:X,defaultToNull:Z=!0}={}){var Q;let Y="POST";if(X)this.headers.append("Prefer",`count=${X}`);if(!Z)this.headers.append("Prefer","missing=default");if(Array.isArray($)){let J=$.reduce((W,z)=>W.concat(Object.keys(z)),[]);if(J.length>0){let W=[...new Set(J)].map((z)=>`"${z}"`);this.url.searchParams.set("columns",W.join(","))}}return new qY.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:$,fetch:(Q=this.fetch)!==null&&Q!==void 0?Q:fetch})}upsert($,{onConflict:X,ignoreDuplicates:Z=!1,count:Q,defaultToNull:Y=!0}={}){var J;let W="POST";if(this.headers.append("Prefer",`resolution=${Z?"ignore":"merge"}-duplicates`),X!==void 0)this.url.searchParams.set("on_conflict",X);if(Q)this.headers.append("Prefer",`count=${Q}`);if(!Y)this.headers.append("Prefer","missing=default");if(Array.isArray($)){let z=$.reduce((G,M)=>G.concat(Object.keys(M)),[]);if(z.length>0){let G=[...new Set(z)].map((M)=>`"${M}"`);this.url.searchParams.set("columns",G.join(","))}}return new qY.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:$,fetch:(J=this.fetch)!==null&&J!==void 0?J:fetch})}update($,{count:X}={}){var Z;let Q="PATCH";if(X)this.headers.append("Prefer",`count=${X}`);return new qY.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:$,fetch:(Z=this.fetch)!==null&&Z!==void 0?Z:fetch})}delete({count:$}={}){var X;let Z="DELETE";if($)this.headers.append("Prefer",`count=${$}`);return new qY.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:(X=this.fetch)!==null&&X!==void 0?X:fetch})}}BY.default=BB});var UB=GZ((HY)=>{var HB=HY&&HY.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(HY,"__esModule",{value:!0});var uE=HB(K2()),lE=HB(e6());class j2{constructor($,{headers:X={},schema:Z,fetch:Q}={}){this.url=$,this.headers=new Headers(X),this.schemaName=Z,this.fetch=Q}from($){let X=new URL(`${this.url}/${$}`);return new uE.default(X,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema($){return new j2(this.url,{headers:this.headers,schema:$,fetch:this.fetch})}rpc($,X={},{head:Z=!1,get:Q=!1,count:Y}={}){var J;let W,z=new URL(`${this.url}/rpc/${$}`),G;if(Z||Q)W=Z?"HEAD":"GET",Object.entries(X).filter(([q,B])=>B!==void 0).map(([q,B])=>[q,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([q,B])=>{z.searchParams.append(q,B)});else W="POST",G=X;let M=new Headers(this.headers);if(Y)M.set("Prefer",`count=${Y}`);return new lE.default({method:W,url:z,headers:M,schema:this.schemaName,body:G,fetch:(J=this.fetch)!==null&&J!==void 0?J:fetch})}}HY.default=j2});var KB=GZ((v$)=>{var e9=v$&&v$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(v$,"__esModule",{value:!0});v$.PostgrestError=v$.PostgrestBuilder=v$.PostgrestTransformBuilder=v$.PostgrestFilterBuilder=v$.PostgrestQueryBuilder=v$.PostgrestClient=void 0;var DB=e9(UB());v$.PostgrestClient=DB.default;var NB=e9(K2());v$.PostgrestQueryBuilder=NB.default;var wB=e9(e6());v$.PostgrestFilterBuilder=wB.default;var OB=e9(L2());v$.PostgrestTransformBuilder=OB.default;var AB=e9(A2());v$.PostgrestBuilder=AB.default;var LB=e9(O2());v$.PostgrestError=LB.default;v$.default={PostgrestClient:DB.default,PostgrestQueryBuilder:NB.default,PostgrestFilterBuilder:wB.default,PostgrestTransformBuilder:OB.default,PostgrestBuilder:AB.default,PostgrestError:LB.default}});var h$={};$8(h$,{IsUndefined:()=>B$,IsUint8Array:()=>PZ,IsSymbol:()=>x7,IsString:()=>b0,IsRegExp:()=>OQ,IsObject:()=>C0,IsNumber:()=>HX,IsNull:()=>b7,IsIterator:()=>_7,IsFunction:()=>T7,IsDate:()=>k8,IsBoolean:()=>CZ,IsBigInt:()=>wQ,IsAsyncIterator:()=>E7,IsArray:()=>q$,HasPropertyKey:()=>PY});function PY($,X){return X in $}function E7($){return C0($)&&!q$($)&&!PZ($)&&Symbol.asyncIterator in $}function q$($){return Array.isArray($)}function wQ($){return typeof $==="bigint"}function CZ($){return typeof $==="boolean"}function k8($){return $ instanceof globalThis.Date}function T7($){return typeof $==="function"}function _7($){return C0($)&&!q$($)&&!PZ($)&&Symbol.iterator in $}function b7($){return $===null}function HX($){return typeof $==="number"}function C0($){return typeof $==="object"&&$!==null}function OQ($){return $ instanceof globalThis.RegExp}function b0($){return typeof $==="string"}function x7($){return typeof $==="symbol"}function PZ($){return $ instanceof globalThis.Uint8Array}function B$($){return $===void 0}function u1($){return $.map((X)=>SY(X))}function l1($){return new Date($.getTime())}function p1($){return new Uint8Array($)}function i1($){return new RegExp($.source,$.flags)}function n1($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=SY($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=SY($[Z]);return X}function SY($){return q$($)?u1($):k8($)?l1($):PZ($)?p1($):OQ($)?i1($):C0($)?n1($):$}function m0($){return SY($)}function B9($,X){return X===void 0?m0($):m0({...X,...$})}function IY($){return e($)&&globalThis.Symbol.asyncIterator in $}function RY($){return e($)&&globalThis.Symbol.iterator in $}function k7($){return e($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function EY($){return $ instanceof globalThis.Promise}function p$($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function o2($){return $ instanceof globalThis.Map}function r2($){return $ instanceof globalThis.Set}function VX($){return globalThis.ArrayBuffer.isView($)}function H9($){return $ instanceof globalThis.Uint8Array}function s($,X){return X in $}function e($){return $!==null&&typeof $==="object"}function o($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function d0($){return $===void 0}function SZ($){return $===null}function MZ($){return typeof $==="boolean"}function p($){return typeof $==="number"}function TY($){return globalThis.Number.isInteger($)}function x$($){return typeof $==="bigint"}function U0($){return typeof $==="string"}function X8($){return typeof $==="function"}function IZ($){return typeof $==="symbol"}function UX($){return x$($)||MZ($)||SZ($)||p($)||U0($)||IZ($)||d0($)}var g0;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(W,z){return $.ExactOptionalPropertyTypes?z in W:W[z]!==void 0}$.IsExactOptionalProperty=X;function Z(W){let z=e(W);return $.AllowArrayObject?z:z&&!o(W)}$.IsObjectLike=Z;function Q(W){return Z(W)&&!(W instanceof Date)&&!(W instanceof Uint8Array)}$.IsRecordLike=Q;function Y(W){return $.AllowNaN?p(W):Number.isFinite(W)}$.IsNumberLike=Y;function J(W){let z=d0(W);return $.AllowNullVoid?z||W===null:z}$.IsVoidLike=J})(g0||(g0={}));function o1($){return globalThis.Object.freeze($).map((X)=>AQ(X))}function r1($){return $}function s1($){return $}function t1($){return $}function a1($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=AQ($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=AQ($[Z]);return globalThis.Object.freeze(X)}function AQ($){return q$($)?o1($):k8($)?r1($):PZ($)?s1($):OQ($)?t1($):C0($)?a1($):$}function S($,X){let Z=X!==void 0?{...X,...$}:$;switch(g0.InstanceMode){case"freeze":return AQ(Z);case"clone":return m0(Z);default:return Z}}class r extends Error{constructor($){super($)}}var T0=Symbol.for("TypeBox.Transform"),fX=Symbol.for("TypeBox.Readonly"),K$=Symbol.for("TypeBox.Optional"),CX=Symbol.for("TypeBox.Hint"),j=Symbol.for("TypeBox.Kind");function U9($){return C0($)&&$[fX]==="Readonly"}function e$($){return C0($)&&$[K$]==="Optional"}function g7($){return q0($,"Any")}function f7($){return q0($,"Argument")}function vX($){return q0($,"Array")}function g8($){return q0($,"AsyncIterator")}function f8($){return q0($,"BigInt")}function RZ($){return q0($,"Boolean")}function yX($){return q0($,"Computed")}function hX($){return q0($,"Constructor")}function e1($){return q0($,"Date")}function mX($){return q0($,"Function")}function dX($){return q0($,"Integer")}function e0($){return q0($,"Intersect")}function v8($){return q0($,"Iterator")}function q0($,X){return C0($)&&j in $&&$[j]===X}function _Y($){return CZ($)||HX($)||b0($)}function DX($){return q0($,"Literal")}function NX($){return q0($,"MappedKey")}function c0($){return q0($,"MappedResult")}function Z8($){return q0($,"Never")}function $H($){return q0($,"Not")}function LQ($){return q0($,"Null")}function cX($){return q0($,"Number")}function H$($){return q0($,"Object")}function y8($){return q0($,"Promise")}function h8($){return q0($,"Record")}function W$($){return q0($,"Ref")}function v7($){return q0($,"RegExp")}function EZ($){return q0($,"String")}function KQ($){return q0($,"Symbol")}function wX($){return q0($,"TemplateLiteral")}function XH($){return q0($,"This")}function L0($){return C0($)&&T0 in $}function OX($){return q0($,"Tuple")}function TZ($){return q0($,"Undefined")}function D0($){return q0($,"Union")}function ZH($){return q0($,"Uint8Array")}function QH($){return q0($,"Unknown")}function YH($){return q0($,"Unsafe")}function JH($){return q0($,"Void")}function Q8($){return C0($)&&j in $&&b0($[j])}function n0($){return g7($)||f7($)||vX($)||RZ($)||f8($)||g8($)||yX($)||hX($)||e1($)||mX($)||dX($)||e0($)||v8($)||DX($)||NX($)||c0($)||Z8($)||$H($)||LQ($)||cX($)||H$($)||y8($)||h8($)||W$($)||v7($)||EZ($)||KQ($)||wX($)||XH($)||OX($)||TZ($)||D0($)||ZH($)||QH($)||YH($)||JH($)||Q8($)}var K={};$8(K,{TypeGuardUnknownTypeError:()=>s2,IsVoid:()=>vW,IsUnsafe:()=>fW,IsUnknown:()=>gW,IsUnionLiteral:()=>DH,IsUnion:()=>m7,IsUndefined:()=>xW,IsUint8Array:()=>kW,IsTuple:()=>bW,IsTransform:()=>_W,IsThis:()=>TW,IsTemplateLiteral:()=>EW,IsSymbol:()=>RW,IsString:()=>IW,IsSchema:()=>u0,IsRegExp:()=>SW,IsRef:()=>PW,IsRecursive:()=>UH,IsRecord:()=>CW,IsReadonly:()=>MH,IsProperties:()=>bY,IsPromise:()=>VW,IsOptional:()=>qH,IsObject:()=>FW,IsNumber:()=>jW,IsNull:()=>KW,IsNot:()=>LW,IsNever:()=>AW,IsMappedResult:()=>OW,IsMappedKey:()=>wW,IsLiteralValue:()=>NW,IsLiteralString:()=>UW,IsLiteralNumber:()=>DW,IsLiteralBoolean:()=>HH,IsLiteral:()=>FQ,IsKindOf:()=>Y0,IsKind:()=>yW,IsIterator:()=>HW,IsIntersect:()=>BW,IsInteger:()=>qW,IsImport:()=>BH,IsFunction:()=>MW,IsDate:()=>GW,IsConstructor:()=>zW,IsComputed:()=>WW,IsBoolean:()=>JW,IsBigInt:()=>YW,IsAsyncIterator:()=>QW,IsArray:()=>ZW,IsArgument:()=>XW,IsAny:()=>$W});class s2 extends r{}var WH=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function t2($){try{return new RegExp($),!0}catch{return!1}}function y7($){if(!b0($))return!1;for(let X=0;X<$.length;X++){let Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0}function a2($){return h7($)||u0($)}function jQ($){return B$($)||wQ($)}function x0($){return B$($)||HX($)}function h7($){return B$($)||CZ($)}function P0($){return B$($)||b0($)}function zH($){return B$($)||b0($)&&y7($)&&t2($)}function GH($){return B$($)||b0($)&&y7($)}function e2($){return B$($)||u0($)}function MH($){return C0($)&&$[fX]==="Readonly"}function qH($){return C0($)&&$[K$]==="Optional"}function $W($){return Y0($,"Any")&&P0($.$id)}function XW($){return Y0($,"Argument")&&HX($.index)}function ZW($){return Y0($,"Array")&&$.type==="array"&&P0($.$id)&&u0($.items)&&x0($.minItems)&&x0($.maxItems)&&h7($.uniqueItems)&&e2($.contains)&&x0($.minContains)&&x0($.maxContains)}function QW($){return Y0($,"AsyncIterator")&&$.type==="AsyncIterator"&&P0($.$id)&&u0($.items)}function YW($){return Y0($,"BigInt")&&$.type==="bigint"&&P0($.$id)&&jQ($.exclusiveMaximum)&&jQ($.exclusiveMinimum)&&jQ($.maximum)&&jQ($.minimum)&&jQ($.multipleOf)}function JW($){return Y0($,"Boolean")&&$.type==="boolean"&&P0($.$id)}function WW($){return Y0($,"Computed")&&b0($.target)&&q$($.parameters)&&$.parameters.every((X)=>u0(X))}function zW($){return Y0($,"Constructor")&&$.type==="Constructor"&&P0($.$id)&&q$($.parameters)&&$.parameters.every((X)=>u0(X))&&u0($.returns)}function GW($){return Y0($,"Date")&&$.type==="Date"&&P0($.$id)&&x0($.exclusiveMaximumTimestamp)&&x0($.exclusiveMinimumTimestamp)&&x0($.maximumTimestamp)&&x0($.minimumTimestamp)&&x0($.multipleOfTimestamp)}function MW($){return Y0($,"Function")&&$.type==="Function"&&P0($.$id)&&q$($.parameters)&&$.parameters.every((X)=>u0(X))&&u0($.returns)}function BH($){return Y0($,"Import")&&PY($,"$defs")&&C0($.$defs)&&bY($.$defs)&&PY($,"$ref")&&b0($.$ref)&&$.$ref in $.$defs}function qW($){return Y0($,"Integer")&&$.type==="integer"&&P0($.$id)&&x0($.exclusiveMaximum)&&x0($.exclusiveMinimum)&&x0($.maximum)&&x0($.minimum)&&x0($.multipleOf)}function bY($){return C0($)&&Object.entries($).every(([X,Z])=>y7(X)&&u0(Z))}function BW($){return Y0($,"Intersect")&&(b0($.type)&&$.type!=="object"?!1:!0)&&q$($.allOf)&&$.allOf.every((X)=>u0(X)&&!_W(X))&&P0($.type)&&(h7($.unevaluatedProperties)||e2($.unevaluatedProperties))&&P0($.$id)}function HW($){return Y0($,"Iterator")&&$.type==="Iterator"&&P0($.$id)&&u0($.items)}function Y0($,X){return C0($)&&j in $&&$[j]===X}function UW($){return FQ($)&&b0($.const)}function DW($){return FQ($)&&HX($.const)}function HH($){return FQ($)&&CZ($.const)}function FQ($){return Y0($,"Literal")&&P0($.$id)&&NW($.const)}function NW($){return CZ($)||HX($)||b0($)}function wW($){return Y0($,"MappedKey")&&q$($.keys)&&$.keys.every((X)=>HX(X)||b0(X))}function OW($){return Y0($,"MappedResult")&&bY($.properties)}function AW($){return Y0($,"Never")&&C0($.not)&&Object.getOwnPropertyNames($.not).length===0}function LW($){return Y0($,"Not")&&u0($.not)}function KW($){return Y0($,"Null")&&$.type==="null"&&P0($.$id)}function jW($){return Y0($,"Number")&&$.type==="number"&&P0($.$id)&&x0($.exclusiveMaximum)&&x0($.exclusiveMinimum)&&x0($.maximum)&&x0($.minimum)&&x0($.multipleOf)}function FW($){return Y0($,"Object")&&$.type==="object"&&P0($.$id)&&bY($.properties)&&a2($.additionalProperties)&&x0($.minProperties)&&x0($.maxProperties)}function VW($){return Y0($,"Promise")&&$.type==="Promise"&&P0($.$id)&&u0($.item)}function CW($){return Y0($,"Record")&&$.type==="object"&&P0($.$id)&&a2($.additionalProperties)&&C0($.patternProperties)&&((X)=>{let Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&t2(Z[0])&&C0(X.patternProperties)&&u0(X.patternProperties[Z[0]])})($)}function UH($){return C0($)&&CX in $&&$[CX]==="Recursive"}function PW($){return Y0($,"Ref")&&P0($.$id)&&b0($.$ref)}function SW($){return Y0($,"RegExp")&&P0($.$id)&&b0($.source)&&b0($.flags)&&x0($.maxLength)&&x0($.minLength)}function IW($){return Y0($,"String")&&$.type==="string"&&P0($.$id)&&x0($.minLength)&&x0($.maxLength)&&zH($.pattern)&&GH($.format)}function RW($){return Y0($,"Symbol")&&$.type==="symbol"&&P0($.$id)}function EW($){return Y0($,"TemplateLiteral")&&$.type==="string"&&b0($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function TW($){return Y0($,"This")&&P0($.$id)&&b0($.$ref)}function _W($){return C0($)&&T0 in $}function bW($){return Y0($,"Tuple")&&$.type==="array"&&P0($.$id)&&HX($.minItems)&&HX($.maxItems)&&$.minItems===$.maxItems&&(B$($.items)&&B$($.additionalItems)&&$.minItems===0||q$($.items)&&$.items.every((X)=>u0(X)))}function xW($){return Y0($,"Undefined")&&$.type==="undefined"&&P0($.$id)}function DH($){return m7($)&&$.anyOf.every((X)=>UW(X)||DW(X))}function m7($){return Y0($,"Union")&&P0($.$id)&&C0($)&&q$($.anyOf)&&$.anyOf.every((X)=>u0(X))}function kW($){return Y0($,"Uint8Array")&&$.type==="Uint8Array"&&P0($.$id)&&x0($.minByteLength)&&x0($.maxByteLength)}function gW($){return Y0($,"Unknown")&&P0($.$id)}function fW($){return Y0($,"Unsafe")}function vW($){return Y0($,"Void")&&$.type==="void"&&P0($.$id)}function yW($){return C0($)&&j in $&&b0($[j])&&!WH.includes($[j])}function u0($){return C0($)&&($W($)||XW($)||ZW($)||JW($)||YW($)||QW($)||WW($)||zW($)||GW($)||MW($)||qW($)||BW($)||HW($)||FQ($)||wW($)||OW($)||AW($)||LW($)||KW($)||jW($)||FW($)||VW($)||CW($)||PW($)||SW($)||IW($)||RW($)||EW($)||TW($)||bW($)||xW($)||m7($)||kW($)||gW($)||fW($)||vW($)||yW($))}var hW="(true|false)",xY="(0|[1-9][0-9]*)",mW="(.*)";var Y8="^(0|[1-9][0-9]*)$",J8="^(.*)$",dW="^(?!.*)$";var V0={};$8(V0,{Set:()=>LH,Has:()=>AH,Get:()=>KH,Entries:()=>NH,Delete:()=>OH,Clear:()=>wH});var D9=new Map;function NH(){return new Map(D9)}function wH(){return D9.clear()}function OH($){return D9.delete($)}function AH($){return D9.has($)}function LH($,X){D9.set($,X)}function KH($){return D9.get($)}var j$={};$8(j$,{Set:()=>PH,Has:()=>CH,Get:()=>SH,Entries:()=>jH,Delete:()=>VH,Clear:()=>FH});var N9=new Map;function jH(){return new Map(N9)}function FH(){return N9.clear()}function VH($){return N9.delete($)}function CH($){return N9.has($)}function PH($,X){N9.set($,X)}function SH($){return N9.get($)}function cW($,X){return $.includes(X)}function uW($){return[...new Set($)]}function IH($,X){return $.filter((Z)=>X.includes(Z))}function RH($,X){return $.reduce((Z,Q)=>{return IH(Z,Q)},X)}function lW($){return $.length===1?$[0]:$.length>1?RH($.slice(1),$[0]):[]}function pW($){let X=[];for(let Z of $)X.push(...Z);return X}function W8($){return S({[j]:"Any"},$)}function w9($,X){return S({[j]:"Array",type:"array",items:$},X)}function iW($){return S({[j]:"Argument",index:$})}function O9($,X){return S({[j]:"AsyncIterator",type:"AsyncIterator",items:$},X)}function f0($,X,Z){return S({[j]:"Computed",target:$,parameters:X},Z)}function EH($,X){let{[X]:Z,...Q}=$;return Q}function $$($,X){return X.reduce((Z,Q)=>EH(Z,Q),$)}function X0($){return S({[j]:"Never",not:{}},$)}function w0($){return S({[j]:"MappedResult",properties:$})}function A9($,X,Z){return S({[j]:"Constructor",type:"Constructor",parameters:$,returns:X},Z)}function qZ($,X,Z){return S({[j]:"Function",type:"Function",parameters:$,returns:X},Z)}function VQ($,X){return S({[j]:"Union",anyOf:$},X)}function TH($){return $.some((X)=>e$(X))}function nW($){return $.map((X)=>e$(X)?_H(X):X)}function _H($){return $$($,[K$])}function bH($,X){return TH($)?m$(VQ(nW($),X)):VQ(nW($),X)}function BZ($,X){return $.length===1?S($[0],X):$.length===0?X0(X):bH($,X)}function K0($,X){return $.length===0?X0(X):$.length===1?S($[0],X):VQ($,X)}class d7 extends r{}function xH($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function c7($,X,Z){return $[X]===Z&&$.charCodeAt(X-1)!==92}function bZ($,X){return c7($,X,"(")}function CQ($,X){return c7($,X,")")}function oW($,X){return c7($,X,"|")}function kH($){if(!(bZ($,0)&&CQ($,$.length-1)))return!1;let X=0;for(let Z=0;Z<$.length;Z++){if(bZ($,Z))X+=1;if(CQ($,Z))X-=1;if(X===0&&Z!==$.length-1)return!1}return!0}function gH($){return $.slice(1,$.length-1)}function fH($){let X=0;for(let Z=0;Z<$.length;Z++){if(bZ($,Z))X+=1;if(CQ($,Z))X-=1;if(oW($,Z)&&X===0)return!0}return!1}function vH($){for(let X=0;X<$.length;X++)if(bZ($,X))return!0;return!1}function yH($){let[X,Z]=[0,0],Q=[];for(let J=0;J<$.length;J++){if(bZ($,J))X+=1;if(CQ($,J))X-=1;if(oW($,J)&&X===0){let W=$.slice(Z,J);if(W.length>0)Q.push(L9(W));Z=J+1}}let Y=$.slice(Z);if(Y.length>0)Q.push(L9(Y));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function hH($){function X(Y,J){if(!bZ(Y,J))throw new d7("TemplateLiteralParser: Index must point to open parens");let W=0;for(let z=J;z<Y.length;z++){if(bZ(Y,z))W+=1;if(CQ(Y,z))W-=1;if(W===0)return[J,z]}throw new d7("TemplateLiteralParser: Unclosed group parens in expression")}function Z(Y,J){for(let W=J;W<Y.length;W++)if(bZ(Y,W))return[J,W];return[J,Y.length]}let Q=[];for(let Y=0;Y<$.length;Y++)if(bZ($,Y)){let[J,W]=X($,Y),z=$.slice(J,W+1);Q.push(L9(z)),Y=W}else{let[J,W]=Z($,Y),z=$.slice(J,W);if(z.length>0)Q.push(L9(z));Y=W-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function L9($){return kH($)?L9(gH($)):fH($)?yH($):vH($)?hH($):{type:"const",const:xH($)}}function K9($){return L9($.slice(1,$.length-1))}class rW extends r{}function mH($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function dH($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function cH($){return $.type==="const"&&$.const===".*"}function m8($){return mH($)||cH($)?!1:dH($)?!0:$.type==="and"?$.expr.every((X)=>m8(X)):$.type==="or"?$.expr.every((X)=>m8(X)):$.type==="const"?!0:(()=>{throw new rW("Unknown expression type")})()}function kY($){let X=K9($.pattern);return m8(X)}class sW extends r{}function*tW($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Z of tW($.slice(1)))yield`${X}${Z}`}function*uH($){return yield*tW($.expr.map((X)=>[...PQ(X)]))}function*lH($){for(let X of $.expr)yield*PQ(X)}function*pH($){return yield $.const}function*PQ($){return $.type==="and"?yield*uH($):$.type==="or"?yield*lH($):$.type==="const"?yield*pH($):(()=>{throw new sW("Unknown expression")})()}function j9($){let X=K9($.pattern);return m8(X)?[...PQ(X)]:[]}function B0($,X){return S({[j]:"Literal",const:$,type:typeof $},X)}function gY($){return S({[j]:"Boolean",type:"boolean"},$)}function F9($){return S({[j]:"BigInt",type:"bigint"},$)}function PX($){return S({[j]:"Number",type:"number"},$)}function i$($){return S({[j]:"String",type:"string"},$)}function*iH($){let X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield gY():X==="number"?yield PX():X==="bigint"?yield F9():X==="string"?yield i$():yield(()=>{let Z=X.split("|").map((Q)=>B0(Q.trim()));return Z.length===0?X0():Z.length===1?Z[0]:BZ(Z)})()}function*nH($){if($[1]!=="{"){let X=B0("$"),Z=u7($.slice(1));return yield*[X,...Z]}for(let X=2;X<$.length;X++)if($[X]==="}"){let Z=iH($.slice(2,X)),Q=u7($.slice(X+1));return yield*[...Z,...Q]}yield B0($)}function*u7($){for(let X=0;X<$.length;X++)if($[X]==="$"){let Z=B0($.slice(0,X)),Q=nH($.slice(X));return yield*[Z,...Q]}yield B0($)}function aW($){return[...u7($)]}class eW extends r{}function oH($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $z($,X){return wX($)?$.pattern.slice(1,$.pattern.length-1):D0($)?`(${$.anyOf.map((Z)=>$z(Z,X)).join("|")})`:cX($)?`${X}${xY}`:dX($)?`${X}${xY}`:f8($)?`${X}${xY}`:EZ($)?`${X}${mW}`:DX($)?`${X}${oH($.const.toString())}`:RZ($)?`${X}${hW}`:(()=>{throw new eW(`Unexpected Kind '${$[j]}'`)})()}function l7($){return`^${$.map((X)=>$z(X,"")).join("")}$`}function d8($){let Z=j9($).map((Q)=>B0(Q));return BZ(Z)}function fY($,X){let Z=b0($)?l7(aW($)):l7($);return S({[j]:"TemplateLiteral",type:"string",pattern:Z},X)}function rH($){return j9($).map((Z)=>Z.toString())}function sH($){let X=[];for(let Z of $)X.push(...$X(Z));return X}function tH($){return[$.toString()]}function $X($){return[...new Set(wX($)?rH($):D0($)?sH($.anyOf):DX($)?tH($.const):cX($)?["[number]"]:dX($)?["[number]"]:[])]}function aH($,X,Z){let Q={};for(let Y of Object.getOwnPropertyNames(X))Q[Y]=z8($,$X(X[Y]),Z);return Q}function eH($,X,Z){return aH($,X.properties,Z)}function Xz($,X,Z){let Q=eH($,X,Z);return w0(Q)}function Qz($,X){return $.map((Z)=>Yz(Z,X))}function $U($){return $.filter((X)=>!Z8(X))}function XU($,X){return vY($U(Qz($,X)))}function ZU($){return $.some((X)=>Z8(X))?[]:$}function QU($,X){return BZ(ZU(Qz($,X)))}function YU($,X){return X in $?$[X]:X==="[number]"?BZ($):X0()}function JU($,X){return X==="[number]"?$:X0()}function WU($,X){return X in $?$[X]:X0()}function Yz($,X){return e0($)?XU($.allOf,X):D0($)?QU($.anyOf,X):OX($)?YU($.items??[],X):vX($)?JU($.items,X):H$($)?WU($.properties,X):X0()}function SQ($,X){return X.map((Z)=>Yz($,Z))}function Zz($,X){return BZ(SQ($,X))}function z8($,X,Z){if(W$($)||W$(X)){if(!n0($)||!n0(X))throw new r("Index types using Ref parameters require both Type and Key to be of TSchema");return f0("Index",[$,X])}if(c0(X))return Xz($,X,Z);if(NX(X))return Jz($,X,Z);return S(n0(X)?Zz($,$X(X)):Zz($,X),Z)}function zU($,X,Z){return{[X]:z8($,[X],m0(Z))}}function GU($,X,Z){return X.reduce((Q,Y)=>{return{...Q,...zU($,Y,Z)}},{})}function MU($,X,Z){return GU($,X.keys,Z)}function Jz($,X,Z){let Q=MU($,X,Z);return w0(Q)}function V9($,X){return S({[j]:"Iterator",type:"Iterator",items:$},X)}function qU($){let X=[];for(let Z in $)if(!e$($[Z]))X.push(Z);return X}function BU($,X){let Z=qU($),Q=Z.length>0?{[j]:"Object",type:"object",properties:$,required:Z}:{[j]:"Object",type:"object",properties:$};return S(Q,X)}var j0=BU;function yY($,X){return S({[j]:"Promise",type:"Promise",item:$},X)}function HU($){return S($$($,[fX]))}function UU($){return S({...$,[fX]:"Readonly"})}function DU($,X){return X===!1?HU($):UU($)}function XX($,X){let Z=X??!0;return c0($)?Wz($,Z):DU($,Z)}function NU($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=XX($[Q],X);return Z}function wU($,X){return NU($.properties,X)}function Wz($,X){let Z=wU($,X);return w0(Z)}function SX($,X){return S($.length>0?{[j]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[j]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},X)}function zz($,X){return $ in X?IX($,X[$]):w0(X)}function OU($){return{[$]:B0($)}}function AU($){let X={};for(let Z of $)X[Z]=B0(Z);return X}function LU($,X){return cW(X,$)?OU($):AU(X)}function KU($,X){let Z=LU($,X);return zz($,Z)}function IQ($,X){return X.map((Z)=>IX($,Z))}function jU($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=IX($,X[Q]);return Z}function IX($,X){let Z={...X};return e$(X)?m$(IX($,$$(X,[K$]))):U9(X)?XX(IX($,$$(X,[fX]))):c0(X)?zz($,X.properties):NX(X)?KU($,X.keys):hX(X)?A9(IQ($,X.parameters),IX($,X.returns),Z):mX(X)?qZ(IQ($,X.parameters),IX($,X.returns),Z):g8(X)?O9(IX($,X.items),Z):v8(X)?V9(IX($,X.items),Z):e0(X)?d$(IQ($,X.allOf),Z):D0(X)?K0(IQ($,X.anyOf),Z):OX(X)?SX(IQ($,X.items??[]),Z):H$(X)?j0(jU($,X.properties),Z):vX(X)?w9(IX($,X.items),Z):y8(X)?yY(IX($,X.item),Z):X}function FU($,X){let Z={};for(let Q of $)Z[Q]=IX(Q,X);return Z}function Gz($,X,Z){let Q=n0($)?$X($):$,Y=X({[j]:"MappedKey",keys:Q}),J=FU(Q,Y);return j0(J,Z)}function VU($){return S($$($,[K$]))}function CU($){return S({...$,[K$]:"Optional"})}function PU($,X){return X===!1?VU($):CU($)}function m$($,X){let Z=X??!0;return c0($)?Mz($,Z):PU($,Z)}function SU($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=m$($[Q],X);return Z}function IU($,X){return SU($.properties,X)}function Mz($,X){let Z=IU($,X);return w0(Z)}function RQ($,X={}){let Z=$.every((Y)=>H$(Y)),Q=n0(X.unevaluatedProperties)?{unevaluatedProperties:X.unevaluatedProperties}:{};return S(X.unevaluatedProperties===!1||n0(X.unevaluatedProperties)||Z?{...Q,[j]:"Intersect",type:"object",allOf:$}:{...Q,[j]:"Intersect",allOf:$},X)}function RU($){return $.every((X)=>e$(X))}function EU($){return $$($,[K$])}function qz($){return $.map((X)=>e$(X)?EU(X):X)}function TU($,X){return RU($)?m$(RQ(qz($),X)):RQ(qz($),X)}function vY($,X={}){if($.length===1)return S($[0],X);if($.length===0)return X0(X);if($.some((Z)=>L0(Z)))throw new Error("Cannot intersect transform types");return TU($,X)}function d$($,X){if($.length===1)return S($[0],X);if($.length===0)return X0(X);if($.some((Z)=>L0(Z)))throw new Error("Cannot intersect transform types");return RQ($,X)}function RX(...$){let[X,Z]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof X!=="string")throw new r("Ref: $ref must be a string");return S({[j]:"Ref",$ref:X},Z)}function _U($,X){return f0("Awaited",[f0($,X)])}function bU($){return f0("Awaited",[RX($)])}function xU($){return d$(Bz($))}function kU($){return K0(Bz($))}function gU($){return C9($)}function Bz($){return $.map((X)=>C9(X))}function C9($,X){return S(yX($)?_U($.target,$.parameters):e0($)?xU($.allOf):D0($)?kU($.anyOf):y8($)?gU($.item):W$($)?bU($.$ref):$,X)}function Hz($){let X=[];for(let Z of $)X.push(ZX(Z));return X}function fU($){let X=Hz($);return pW(X)}function vU($){let X=Hz($);return lW(X)}function yU($){return $.map((X,Z)=>Z.toString())}function hU($){return["[number]"]}function mU($){return globalThis.Object.getOwnPropertyNames($)}function dU($){if(!p7)return[];return globalThis.Object.getOwnPropertyNames($).map((Z)=>{return Z[0]==="^"&&Z[Z.length-1]==="$"?Z.slice(1,Z.length-1):Z})}function ZX($){return e0($)?fU($.allOf):D0($)?vU($.anyOf):OX($)?yU($.items??[]):vX($)?hU($.items):H$($)?mU($.properties):h8($)?dU($.patternProperties):[]}var p7=!1;function xZ($){p7=!0;let X=ZX($);return p7=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})$`}function cU($,X){return f0("KeyOf",[f0($,X)])}function uU($){return f0("KeyOf",[RX($)])}function lU($,X){let Z=ZX($),Q=pU(Z),Y=BZ(Q);return S(Y,X)}function pU($){return $.map((X)=>X==="[number]"?PX():B0(X))}function P9($,X){return yX($)?cU($.target,$.parameters):W$($)?uU($.$ref):c0($)?Uz($,X):lU($,X)}function iU($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=P9($[Q],m0(X));return Z}function nU($,X){return iU($.properties,X)}function Uz($,X){let Z=nU($,X);return w0(Z)}function hY($){let X=ZX($),Z=SQ($,X);return X.map((Q,Y)=>[X[Y],Z[Y]])}function oU($){let X=[];for(let Z of $)X.push(...ZX(Z));return uW(X)}function rU($){return $.filter((X)=>!Z8(X))}function sU($,X){let Z=[];for(let Q of $)Z.push(...SQ(Q,[X]));return rU(Z)}function tU($,X){let Z={};for(let Q of X)Z[Q]=vY(sU($,Q));return Z}function Dz($,X){let Z=oU($),Q=tU($,Z);return j0(Q,X)}function mY($){return S({[j]:"Date",type:"Date"},$)}function dY($){return S({[j]:"Null",type:"null"},$)}function cY($){return S({[j]:"Symbol",type:"symbol"},$)}function uY($){return S({[j]:"Undefined",type:"undefined"},$)}function lY($){return S({[j]:"Uint8Array",type:"Uint8Array"},$)}function uX($){return S({[j]:"Unknown"},$)}function aU($){return $.map((X)=>i7(X,!1))}function eU($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=XX(i7($[Z],!1));return X}function pY($,X){return X===!0?$:XX($)}function i7($,X){return E7($)?pY(W8(),X):_7($)?pY(W8(),X):q$($)?XX(SX(aU($))):PZ($)?lY():k8($)?mY():C0($)?pY(j0(eU($)),X):T7($)?pY(qZ([],uX()),X):B$($)?uY():b7($)?dY():x7($)?cY():wQ($)?F9():HX($)?B0($):CZ($)?B0($):b0($)?B0($):j0({})}function Nz($,X){return S(i7($,!0),X)}function wz($,X){return hX($)?SX($.parameters,X):X0(X)}function Oz($,X){if(B$($))throw new Error("Enum undefined or empty");let Z=globalThis.Object.getOwnPropertyNames($).filter((J)=>isNaN(J)).map((J)=>$[J]),Y=[...new Set(Z)].map((J)=>B0(J));return K0(Y,{...X,[CX]:"Enum"})}class Fz extends r{}var I;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(I||(I={}));function EX($){return $===I.False?$:I.True}function S9($){throw new Fz($)}function w$($){return K.IsNever($)||K.IsIntersect($)||K.IsUnion($)||K.IsUnknown($)||K.IsAny($)}function O$($,X){return K.IsNever(X)?Pz($,X):K.IsIntersect(X)?iY($,X):K.IsUnion(X)?t7($,X):K.IsUnknown(X)?Ez($,X):K.IsAny(X)?s7($,X):S9("StructuralRight")}function s7($,X){return I.True}function $D($,X){return K.IsIntersect(X)?iY($,X):K.IsUnion(X)&&X.anyOf.some((Z)=>K.IsAny(Z)||K.IsUnknown(Z))?I.True:K.IsUnion(X)?I.Union:K.IsUnknown(X)?I.True:K.IsAny(X)?I.True:I.Union}function XD($,X){return K.IsUnknown($)?I.False:K.IsAny($)?I.Union:K.IsNever($)?I.True:I.False}function ZD($,X){return K.IsObject(X)&&nY(X)?I.True:w$(X)?O$($,X):!K.IsArray(X)?I.False:EX(S0($.items,X.items))}function QD($,X){return w$(X)?O$($,X):!K.IsAsyncIterator(X)?I.False:EX(S0($.items,X.items))}function YD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsBigInt(X)?I.True:I.False}function Vz($,X){return K.IsLiteralBoolean($)?I.True:K.IsBoolean($)?I.True:I.False}function JD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsBoolean(X)?I.True:I.False}function WD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):!K.IsConstructor(X)?I.False:$.parameters.length>X.parameters.length?I.False:!$.parameters.every((Z,Q)=>EX(S0(X.parameters[Q],Z))===I.True)?I.False:EX(S0($.returns,X.returns))}function zD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsDate(X)?I.True:I.False}function GD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):!K.IsFunction(X)?I.False:$.parameters.length>X.parameters.length?I.False:!$.parameters.every((Z,Q)=>EX(S0(X.parameters[Q],Z))===I.True)?I.False:EX(S0($.returns,X.returns))}function Cz($,X){return K.IsLiteral($)&&h$.IsNumber($.const)?I.True:K.IsNumber($)||K.IsInteger($)?I.True:I.False}function MD($,X){return K.IsInteger(X)||K.IsNumber(X)?I.True:w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):I.False}function iY($,X){return X.allOf.every((Z)=>S0($,Z)===I.True)?I.True:I.False}function qD($,X){return $.allOf.some((Z)=>S0(Z,X)===I.True)?I.True:I.False}function BD($,X){return w$(X)?O$($,X):!K.IsIterator(X)?I.False:EX(S0($.items,X.items))}function HD($,X){return K.IsLiteral(X)&&X.const===$.const?I.True:w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsString(X)?Rz($,X):K.IsNumber(X)?Sz($,X):K.IsInteger(X)?Cz($,X):K.IsBoolean(X)?Vz($,X):I.False}function Pz($,X){return I.False}function UD($,X){return I.True}function Az($){let[X,Z]=[$,0];while(!0){if(!K.IsNot(X))break;X=X.not,Z+=1}return Z%2===0?X:uX()}function DD($,X){return K.IsNot($)?S0(Az($),X):K.IsNot(X)?S0($,Az(X)):S9("Invalid fallthrough for Not")}function ND($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsNull(X)?I.True:I.False}function Sz($,X){return K.IsLiteralNumber($)?I.True:K.IsNumber($)||K.IsInteger($)?I.True:I.False}function wD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsInteger(X)||K.IsNumber(X)?I.True:I.False}function QX($,X){return Object.getOwnPropertyNames($.properties).length===X}function Lz($){return nY($)}function Kz($){return QX($,0)||QX($,1)&&"description"in $.properties&&K.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(K.IsString($.properties.description.anyOf[0])&&K.IsUndefined($.properties.description.anyOf[1])||K.IsString($.properties.description.anyOf[1])&&K.IsUndefined($.properties.description.anyOf[0]))}function n7($){return QX($,0)}function jz($){return QX($,0)}function OD($){return QX($,0)}function AD($){return QX($,0)}function LD($){return nY($)}function KD($){let X=PX();return QX($,0)||QX($,1)&&"length"in $.properties&&EX(S0($.properties.length,X))===I.True}function jD($){return QX($,0)}function nY($){let X=PX();return QX($,0)||QX($,1)&&"length"in $.properties&&EX(S0($.properties.length,X))===I.True}function FD($){let X=qZ([W8()],W8());return QX($,0)||QX($,1)&&"then"in $.properties&&EX(S0($.properties.then,X))===I.True}function Iz($,X){return S0($,X)===I.False?I.False:K.IsOptional($)&&!K.IsOptional(X)?I.False:I.True}function c$($,X){return K.IsUnknown($)?I.False:K.IsAny($)?I.Union:K.IsNever($)||K.IsLiteralString($)&&Lz(X)||K.IsLiteralNumber($)&&n7(X)||K.IsLiteralBoolean($)&&jz(X)||K.IsSymbol($)&&Kz(X)||K.IsBigInt($)&&OD(X)||K.IsString($)&&Lz(X)||K.IsSymbol($)&&Kz(X)||K.IsNumber($)&&n7(X)||K.IsInteger($)&&n7(X)||K.IsBoolean($)&&jz(X)||K.IsUint8Array($)&&LD(X)||K.IsDate($)&&AD(X)||K.IsConstructor($)&&jD(X)||K.IsFunction($)&&KD(X)?I.True:K.IsRecord($)&&K.IsString(o7($))?(()=>{return X[CX]==="Record"?I.True:I.False})():K.IsRecord($)&&K.IsNumber(o7($))?(()=>{return QX(X,0)?I.True:I.False})():I.False}function VD($,X){return w$(X)?O$($,X):K.IsRecord(X)?TX($,X):!K.IsObject(X)?I.False:(()=>{for(let Z of Object.getOwnPropertyNames(X.properties)){if(!(Z in $.properties)&&!K.IsOptional(X.properties[Z]))return I.False;if(K.IsOptional(X.properties[Z]))return I.True;if(Iz($.properties[Z],X.properties[Z])===I.False)return I.False}return I.True})()}function CD($,X){return w$(X)?O$($,X):K.IsObject(X)&&FD(X)?I.True:!K.IsPromise(X)?I.False:EX(S0($.item,X.item))}function o7($){return Y8 in $.patternProperties?PX():(J8 in $.patternProperties)?i$():S9("Unknown record key pattern")}function r7($){return Y8 in $.patternProperties?$.patternProperties[Y8]:(J8 in $.patternProperties)?$.patternProperties[J8]:S9("Unable to get record value schema")}function TX($,X){let[Z,Q]=[o7(X),r7(X)];return K.IsLiteralString($)&&K.IsNumber(Z)&&EX(S0($,Q))===I.True?I.True:K.IsUint8Array($)&&K.IsNumber(Z)?S0($,Q):K.IsString($)&&K.IsNumber(Z)?S0($,Q):K.IsArray($)&&K.IsNumber(Z)?S0($,Q):K.IsObject($)?(()=>{for(let Y of Object.getOwnPropertyNames($.properties))if(Iz(Q,$.properties[Y])===I.False)return I.False;return I.True})():I.False}function PD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):!K.IsRecord(X)?I.False:S0(r7($),r7(X))}function SD($,X){let Z=K.IsRegExp($)?i$():$,Q=K.IsRegExp(X)?i$():X;return S0(Z,Q)}function Rz($,X){return K.IsLiteral($)&&h$.IsString($.const)?I.True:K.IsString($)?I.True:I.False}function ID($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsString(X)?I.True:I.False}function RD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsSymbol(X)?I.True:I.False}function ED($,X){return K.IsTemplateLiteral($)?S0(d8($),X):K.IsTemplateLiteral(X)?S0($,d8(X)):S9("Invalid fallthrough for TemplateLiteral")}function TD($,X){return K.IsArray(X)&&$.items!==void 0&&$.items.every((Z)=>S0(Z,X.items)===I.True)}function _D($,X){return K.IsNever($)?I.True:K.IsUnknown($)?I.False:K.IsAny($)?I.Union:I.False}function bD($,X){return w$(X)?O$($,X):K.IsObject(X)&&nY(X)?I.True:K.IsArray(X)&&TD($,X)?I.True:!K.IsTuple(X)?I.False:h$.IsUndefined($.items)&&!h$.IsUndefined(X.items)||!h$.IsUndefined($.items)&&h$.IsUndefined(X.items)?I.False:h$.IsUndefined($.items)&&!h$.IsUndefined(X.items)?I.True:$.items.every((Z,Q)=>S0(Z,X.items[Q])===I.True)?I.True:I.False}function xD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsUint8Array(X)?I.True:I.False}function kD($,X){return w$(X)?O$($,X):K.IsObject(X)?c$($,X):K.IsRecord(X)?TX($,X):K.IsVoid(X)?vD($,X):K.IsUndefined(X)?I.True:I.False}function t7($,X){return X.anyOf.some((Z)=>S0($,Z)===I.True)?I.True:I.False}function gD($,X){return $.anyOf.every((Z)=>S0(Z,X)===I.True)?I.True:I.False}function Ez($,X){return I.True}function fD($,X){return K.IsNever(X)?Pz($,X):K.IsIntersect(X)?iY($,X):K.IsUnion(X)?t7($,X):K.IsAny(X)?s7($,X):K.IsString(X)?Rz($,X):K.IsNumber(X)?Sz($,X):K.IsInteger(X)?Cz($,X):K.IsBoolean(X)?Vz($,X):K.IsArray(X)?XD($,X):K.IsTuple(X)?_D($,X):K.IsObject(X)?c$($,X):K.IsUnknown(X)?I.True:I.False}function vD($,X){return K.IsUndefined($)?I.True:K.IsUndefined($)?I.True:I.False}function yD($,X){return K.IsIntersect(X)?iY($,X):K.IsUnion(X)?t7($,X):K.IsUnknown(X)?Ez($,X):K.IsAny(X)?s7($,X):K.IsObject(X)?c$($,X):K.IsVoid(X)?I.True:I.False}function S0($,X){return K.IsTemplateLiteral($)||K.IsTemplateLiteral(X)?ED($,X):K.IsRegExp($)||K.IsRegExp(X)?SD($,X):K.IsNot($)||K.IsNot(X)?DD($,X):K.IsAny($)?$D($,X):K.IsArray($)?ZD($,X):K.IsBigInt($)?YD($,X):K.IsBoolean($)?JD($,X):K.IsAsyncIterator($)?QD($,X):K.IsConstructor($)?WD($,X):K.IsDate($)?zD($,X):K.IsFunction($)?GD($,X):K.IsInteger($)?MD($,X):K.IsIntersect($)?qD($,X):K.IsIterator($)?BD($,X):K.IsLiteral($)?HD($,X):K.IsNever($)?UD($,X):K.IsNull($)?ND($,X):K.IsNumber($)?wD($,X):K.IsObject($)?VD($,X):K.IsRecord($)?PD($,X):K.IsString($)?ID($,X):K.IsSymbol($)?RD($,X):K.IsTuple($)?bD($,X):K.IsPromise($)?CD($,X):K.IsUint8Array($)?xD($,X):K.IsUndefined($)?kD($,X):K.IsUnion($)?gD($,X):K.IsUnknown($)?fD($,X):K.IsVoid($)?yD($,X):S9(`Unknown left type operand '${$[j]}'`)}function G8($,X){return S0($,X)}function hD($,X,Z,Q,Y){let J={};for(let W of globalThis.Object.getOwnPropertyNames($))J[W]=I9($[W],X,Z,Q,m0(Y));return J}function mD($,X,Z,Q,Y){return hD($.properties,X,Z,Q,Y)}function Tz($,X,Z,Q,Y){let J=mD($,X,Z,Q,Y);return w0(J)}function dD($,X,Z,Q){let Y=G8($,X);return Y===I.Union?K0([Z,Q]):Y===I.True?Z:Q}function I9($,X,Z,Q,Y){return c0($)?Tz($,X,Z,Q,Y):NX($)?S(_z($,X,Z,Q,Y)):S(dD($,X,Z,Q),Y)}function cD($,X,Z,Q,Y){return{[$]:I9(B0($),X,Z,Q,m0(Y))}}function uD($,X,Z,Q,Y){return $.reduce((J,W)=>{return{...J,...cD(W,X,Z,Q,Y)}},{})}function lD($,X,Z,Q,Y){return uD($.keys,X,Z,Q,Y)}function _z($,X,Z,Q,Y){let J=lD($,X,Z,Q,Y);return w0(J)}function pD($){return $.allOf.every((X)=>kZ(X))}function iD($){return $.anyOf.some((X)=>kZ(X))}function nD($){return!kZ($.not)}function kZ($){return $[j]==="Intersect"?pD($):$[j]==="Union"?iD($):$[j]==="Not"?nD($):$[j]==="Undefined"?!0:!1}function bz($,X){return R9(d8($),X)}function oD($,X){let Z=$.filter((Q)=>G8(Q,X)===I.False);return Z.length===1?Z[0]:K0(Z)}function R9($,X,Z={}){if(wX($))return S(bz($,X),Z);if(c0($))return S(xz($,X),Z);return S(D0($)?oD($.anyOf,X):G8($,X)!==I.False?X0():$,Z)}function rD($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=R9($[Q],X);return Z}function sD($,X){return rD($.properties,X)}function xz($,X){let Z=sD($,X);return w0(Z)}function kz($,X){return E9(d8($),X)}function tD($,X){let Z=$.filter((Q)=>G8(Q,X)!==I.False);return Z.length===1?Z[0]:K0(Z)}function E9($,X,Z){if(wX($))return S(kz($,X),Z);if(c0($))return S(gz($,X),Z);return S(D0($)?tD($.anyOf,X):G8($,X)!==I.False?$:X0(),Z)}function aD($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=E9($[Q],X);return Z}function eD($,X){return aD($.properties,X)}function gz($,X){let Z=eD($,X);return w0(Z)}function fz($,X){return hX($)?S($.returns,X):X0(X)}function oY($){return XX(m$($))}function c8($,X,Z){return S({[j]:"Record",type:"object",patternProperties:{[$]:X}},Z)}function a7($,X,Z){let Q={};for(let Y of $)Q[Y]=X;return j0(Q,{...Z,[CX]:"Record"})}function $N($,X,Z){return kY($)?a7($X($),X,Z):c8($.pattern,X,Z)}function XN($,X,Z){return a7($X(K0($)),X,Z)}function ZN($,X,Z){return a7([$.toString()],X,Z)}function QN($,X,Z){return c8($.source,X,Z)}function YN($,X,Z){let Q=B$($.pattern)?J8:$.pattern;return c8(Q,X,Z)}function JN($,X,Z){return c8(J8,X,Z)}function WN($,X,Z){return c8(dW,X,Z)}function zN($,X,Z){return j0({true:X,false:X},Z)}function GN($,X,Z){return c8(Y8,X,Z)}function MN($,X,Z){return c8(Y8,X,Z)}function rY($,X,Z={}){return D0($)?XN($.anyOf,X,Z):wX($)?$N($,X,Z):DX($)?ZN($.const,X,Z):RZ($)?zN($,X,Z):dX($)?GN($,X,Z):cX($)?MN($,X,Z):v7($)?QN($,X,Z):EZ($)?YN($,X,Z):g7($)?JN($,X,Z):Z8($)?WN($,X,Z):X0(Z)}function sY($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function vz($){let X=sY($);return X===J8?i$():X===Y8?PX():i$({pattern:X})}function tY($){return $.patternProperties[sY($)]}function qN($,X){return X.parameters=EQ($,X.parameters),X.returns=lX($,X.returns),X}function BN($,X){return X.parameters=EQ($,X.parameters),X.returns=lX($,X.returns),X}function HN($,X){return X.allOf=EQ($,X.allOf),X}function UN($,X){return X.anyOf=EQ($,X.anyOf),X}function DN($,X){if(B$(X.items))return X;return X.items=EQ($,X.items),X}function NN($,X){return X.items=lX($,X.items),X}function wN($,X){return X.items=lX($,X.items),X}function ON($,X){return X.items=lX($,X.items),X}function AN($,X){return X.item=lX($,X.item),X}function LN($,X){let Z=VN($,X.properties);return{...X,...j0(Z)}}function KN($,X){let Z=lX($,vz(X)),Q=lX($,tY(X)),Y=rY(Z,Q);return{...X,...Y}}function jN($,X){return X.index in $?$[X.index]:uX()}function FN($,X){let Z=U9(X),Q=e$(X),Y=lX($,X);return Z&&Q?oY(Y):Z&&!Q?XX(Y):!Z&&Q?m$(Y):Y}function VN($,X){return globalThis.Object.getOwnPropertyNames(X).reduce((Z,Q)=>{return{...Z,[Q]:FN($,X[Q])}},{})}function EQ($,X){return X.map((Z)=>lX($,Z))}function lX($,X){return hX(X)?qN($,X):mX(X)?BN($,X):e0(X)?HN($,X):D0(X)?UN($,X):OX(X)?DN($,X):vX(X)?NN($,X):g8(X)?wN($,X):v8(X)?ON($,X):y8(X)?AN($,X):H$(X)?LN($,X):h8(X)?KN($,X):f7(X)?jN($,X):X}function yz($,X){return lX(X,B9($))}function hz($){return S({[j]:"Integer",type:"integer"},$)}function CN($,X,Z){return{[$]:pX(B0($),X,m0(Z))}}function PN($,X,Z){return $.reduce((Y,J)=>{return{...Y,...CN(J,X,Z)}},{})}function SN($,X,Z){return PN($.keys,X,Z)}function mz($,X,Z){let Q=SN($,X,Z);return w0(Q)}function IN($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Z].join("")}function RN($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Z].join("")}function EN($){return $.toUpperCase()}function TN($){return $.toLowerCase()}function _N($,X,Z){let Q=K9($.pattern);if(!m8(Q))return{...$,pattern:dz($.pattern,X)};let W=[...PQ(Q)].map((M)=>B0(M)),z=cz(W,X),G=K0(z);return fY([G],Z)}function dz($,X){return typeof $==="string"?X==="Uncapitalize"?IN($):X==="Capitalize"?RN($):X==="Uppercase"?EN($):X==="Lowercase"?TN($):$:$.toString()}function cz($,X){return $.map((Z)=>pX(Z,X))}function pX($,X,Z={}){return NX($)?mz($,X,Z):wX($)?_N($,X,Z):D0($)?K0(cz($.anyOf,X),Z):DX($)?B0(dz($.const,X),Z):S($,Z)}function uz($,X={}){return pX($,"Capitalize",X)}function lz($,X={}){return pX($,"Lowercase",X)}function pz($,X={}){return pX($,"Uncapitalize",X)}function iz($,X={}){return pX($,"Uppercase",X)}function bN($,X,Z){let Q={};for(let Y of globalThis.Object.getOwnPropertyNames($))Q[Y]=M8($[Y],X,m0(Z));return Q}function xN($,X,Z){return bN($.properties,X,Z)}function nz($,X,Z){let Q=xN($,X,Z);return w0(Q)}function kN($,X){return $.map((Z)=>e7(Z,X))}function gN($,X){return $.map((Z)=>e7(Z,X))}function fN($,X){let{[X]:Z,...Q}=$;return Q}function vN($,X){return X.reduce((Z,Q)=>fN(Z,Q),$)}function yN($,X){let Z=$$($,[T0,"$id","required","properties"]),Q=vN($.properties,X);return j0(Q,Z)}function hN($){let X=$.reduce((Z,Q)=>_Y(Q)?[...Z,B0(Q)]:Z,[]);return K0(X)}function e7($,X){return e0($)?d$(kN($.allOf,X)):D0($)?K0(gN($.anyOf,X)):H$($)?yN($,X):j0({})}function M8($,X,Z){let Q=q$(X)?hN(X):X,Y=n0(X)?$X(X):X,J=W$($),W=W$(X);return c0($)?nz($,Y,Z):NX(X)?oz($,X,Z):J&&W?f0("Omit",[$,Q],Z):!J&&W?f0("Omit",[$,Q],Z):J&&!W?f0("Omit",[$,Q],Z):S({...e7($,Y),...Z})}function mN($,X,Z){return{[X]:M8($,[X],m0(Z))}}function dN($,X,Z){return X.reduce((Q,Y)=>{return{...Q,...mN($,Y,Z)}},{})}function cN($,X,Z){return dN($,X.keys,Z)}function oz($,X,Z){let Q=cN($,X,Z);return w0(Q)}function uN($,X,Z){let Q={};for(let Y of globalThis.Object.getOwnPropertyNames($))Q[Y]=q8($[Y],X,m0(Z));return Q}function lN($,X,Z){return uN($.properties,X,Z)}function rz($,X,Z){let Q=lN($,X,Z);return w0(Q)}function pN($,X){return $.map((Z)=>$J(Z,X))}function iN($,X){return $.map((Z)=>$J(Z,X))}function nN($,X){let Z={};for(let Q of X)if(Q in $)Z[Q]=$[Q];return Z}function oN($,X){let Z=$$($,[T0,"$id","required","properties"]),Q=nN($.properties,X);return j0(Q,Z)}function rN($){let X=$.reduce((Z,Q)=>_Y(Q)?[...Z,B0(Q)]:Z,[]);return K0(X)}function $J($,X){return e0($)?d$(pN($.allOf,X)):D0($)?K0(iN($.anyOf,X)):H$($)?oN($,X):j0({})}function q8($,X,Z){let Q=q$(X)?rN(X):X,Y=n0(X)?$X(X):X,J=W$($),W=W$(X);return c0($)?rz($,Y,Z):NX(X)?sz($,X,Z):J&&W?f0("Pick",[$,Q],Z):!J&&W?f0("Pick",[$,Q],Z):J&&!W?f0("Pick",[$,Q],Z):S({...$J($,Y),...Z})}function sN($,X,Z){return{[X]:q8($,[X],m0(Z))}}function tN($,X,Z){return X.reduce((Q,Y)=>{return{...Q,...sN($,Y,Z)}},{})}function aN($,X,Z){return tN($,X.keys,Z)}function sz($,X,Z){let Q=aN($,X,Z);return w0(Q)}function eN($,X){return f0("Partial",[f0($,X)])}function $w($){return f0("Partial",[RX($)])}function Xw($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=m$($[Z]);return X}function Zw($){let X=$$($,[T0,"$id","required","properties"]),Z=Xw($.properties);return j0(Z,X)}function tz($){return $.map((X)=>az(X))}function az($){return yX($)?eN($.target,$.parameters):W$($)?$w($.$ref):e0($)?d$(tz($.allOf)):D0($)?K0(tz($.anyOf)):H$($)?Zw($):f8($)?$:RZ($)?$:dX($)?$:DX($)?$:LQ($)?$:cX($)?$:EZ($)?$:KQ($)?$:TZ($)?$:j0({})}function T9($,X){if(c0($))return ez($,X);else return S({...az($),...X})}function Qw($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=T9($[Q],m0(X));return Z}function Yw($,X){return Qw($.properties,X)}function ez($,X){let Z=Yw($,X);return w0(Z)}function Jw($,X){return f0("Required",[f0($,X)])}function Ww($){return f0("Required",[RX($)])}function zw($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=$$($[Z],[K$]);return X}function Gw($){let X=$$($,[T0,"$id","required","properties"]),Z=zw($.properties);return j0(Z,X)}function $5($){return $.map((X)=>X5(X))}function X5($){return yX($)?Jw($.target,$.parameters):W$($)?Ww($.$ref):e0($)?d$($5($.allOf)):D0($)?K0($5($.anyOf)):H$($)?Gw($):f8($)?$:RZ($)?$:dX($)?$:DX($)?$:LQ($)?$:cX($)?$:EZ($)?$:KQ($)?$:TZ($)?$:j0({})}function _9($,X){if(c0($))return Z5($,X);else return S({...X5($),...X})}function Mw($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=_9($[Q],X);return Z}function qw($,X){return Mw($.properties,X)}function Z5($,X){let Z=qw($,X);return w0(Z)}function Bw($,X){return X.map((Z)=>{return W$(Z)?XJ($,Z.$ref):AX($,Z)})}function XJ($,X){return X in $?W$($[X])?XJ($,$[X].$ref):AX($,$[X]):X0()}function Hw($){return C9($[0])}function Uw($){return z8($[0],$[1])}function Dw($){return P9($[0])}function Nw($){return T9($[0])}function ww($){return M8($[0],$[1])}function Ow($){return q8($[0],$[1])}function Aw($){return _9($[0])}function Lw($,X,Z){let Q=Bw($,Z);return X==="Awaited"?Hw(Q):X==="Index"?Uw(Q):X==="KeyOf"?Dw(Q):X==="Partial"?Nw(Q):X==="Omit"?ww(Q):X==="Pick"?Ow(Q):X==="Required"?Aw(Q):X0()}function Kw($,X){return w9(AX($,X))}function jw($,X){return O9(AX($,X))}function Fw($,X,Z){return A9(TQ($,X),AX($,Z))}function Vw($,X,Z){return qZ(TQ($,X),AX($,Z))}function Cw($,X){return d$(TQ($,X))}function Pw($,X){return V9(AX($,X))}function Sw($,X){return j0(globalThis.Object.keys(X).reduce((Z,Q)=>{return{...Z,[Q]:AX($,X[Q])}},{}))}function Iw($,X){let[Z,Q]=[AX($,tY(X)),sY(X)],Y=B9(X);return Y.patternProperties[Q]=Z,Y}function Rw($,X){return W$(X)?{...XJ($,X.$ref),[T0]:X[T0]}:X}function Ew($,X){return SX(TQ($,X))}function Tw($,X){return K0(TQ($,X))}function TQ($,X){return X.map((Z)=>AX($,Z))}function AX($,X){return e$(X)?S(AX($,$$(X,[K$])),X):U9(X)?S(AX($,$$(X,[fX])),X):L0(X)?S(Rw($,X),X):vX(X)?S(Kw($,X.items),X):g8(X)?S(jw($,X.items),X):yX(X)?S(Lw($,X.target,X.parameters)):hX(X)?S(Fw($,X.parameters,X.returns),X):mX(X)?S(Vw($,X.parameters,X.returns),X):e0(X)?S(Cw($,X.allOf),X):v8(X)?S(Pw($,X.items),X):H$(X)?S(Sw($,X.properties),X):h8(X)?S(Iw($,X)):OX(X)?S(Ew($,X.items||[]),X):D0(X)?S(Tw($,X.anyOf),X):X}function _w($,X){return X in $?AX($,$[X]):X0()}function Q5($){return globalThis.Object.getOwnPropertyNames($).reduce((X,Z)=>{return{...X,[Z]:_w($,Z)}},{})}class Y5{constructor($){let X=Q5($),Z=this.WithIdentifiers(X);this.$defs=Z}Import($,X){let Z={...this.$defs,[$]:S(this.$defs[$],X)};return S({[j]:"Import",$defs:Z,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((X,Z)=>{return{...X,[Z]:{...$[Z],$id:Z}}},{})}}function J5($){return new Y5($)}function W5($,X){return S({[j]:"Not",not:$},X)}function z5($,X){return mX($)?SX($.parameters,X):X0()}var bw=0;function G5($,X={}){if(B$(X.$id))X.$id=`T${bw++}`;let Z=B9($({[j]:"This",$ref:`${X.$id}`}));return Z.$id=X.$id,S({[CX]:"Recursive",...Z},X)}function M5($,X){let Z=b0($)?new globalThis.RegExp($):$;return S({[j]:"RegExp",type:"RegExp",source:Z.source,flags:Z.flags},X)}function xw($){return e0($)?$.allOf:D0($)?$.anyOf:OX($)?$.items??[]:[]}function q5($){return xw($)}function B5($,X){return mX($)?S($.returns,X):X0(X)}class H5{constructor($){this.schema=$}Decode($){return new U5(this.schema,$)}}class U5{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){let Y={Encode:(J)=>X[T0].Encode($(J)),Decode:(J)=>this.decode(X[T0].Decode(J))};return{...X,[T0]:Y}}EncodeSchema($,X){let Z={Decode:this.decode,Encode:$};return{...X,[T0]:Z}}Encode($){return L0(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function D5($){return new H5($)}function aY($={}){return S({[j]:$[j]??"Unsafe"},$)}function N5($){return S({[j]:"Void",type:"void"},$)}var ZJ={};$8(ZJ,{Void:()=>N5,Uppercase:()=>iz,Unsafe:()=>aY,Unknown:()=>uX,Union:()=>K0,Undefined:()=>uY,Uncapitalize:()=>pz,Uint8Array:()=>lY,Tuple:()=>SX,Transform:()=>D5,TemplateLiteral:()=>fY,Symbol:()=>cY,String:()=>i$,ReturnType:()=>B5,Rest:()=>q5,Required:()=>_9,RegExp:()=>M5,Ref:()=>RX,Recursive:()=>G5,Record:()=>rY,ReadonlyOptional:()=>oY,Readonly:()=>XX,Promise:()=>yY,Pick:()=>q8,Partial:()=>T9,Parameters:()=>z5,Optional:()=>m$,Omit:()=>M8,Object:()=>j0,Number:()=>PX,Null:()=>dY,Not:()=>W5,Never:()=>X0,Module:()=>J5,Mapped:()=>Gz,Lowercase:()=>lz,Literal:()=>B0,KeyOf:()=>P9,Iterator:()=>V9,Intersect:()=>d$,Integer:()=>hz,Instantiate:()=>yz,InstanceType:()=>fz,Index:()=>z8,Function:()=>qZ,Extract:()=>E9,Extends:()=>I9,Exclude:()=>R9,Enum:()=>Oz,Date:()=>mY,ConstructorParameters:()=>wz,Constructor:()=>A9,Const:()=>Nz,Composite:()=>Dz,Capitalize:()=>uz,Boolean:()=>gY,BigInt:()=>F9,Awaited:()=>C9,AsyncIterator:()=>O9,Array:()=>w9,Argument:()=>iW,Any:()=>W8});var iX=ZJ;var TJ=x8(_Q(),1);function vw($){switch($.errorType){case P.ArrayContains:return"Expected array to contain at least one matching value";case P.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case P.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case P.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case P.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case P.ArrayUniqueItems:return"Expected array elements to be unique";case P.Array:return"Expected array";case P.AsyncIterator:return"Expected AsyncIterator";case P.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case P.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case P.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case P.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case P.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case P.BigInt:return"Expected bigint";case P.Boolean:return"Expected boolean";case P.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case P.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case P.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case P.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case P.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case P.Date:return"Expected Date";case P.Function:return"Expected function";case P.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case P.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case P.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case P.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case P.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case P.Integer:return"Expected integer";case P.IntersectUnevaluatedProperties:return"Unexpected property";case P.Intersect:return"Expected all values to match";case P.Iterator:return"Expected Iterator";case P.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case P.Never:return"Never";case P.Not:return"Value should not match";case P.Null:return"Expected null";case P.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case P.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case P.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case P.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case P.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case P.Number:return"Expected number";case P.Object:return"Expected object";case P.ObjectAdditionalProperties:return"Unexpected property";case P.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case P.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case P.ObjectRequiredProperty:return"Expected required property";case P.Promise:return"Expected Promise";case P.RegExp:return"Expected string to match regular expression";case P.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case P.StringFormat:return`Expected string to match '${$.schema.format}' format`;case P.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case P.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case P.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case P.String:return"Expected string";case P.Symbol:return"Expected symbol";case P.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case P.Tuple:return"Expected tuple";case P.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case P.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case P.Uint8Array:return"Expected Uint8Array";case P.Undefined:return"Expected undefined";case P.Union:return"Expected union value";case P.Void:return"Expected void";case P.Kind:return`Expected kind '${$.schema[j]}'`;default:return"Unknown error type"}}var yw=vw;function L5(){return yw}class K5 extends r{constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function hw($,X){let Z=X.find((Q)=>Q.$id===$.$ref);if(Z===void 0)throw new K5($);return N0(Z,X)}function I$($,X){if(!U0($.$id)||X.some((Z)=>Z.$id===$.$id))return X;return X.push($),X}function N0($,X){return $[j]==="This"||$[j]==="Ref"?hw($,X):$}class j5 extends r{constructor($){super("Unable to hash value");this.value=$}}var LX;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(LX||(LX={}));var b9=BigInt("14695981039346656037"),[mw,dw]=[BigInt("1099511628211"),BigInt("18446744073709551616")],cw=Array.from({length:256}).map(($,X)=>BigInt(X)),F5=new Float64Array(1),V5=new DataView(F5.buffer),C5=new Uint8Array(F5.buffer);function*uw($){let X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Z=0;Z<X;Z++)yield $>>8*(X-1-Z)&255}function lw($){u$(LX.Array);for(let X of $)x9(X)}function pw($){u$(LX.Boolean),u$($?1:0)}function iw($){u$(LX.BigInt),V5.setBigInt64(0,$);for(let X of C5)u$(X)}function nw($){u$(LX.Date),x9($.getTime())}function ow($){u$(LX.Null)}function rw($){u$(LX.Number),V5.setFloat64(0,$);for(let X of C5)u$(X)}function sw($){u$(LX.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())x9(X),x9($[X])}function tw($){u$(LX.String);for(let X=0;X<$.length;X++)for(let Z of uw($.charCodeAt(X)))u$(Z)}function aw($){u$(LX.Symbol),x9($.description)}function ew($){u$(LX.Uint8Array);for(let X=0;X<$.length;X++)u$($[X])}function $O($){return u$(LX.Undefined)}function x9($){if(o($))return lw($);if(MZ($))return pw($);if(x$($))return iw($);if(p$($))return nw($);if(SZ($))return ow($);if(p($))return rw($);if(e($))return sw($);if(U0($))return tw($);if(IZ($))return aw($);if(H9($))return ew($);if(d0($))return $O($);throw new j5($)}function u$($){b9=b9^cw[$],b9=b9*mw%dw}function B8($){return b9=BigInt("14695981039346656037"),x9($),b9}class P5 extends r{constructor($){super("Unknown type");this.schema=$}}function XO($){return $[j]==="Any"||$[j]==="Unknown"}function G0($){return $!==void 0}function ZO($,X,Z){return!0}function QO($,X,Z){return!0}function YO($,X,Z){if(!o(Z))return!1;if(G0($.minItems)&&!(Z.length>=$.minItems))return!1;if(G0($.maxItems)&&!(Z.length<=$.maxItems))return!1;if(!Z.every((J)=>R$($.items,X,J)))return!1;if($.uniqueItems===!0&&!function(){let J=new Set;for(let W of Z){let z=B8(W);if(J.has(z))return!1;else J.add(z)}return!0}())return!1;if(!(G0($.contains)||p($.minContains)||p($.maxContains)))return!0;let Q=G0($.contains)?$.contains:X0(),Y=Z.reduce((J,W)=>R$(Q,X,W)?J+1:J,0);if(Y===0)return!1;if(p($.minContains)&&Y<$.minContains)return!1;if(p($.maxContains)&&Y>$.maxContains)return!1;return!0}function JO($,X,Z){return IY(Z)}function WO($,X,Z){if(!x$(Z))return!1;if(G0($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(G0($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(G0($.maximum)&&!(Z<=$.maximum))return!1;if(G0($.minimum)&&!(Z>=$.minimum))return!1;if(G0($.multipleOf)&&Z%$.multipleOf!==BigInt(0))return!1;return!0}function zO($,X,Z){return MZ(Z)}function GO($,X,Z){return R$($.returns,X,Z.prototype)}function MO($,X,Z){if(!p$(Z))return!1;if(G0($.exclusiveMaximumTimestamp)&&!(Z.getTime()<$.exclusiveMaximumTimestamp))return!1;if(G0($.exclusiveMinimumTimestamp)&&!(Z.getTime()>$.exclusiveMinimumTimestamp))return!1;if(G0($.maximumTimestamp)&&!(Z.getTime()<=$.maximumTimestamp))return!1;if(G0($.minimumTimestamp)&&!(Z.getTime()>=$.minimumTimestamp))return!1;if(G0($.multipleOfTimestamp)&&Z.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function qO($,X,Z){return X8(Z)}function BO($,X,Z){let Q=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];return R$(Y,[...X,...Q],Z)}function HO($,X,Z){if(!TY(Z))return!1;if(G0($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(G0($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(G0($.maximum)&&!(Z<=$.maximum))return!1;if(G0($.minimum)&&!(Z>=$.minimum))return!1;if(G0($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function UO($,X,Z){let Q=$.allOf.every((Y)=>R$(Y,X,Z));if($.unevaluatedProperties===!1){let Y=new RegExp(xZ($)),J=Object.getOwnPropertyNames(Z).every((W)=>Y.test(W));return Q&&J}else if(n0($.unevaluatedProperties)){let Y=new RegExp(xZ($)),J=Object.getOwnPropertyNames(Z).every((W)=>Y.test(W)||R$($.unevaluatedProperties,X,Z[W]));return Q&&J}else return Q}function DO($,X,Z){return RY(Z)}function NO($,X,Z){return Z===$.const}function wO($,X,Z){return!1}function OO($,X,Z){return!R$($.not,X,Z)}function AO($,X,Z){return SZ(Z)}function LO($,X,Z){if(!g0.IsNumberLike(Z))return!1;if(G0($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(G0($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(G0($.minimum)&&!(Z>=$.minimum))return!1;if(G0($.maximum)&&!(Z<=$.maximum))return!1;if(G0($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function KO($,X,Z){if(!g0.IsObjectLike(Z))return!1;if(G0($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(G0($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let Y of Q){let J=$.properties[Y];if($.required&&$.required.includes(Y)){if(!R$(J,X,Z[Y]))return!1;if((kZ(J)||XO(J))&&!(Y in Z))return!1}else if(g0.IsExactOptionalProperty(Z,Y)&&!R$(J,X,Z[Y]))return!1}if($.additionalProperties===!1){let Y=Object.getOwnPropertyNames(Z);if($.required&&$.required.length===Q.length&&Y.length===Q.length)return!0;else return Y.every((J)=>Q.includes(J))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Z).every((J)=>Q.includes(J)||R$($.additionalProperties,X,Z[J]));else return!0}function jO($,X,Z){return EY(Z)}function FO($,X,Z){if(!g0.IsRecordLike(Z))return!1;if(G0($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(G0($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let[Q,Y]=Object.entries($.patternProperties)[0],J=new RegExp(Q),W=Object.entries(Z).every(([M,q])=>{return J.test(M)?R$(Y,X,q):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Z).every(([M,q])=>{return!J.test(M)?R$($.additionalProperties,X,q):!0}):!0,G=$.additionalProperties===!1?Object.getOwnPropertyNames(Z).every((M)=>{return J.test(M)}):!0;return W&&z&&G}function VO($,X,Z){return R$(N0($,X),X,Z)}function CO($,X,Z){let Q=new RegExp($.source,$.flags);if(G0($.minLength)){if(!(Z.length>=$.minLength))return!1}if(G0($.maxLength)){if(!(Z.length<=$.maxLength))return!1}return Q.test(Z)}function PO($,X,Z){if(!U0(Z))return!1;if(G0($.minLength)){if(!(Z.length>=$.minLength))return!1}if(G0($.maxLength)){if(!(Z.length<=$.maxLength))return!1}if(G0($.pattern)){if(!new RegExp($.pattern).test(Z))return!1}if(G0($.format)){if(!V0.Has($.format))return!1;return V0.Get($.format)(Z)}return!0}function SO($,X,Z){return IZ(Z)}function IO($,X,Z){return U0(Z)&&new RegExp($.pattern).test(Z)}function RO($,X,Z){return R$(N0($,X),X,Z)}function EO($,X,Z){if(!o(Z))return!1;if($.items===void 0&&Z.length!==0)return!1;if(Z.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!R$($.items[Q],X,Z[Q]))return!1;return!0}function TO($,X,Z){return d0(Z)}function _O($,X,Z){return $.anyOf.some((Q)=>R$(Q,X,Z))}function bO($,X,Z){if(!H9(Z))return!1;if(G0($.maxByteLength)&&!(Z.length<=$.maxByteLength))return!1;if(G0($.minByteLength)&&!(Z.length>=$.minByteLength))return!1;return!0}function xO($,X,Z){return!0}function kO($,X,Z){return g0.IsVoidLike(Z)}function gO($,X,Z){if(!j$.Has($[j]))return!1;return j$.Get($[j])($,Z)}function R$($,X,Z){let Q=G0($.$id)?I$($,X):X,Y=$;switch(Y[j]){case"Any":return ZO(Y,Q,Z);case"Argument":return QO(Y,Q,Z);case"Array":return YO(Y,Q,Z);case"AsyncIterator":return JO(Y,Q,Z);case"BigInt":return WO(Y,Q,Z);case"Boolean":return zO(Y,Q,Z);case"Constructor":return GO(Y,Q,Z);case"Date":return MO(Y,Q,Z);case"Function":return qO(Y,Q,Z);case"Import":return BO(Y,Q,Z);case"Integer":return HO(Y,Q,Z);case"Intersect":return UO(Y,Q,Z);case"Iterator":return DO(Y,Q,Z);case"Literal":return NO(Y,Q,Z);case"Never":return wO(Y,Q,Z);case"Not":return OO(Y,Q,Z);case"Null":return AO(Y,Q,Z);case"Number":return LO(Y,Q,Z);case"Object":return KO(Y,Q,Z);case"Promise":return jO(Y,Q,Z);case"Record":return FO(Y,Q,Z);case"Ref":return VO(Y,Q,Z);case"RegExp":return CO(Y,Q,Z);case"String":return PO(Y,Q,Z);case"Symbol":return SO(Y,Q,Z);case"TemplateLiteral":return IO(Y,Q,Z);case"This":return RO(Y,Q,Z);case"Tuple":return EO(Y,Q,Z);case"Undefined":return TO(Y,Q,Z);case"Union":return _O(Y,Q,Z);case"Uint8Array":return bO(Y,Q,Z);case"Unknown":return xO(Y,Q,Z);case"Void":return kO(Y,Q,Z);default:if(!j$.Has(Y[j]))throw new P5(Y);return gO(Y,Q,Z)}}function Z0(...$){return $.length===3?R$($[0],$[1],$[2]):R$($[0],[],$[1])}var P;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(P||(P={}));class S5 extends r{constructor($){super("Unknown type");this.schema=$}}function gZ($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function M0($){return $!==void 0}class u8{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function c($,X,Z,Q,Y=[]){return{type:$,schema:X,path:Z,value:Q,message:L5()({errorType:$,path:Z,schema:X,value:Q,errors:Y}),errors:Y}}function*fO($,X,Z,Q){}function*vO($,X,Z,Q){}function*yO($,X,Z,Q){if(!o(Q))return yield c(P.Array,$,Z,Q);if(M0($.minItems)&&!(Q.length>=$.minItems))yield c(P.ArrayMinItems,$,Z,Q);if(M0($.maxItems)&&!(Q.length<=$.maxItems))yield c(P.ArrayMaxItems,$,Z,Q);for(let W=0;W<Q.length;W++)yield*E$($.items,X,`${Z}/${W}`,Q[W]);if($.uniqueItems===!0&&!function(){let W=new Set;for(let z of Q){let G=B8(z);if(W.has(G))return!1;else W.add(G)}return!0}())yield c(P.ArrayUniqueItems,$,Z,Q);if(!(M0($.contains)||M0($.minContains)||M0($.maxContains)))return;let Y=M0($.contains)?$.contains:X0(),J=Q.reduce((W,z,G)=>E$(Y,X,`${Z}${G}`,z).next().done===!0?W+1:W,0);if(J===0)yield c(P.ArrayContains,$,Z,Q);if(p($.minContains)&&J<$.minContains)yield c(P.ArrayMinContains,$,Z,Q);if(p($.maxContains)&&J>$.maxContains)yield c(P.ArrayMaxContains,$,Z,Q)}function*hO($,X,Z,Q){if(!IY(Q))yield c(P.AsyncIterator,$,Z,Q)}function*mO($,X,Z,Q){if(!x$(Q))return yield c(P.BigInt,$,Z,Q);if(M0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield c(P.BigIntExclusiveMaximum,$,Z,Q);if(M0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield c(P.BigIntExclusiveMinimum,$,Z,Q);if(M0($.maximum)&&!(Q<=$.maximum))yield c(P.BigIntMaximum,$,Z,Q);if(M0($.minimum)&&!(Q>=$.minimum))yield c(P.BigIntMinimum,$,Z,Q);if(M0($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield c(P.BigIntMultipleOf,$,Z,Q)}function*dO($,X,Z,Q){if(!MZ(Q))yield c(P.Boolean,$,Z,Q)}function*cO($,X,Z,Q){yield*E$($.returns,X,Z,Q.prototype)}function*uO($,X,Z,Q){if(!p$(Q))return yield c(P.Date,$,Z,Q);if(M0($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield c(P.DateExclusiveMaximumTimestamp,$,Z,Q);if(M0($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield c(P.DateExclusiveMinimumTimestamp,$,Z,Q);if(M0($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield c(P.DateMaximumTimestamp,$,Z,Q);if(M0($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield c(P.DateMinimumTimestamp,$,Z,Q);if(M0($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield c(P.DateMultipleOfTimestamp,$,Z,Q)}function*lO($,X,Z,Q){if(!X8(Q))yield c(P.Function,$,Z,Q)}function*pO($,X,Z,Q){let Y=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];yield*E$(J,[...X,...Y],Z,Q)}function*iO($,X,Z,Q){if(!TY(Q))return yield c(P.Integer,$,Z,Q);if(M0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield c(P.IntegerExclusiveMaximum,$,Z,Q);if(M0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield c(P.IntegerExclusiveMinimum,$,Z,Q);if(M0($.maximum)&&!(Q<=$.maximum))yield c(P.IntegerMaximum,$,Z,Q);if(M0($.minimum)&&!(Q>=$.minimum))yield c(P.IntegerMinimum,$,Z,Q);if(M0($.multipleOf)&&Q%$.multipleOf!==0)yield c(P.IntegerMultipleOf,$,Z,Q)}function*nO($,X,Z,Q){let Y=!1;for(let J of $.allOf)for(let W of E$(J,X,Z,Q))Y=!0,yield W;if(Y)return yield c(P.Intersect,$,Z,Q);if($.unevaluatedProperties===!1){let J=new RegExp(xZ($));for(let W of Object.getOwnPropertyNames(Q))if(!J.test(W))yield c(P.IntersectUnevaluatedProperties,$,`${Z}/${W}`,Q)}if(typeof $.unevaluatedProperties==="object"){let J=new RegExp(xZ($));for(let W of Object.getOwnPropertyNames(Q))if(!J.test(W)){let z=E$($.unevaluatedProperties,X,`${Z}/${W}`,Q[W]).next();if(!z.done)yield z.value}}}function*oO($,X,Z,Q){if(!RY(Q))yield c(P.Iterator,$,Z,Q)}function*rO($,X,Z,Q){if(Q!==$.const)yield c(P.Literal,$,Z,Q)}function*sO($,X,Z,Q){yield c(P.Never,$,Z,Q)}function*tO($,X,Z,Q){if(E$($.not,X,Z,Q).next().done===!0)yield c(P.Not,$,Z,Q)}function*aO($,X,Z,Q){if(!SZ(Q))yield c(P.Null,$,Z,Q)}function*eO($,X,Z,Q){if(!g0.IsNumberLike(Q))return yield c(P.Number,$,Z,Q);if(M0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield c(P.NumberExclusiveMaximum,$,Z,Q);if(M0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield c(P.NumberExclusiveMinimum,$,Z,Q);if(M0($.maximum)&&!(Q<=$.maximum))yield c(P.NumberMaximum,$,Z,Q);if(M0($.minimum)&&!(Q>=$.minimum))yield c(P.NumberMinimum,$,Z,Q);if(M0($.multipleOf)&&Q%$.multipleOf!==0)yield c(P.NumberMultipleOf,$,Z,Q)}function*$A($,X,Z,Q){if(!g0.IsObjectLike(Q))return yield c(P.Object,$,Z,Q);if(M0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield c(P.ObjectMinProperties,$,Z,Q);if(M0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield c(P.ObjectMaxProperties,$,Z,Q);let Y=Array.isArray($.required)?$.required:[],J=Object.getOwnPropertyNames($.properties),W=Object.getOwnPropertyNames(Q);for(let z of Y){if(W.includes(z))continue;yield c(P.ObjectRequiredProperty,$.properties[z],`${Z}/${gZ(z)}`,void 0)}if($.additionalProperties===!1){for(let z of W)if(!J.includes(z))yield c(P.ObjectAdditionalProperties,$,`${Z}/${gZ(z)}`,Q[z])}if(typeof $.additionalProperties==="object")for(let z of W){if(J.includes(z))continue;yield*E$($.additionalProperties,X,`${Z}/${gZ(z)}`,Q[z])}for(let z of J){let G=$.properties[z];if($.required&&$.required.includes(z)){if(yield*E$(G,X,`${Z}/${gZ(z)}`,Q[z]),kZ($)&&!(z in Q))yield c(P.ObjectRequiredProperty,G,`${Z}/${gZ(z)}`,void 0)}else if(g0.IsExactOptionalProperty(Q,z))yield*E$(G,X,`${Z}/${gZ(z)}`,Q[z])}}function*XA($,X,Z,Q){if(!EY(Q))yield c(P.Promise,$,Z,Q)}function*ZA($,X,Z,Q){if(!g0.IsRecordLike(Q))return yield c(P.Object,$,Z,Q);if(M0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield c(P.ObjectMinProperties,$,Z,Q);if(M0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield c(P.ObjectMaxProperties,$,Z,Q);let[Y,J]=Object.entries($.patternProperties)[0],W=new RegExp(Y);for(let[z,G]of Object.entries(Q))if(W.test(z))yield*E$(J,X,`${Z}/${gZ(z)}`,G);if(typeof $.additionalProperties==="object"){for(let[z,G]of Object.entries(Q))if(!W.test(z))yield*E$($.additionalProperties,X,`${Z}/${gZ(z)}`,G)}if($.additionalProperties===!1)for(let[z,G]of Object.entries(Q)){if(W.test(z))continue;return yield c(P.ObjectAdditionalProperties,$,`${Z}/${gZ(z)}`,G)}}function*QA($,X,Z,Q){yield*E$(N0($,X),X,Z,Q)}function*YA($,X,Z,Q){if(!U0(Q))return yield c(P.String,$,Z,Q);if(M0($.minLength)&&!(Q.length>=$.minLength))yield c(P.StringMinLength,$,Z,Q);if(M0($.maxLength)&&!(Q.length<=$.maxLength))yield c(P.StringMaxLength,$,Z,Q);if(!new RegExp($.source,$.flags).test(Q))return yield c(P.RegExp,$,Z,Q)}function*JA($,X,Z,Q){if(!U0(Q))return yield c(P.String,$,Z,Q);if(M0($.minLength)&&!(Q.length>=$.minLength))yield c(P.StringMinLength,$,Z,Q);if(M0($.maxLength)&&!(Q.length<=$.maxLength))yield c(P.StringMaxLength,$,Z,Q);if(U0($.pattern)){if(!new RegExp($.pattern).test(Q))yield c(P.StringPattern,$,Z,Q)}if(U0($.format)){if(!V0.Has($.format))yield c(P.StringFormatUnknown,$,Z,Q);else if(!V0.Get($.format)(Q))yield c(P.StringFormat,$,Z,Q)}}function*WA($,X,Z,Q){if(!IZ(Q))yield c(P.Symbol,$,Z,Q)}function*zA($,X,Z,Q){if(!U0(Q))return yield c(P.String,$,Z,Q);if(!new RegExp($.pattern).test(Q))yield c(P.StringPattern,$,Z,Q)}function*GA($,X,Z,Q){yield*E$(N0($,X),X,Z,Q)}function*MA($,X,Z,Q){if(!o(Q))return yield c(P.Tuple,$,Z,Q);if($.items===void 0&&Q.length!==0)return yield c(P.TupleLength,$,Z,Q);if(Q.length!==$.maxItems)return yield c(P.TupleLength,$,Z,Q);if(!$.items)return;for(let Y=0;Y<$.items.length;Y++)yield*E$($.items[Y],X,`${Z}/${Y}`,Q[Y])}function*qA($,X,Z,Q){if(!d0(Q))yield c(P.Undefined,$,Z,Q)}function*BA($,X,Z,Q){if(Z0($,X,Q))return;let Y=$.anyOf.map((J)=>new u8(E$(J,X,Z,Q)));yield c(P.Union,$,Z,Q,Y)}function*HA($,X,Z,Q){if(!H9(Q))return yield c(P.Uint8Array,$,Z,Q);if(M0($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield c(P.Uint8ArrayMaxByteLength,$,Z,Q);if(M0($.minByteLength)&&!(Q.length>=$.minByteLength))yield c(P.Uint8ArrayMinByteLength,$,Z,Q)}function*UA($,X,Z,Q){}function*DA($,X,Z,Q){if(!g0.IsVoidLike(Q))yield c(P.Void,$,Z,Q)}function*NA($,X,Z,Q){if(!j$.Get($[j])($,Q))yield c(P.Kind,$,Z,Q)}function*E$($,X,Z,Q){let Y=M0($.$id)?[...X,$]:X,J=$;switch(J[j]){case"Any":return yield*fO(J,Y,Z,Q);case"Argument":return yield*vO(J,Y,Z,Q);case"Array":return yield*yO(J,Y,Z,Q);case"AsyncIterator":return yield*hO(J,Y,Z,Q);case"BigInt":return yield*mO(J,Y,Z,Q);case"Boolean":return yield*dO(J,Y,Z,Q);case"Constructor":return yield*cO(J,Y,Z,Q);case"Date":return yield*uO(J,Y,Z,Q);case"Function":return yield*lO(J,Y,Z,Q);case"Import":return yield*pO(J,Y,Z,Q);case"Integer":return yield*iO(J,Y,Z,Q);case"Intersect":return yield*nO(J,Y,Z,Q);case"Iterator":return yield*oO(J,Y,Z,Q);case"Literal":return yield*rO(J,Y,Z,Q);case"Never":return yield*sO(J,Y,Z,Q);case"Not":return yield*tO(J,Y,Z,Q);case"Null":return yield*aO(J,Y,Z,Q);case"Number":return yield*eO(J,Y,Z,Q);case"Object":return yield*$A(J,Y,Z,Q);case"Promise":return yield*XA(J,Y,Z,Q);case"Record":return yield*ZA(J,Y,Z,Q);case"Ref":return yield*QA(J,Y,Z,Q);case"RegExp":return yield*YA(J,Y,Z,Q);case"String":return yield*JA(J,Y,Z,Q);case"Symbol":return yield*WA(J,Y,Z,Q);case"TemplateLiteral":return yield*zA(J,Y,Z,Q);case"This":return yield*GA(J,Y,Z,Q);case"Tuple":return yield*MA(J,Y,Z,Q);case"Undefined":return yield*qA(J,Y,Z,Q);case"Union":return yield*BA(J,Y,Z,Q);case"Uint8Array":return yield*HA(J,Y,Z,Q);case"Unknown":return yield*UA(J,Y,Z,Q);case"Void":return yield*DA(J,Y,Z,Q);default:if(!j$.Has(J[j]))throw new S5($);return yield*NA(J,Y,Z,Q)}}function HZ(...$){let X=$.length===3?E$($[0],$[1],"",$[2]):E$($[0],[],"",$[1]);return new u8(X)}var wA=function($,X,Z,Q,Y){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!Y)throw new TypeError("Private accessor was defined without a setter");if(typeof X==="function"?$!==X||!Y:!X.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?Y.call($,Z):Y?Y.value=Z:X.set($,Z),Z},R5=function($,X,Z,Q){if(Z==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof X==="function"?$!==X||!Q:!X.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?Q:Z==="a"?Q.call($):Q?Q.value:X.get($)},YJ,eY,E5;class T5 extends r{constructor($){let X=$.First();super(X===void 0?"Invalid Value":X.message);YJ.add(this),eY.set(this,void 0),wA(this,eY,$,"f"),this.error=X}Errors(){return new u8(R5(this,YJ,"m",E5).call(this))}}eY=new WeakMap,YJ=new WeakSet,E5=function*$(){if(this.error)yield this.error;yield*R5(this,eY,"f")};function I5($,X,Z){if(Z0($,X,Z))return;throw new T5(HZ($,X,Z))}function $6(...$){return $.length===3?I5($[0],$[1],$[2]):I5($[0],[],$[1])}function OA($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=O0($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=O0($[Z]);return X}function AA($){return $.map((X)=>O0(X))}function LA($){return $.slice()}function KA($){return new Map(O0([...$.entries()]))}function jA($){return new Set(O0([...$.entries()]))}function FA($){return new Date($.toISOString())}function VA($){return $}function O0($){if(o($))return AA($);if(p$($))return FA($);if(VX($))return LA($);if(o2($))return KA($);if(r2($))return jA($);if(e($))return OA($);if(UX($))return VA($);throw new Error("ValueClone: Unable to clone value")}class _X extends r{constructor($,X){super(X);this.schema=$}}function A0($){return X8($)?$():O0($)}function CA($,X){if(s($,"default"))return A0($.default);else return{}}function PA($,X){return{}}function SA($,X){if($.uniqueItems===!0&&!s($,"default"))throw new _X($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!s($,"default"))throw new _X($,"Array with the contains constraint requires a default value");else if("default"in $)return A0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Z)=>{return KX($.items,X)});else return[]}function IA($,X){if(s($,"default"))return A0($.default);else return async function*(){}()}function RA($,X){if(s($,"default"))return A0($.default);else return BigInt(0)}function EA($,X){if(s($,"default"))return A0($.default);else return!1}function TA($,X){if(s($,"default"))return A0($.default);else{let Z=KX($.returns,X);if(typeof Z==="object"&&!Array.isArray(Z))return class{constructor(){for(let[Q,Y]of Object.entries(Z)){let J=this;J[Q]=Y}}};else return class{}}}function _A($,X){if(s($,"default"))return A0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function bA($,X){if(s($,"default"))return A0($.default);else return()=>KX($.returns,X)}function xA($,X){let Z=globalThis.Object.values($.$defs),Q=$.$defs[$.$ref];return KX(Q,[...X,...Z])}function kA($,X){if(s($,"default"))return A0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function gA($,X){if(s($,"default"))return A0($.default);else{let Z=$.allOf.reduce((Q,Y)=>{let J=KX(Y,X);return typeof J==="object"?{...Q,...J}:J},{});if(!Z0($,X,Z))throw new _X($,"Intersect produced invalid value. Consider using a default value.");return Z}}function fA($,X){if(s($,"default"))return A0($.default);else return function*(){}()}function vA($,X){if(s($,"default"))return A0($.default);else return $.const}function yA($,X){if(s($,"default"))return A0($.default);else throw new _X($,"Never types cannot be created. Consider using a default value.")}function hA($,X){if(s($,"default"))return A0($.default);else throw new _X($,"Not types must have a default value")}function mA($,X){if(s($,"default"))return A0($.default);else return null}function dA($,X){if(s($,"default"))return A0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function cA($,X){if(s($,"default"))return A0($.default);else{let Z=new Set($.required),Q={};for(let[Y,J]of Object.entries($.properties)){if(!Z.has(Y))continue;Q[Y]=KX(J,X)}return Q}}function uA($,X){if(s($,"default"))return A0($.default);else return Promise.resolve(KX($.item,X))}function lA($,X){if(s($,"default"))return A0($.default);else return{}}function pA($,X){if(s($,"default"))return A0($.default);else return KX(N0($,X),X)}function iA($,X){if(s($,"default"))return A0($.default);else throw new _X($,"RegExp types cannot be created. Consider using a default value.")}function nA($,X){if($.pattern!==void 0)if(!s($,"default"))throw new _X($,"String types with patterns must specify a default value");else return A0($.default);else if($.format!==void 0)if(!s($,"default"))throw new _X($,"String types with formats must specify a default value");else return A0($.default);else if(s($,"default"))return A0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function oA($,X){if(s($,"default"))return A0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function rA($,X){if(s($,"default"))return A0($.default);if(!kY($))throw new _X($,"Can only create template literals that produce a finite variants. Consider using a default value.");return j9($)[0]}function sA($,X){if(_5++>YL)throw new _X($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(s($,"default"))return A0($.default);else return KX(N0($,X),X)}function tA($,X){if(s($,"default"))return A0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Z,Q)=>KX($.items[Q],X))}function aA($,X){if(s($,"default"))return A0($.default);else return}function eA($,X){if(s($,"default"))return A0($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return KX($.anyOf[0],X)}function $L($,X){if(s($,"default"))return A0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function XL($,X){if(s($,"default"))return A0($.default);else return{}}function ZL($,X){if(s($,"default"))return A0($.default);else return}function QL($,X){if(s($,"default"))return A0($.default);else throw new Error("User defined types must specify a default value")}function KX($,X){let Z=I$($,X),Q=$;switch(Q[j]){case"Any":return CA(Q,Z);case"Argument":return PA(Q,Z);case"Array":return SA(Q,Z);case"AsyncIterator":return IA(Q,Z);case"BigInt":return RA(Q,Z);case"Boolean":return EA(Q,Z);case"Constructor":return TA(Q,Z);case"Date":return _A(Q,Z);case"Function":return bA(Q,Z);case"Import":return xA(Q,Z);case"Integer":return kA(Q,Z);case"Intersect":return gA(Q,Z);case"Iterator":return fA(Q,Z);case"Literal":return vA(Q,Z);case"Never":return yA(Q,Z);case"Not":return hA(Q,Z);case"Null":return mA(Q,Z);case"Number":return dA(Q,Z);case"Object":return cA(Q,Z);case"Promise":return uA(Q,Z);case"Record":return lA(Q,Z);case"Ref":return pA(Q,Z);case"RegExp":return iA(Q,Z);case"String":return nA(Q,Z);case"Symbol":return oA(Q,Z);case"TemplateLiteral":return rA(Q,Z);case"This":return sA(Q,Z);case"Tuple":return tA(Q,Z);case"Undefined":return aA(Q,Z);case"Union":return eA(Q,Z);case"Uint8Array":return $L(Q,Z);case"Unknown":return XL(Q,Z);case"Void":return ZL(Q,Z);default:if(!j$.Has(Q[j]))throw new _X(Q,"Unknown type");return QL(Q,Z)}}var YL=512,_5=0;function nX(...$){return _5=0,$.length===2?KX($[0],$[1]):KX($[0],[])}class JJ extends r{constructor($,X){super(X);this.schema=$}}function b5($,X,Z){if($[j]==="Object"&&typeof Z==="object"&&!SZ(Z)){let Q=$,Y=Object.getOwnPropertyNames(Z);return Object.entries(Q.properties).reduce((W,[z,G])=>{let M=G[j]==="Literal"&&G.const===Z[z]?100:0,q=Z0(G,X,Z[z])?10:0,B=Y.includes(z)?1:0;return W+(M+q+B)},0)}else if($[j]==="Union"){let Y=$.anyOf.map((J)=>N0(J,X)).map((J)=>b5(J,X,Z));return Math.max(...Y)}else return Z0($,X,Z)?1:0}function JL($,X,Z){let Q=$.anyOf.map((W)=>N0(W,X)),[Y,J]=[Q[0],0];for(let W of Q){let z=b5(W,X,Z);if(z>J)Y=W,J=z}return Y}function WL($,X,Z){if("default"in $)return typeof Z==="function"?$.default:O0($.default);else{let Q=JL($,X,Z);return bQ(Q,X,Z)}}function zL($,X,Z){return Z0($,X,Z)?O0(Z):nX($,X)}function GL($,X,Z){return Z0($,X,Z)?Z:nX($,X)}function ML($,X,Z){if(Z0($,X,Z))return O0(Z);let Q=o(Z)?O0(Z):nX($,X),Y=p($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,W=(p($.maxItems)&&Y.length>$.maxItems?Y.slice(0,$.maxItems):Y).map((G)=>oX($.items,X,G));if($.uniqueItems!==!0)return W;let z=[...new Set(W)];if(!Z0($,X,z))throw new JJ($,"Array cast produced invalid data due to uniqueItems constraint");return z}function qL($,X,Z){if(Z0($,X,Z))return nX($,X);let Q=new Set($.returns.required||[]),Y=function(){};for(let[J,W]of Object.entries($.returns.properties)){if(!Q.has(J)&&Z.prototype[J]===void 0)continue;Y.prototype[J]=oX(W,X,Z.prototype[J])}return Y}function BL($,X,Z){let Q=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];return oX(Y,[...X,...Q],Z)}function x5($,X){if(e($)&&!e(X)||!e($)&&e(X))return $;if(!e($)||!e(X))return X;return globalThis.Object.getOwnPropertyNames($).reduce((Z,Q)=>{let Y=Q in X?x5($[Q],X[Q]):$[Q];return{...Z,[Q]:Y}},{})}function HL($,X,Z){if(Z0($,X,Z))return Z;let Q=nX($,X),Y=x5(Q,Z);return Z0($,X,Y)?Y:Q}function UL($,X,Z){throw new JJ($,"Never types cannot be cast")}function DL($,X,Z){if(Z0($,X,Z))return Z;if(Z===null||typeof Z!=="object")return nX($,X);let Q=new Set($.required||[]),Y={};for(let[J,W]of Object.entries($.properties)){if(!Q.has(J)&&Z[J]===void 0)continue;Y[J]=oX(W,X,Z[J])}if(typeof $.additionalProperties==="object"){let J=Object.getOwnPropertyNames($.properties);for(let W of Object.getOwnPropertyNames(Z)){if(J.includes(W))continue;Y[W]=oX($.additionalProperties,X,Z[W])}}return Y}function NL($,X,Z){if(Z0($,X,Z))return O0(Z);if(Z===null||typeof Z!=="object"||Array.isArray(Z)||Z instanceof Date)return nX($,X);let Q=Object.getOwnPropertyNames($.patternProperties)[0],Y=$.patternProperties[Q],J={};for(let[W,z]of Object.entries(Z))J[W]=oX(Y,X,z);return J}function wL($,X,Z){return oX(N0($,X),X,Z)}function OL($,X,Z){return oX(N0($,X),X,Z)}function AL($,X,Z){if(Z0($,X,Z))return O0(Z);if(!o(Z))return nX($,X);if($.items===void 0)return[];return $.items.map((Q,Y)=>oX(Q,X,Z[Y]))}function LL($,X,Z){return Z0($,X,Z)?O0(Z):WL($,X,Z)}function oX($,X,Z){let Q=U0($.$id)?I$($,X):X,Y=$;switch($[j]){case"Array":return ML(Y,Q,Z);case"Constructor":return qL(Y,Q,Z);case"Import":return BL(Y,Q,Z);case"Intersect":return HL(Y,Q,Z);case"Never":return UL(Y,Q,Z);case"Object":return DL(Y,Q,Z);case"Record":return NL(Y,Q,Z);case"Ref":return wL(Y,Q,Z);case"This":return OL(Y,Q,Z);case"Tuple":return AL(Y,Q,Z);case"Union":return LL(Y,Q,Z);case"Date":case"Symbol":case"Uint8Array":return zL($,X,Z);default:return GL(Y,Q,Z)}}function bQ(...$){return $.length===3?oX($[0],$[1],$[2]):oX($[0],[],$[1])}function KL($){return Q8($)&&$[j]!=="Unsafe"}function jL($,X,Z){if(!o(Z))return Z;return Z.map((Q)=>YX($.items,X,Q))}function FL($,X,Z){let Q=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];return YX(Y,[...X,...Q],Z)}function VL($,X,Z){let Q=$.unevaluatedProperties,J=$.allOf.map((z)=>YX(z,X,O0(Z))).reduce((z,G)=>e(G)?{...z,...G}:G,{});if(!e(Z)||!e(J)||!Q8(Q))return J;let W=ZX($);for(let z of Object.getOwnPropertyNames(Z)){if(W.includes(z))continue;if(Z0(Q,X,Z[z]))J[z]=YX(Q,X,Z[z])}return J}function CL($,X,Z){if(!e(Z)||o(Z))return Z;let Q=$.additionalProperties;for(let Y of Object.getOwnPropertyNames(Z)){if(s($.properties,Y)){Z[Y]=YX($.properties[Y],X,Z[Y]);continue}if(Q8(Q)&&Z0(Q,X,Z[Y])){Z[Y]=YX(Q,X,Z[Y]);continue}delete Z[Y]}return Z}function PL($,X,Z){if(!e(Z))return Z;let Q=$.additionalProperties,Y=Object.getOwnPropertyNames(Z),[J,W]=Object.entries($.patternProperties)[0],z=new RegExp(J);for(let G of Y){if(z.test(G)){Z[G]=YX(W,X,Z[G]);continue}if(Q8(Q)&&Z0(Q,X,Z[G])){Z[G]=YX(Q,X,Z[G]);continue}delete Z[G]}return Z}function SL($,X,Z){return YX(N0($,X),X,Z)}function IL($,X,Z){return YX(N0($,X),X,Z)}function RL($,X,Z){if(!o(Z))return Z;if(d0($.items))return[];let Q=Math.min(Z.length,$.items.length);for(let Y=0;Y<Q;Y++)Z[Y]=YX($.items[Y],X,Z[Y]);return Z.length>Q?Z.slice(0,Q):Z}function EL($,X,Z){for(let Q of $.anyOf)if(KL(Q)&&Z0(Q,X,Z))return YX(Q,X,Z);return Z}function YX($,X,Z){let Q=U0($.$id)?I$($,X):X,Y=$;switch(Y[j]){case"Array":return jL(Y,Q,Z);case"Import":return FL(Y,Q,Z);case"Intersect":return VL(Y,Q,Z);case"Object":return CL(Y,Q,Z);case"Record":return PL(Y,Q,Z);case"Ref":return SL(Y,Q,Z);case"This":return IL(Y,Q,Z);case"Tuple":return RL(Y,Q,Z);case"Union":return EL(Y,Q,Z);default:return Z}}function X6(...$){return $.length===3?YX($[0],$[1],$[2]):YX($[0],[],$[1])}function Z6($){return U0($)&&!isNaN($)&&!isNaN(parseFloat($))}function TL($){return x$($)||MZ($)||p($)}function xQ($){return $===!0||p($)&&$===1||x$($)&&$===BigInt("1")||U0($)&&($.toLowerCase()==="true"||$==="1")}function kQ($){return $===!1||p($)&&($===0||Object.is($,-0))||x$($)&&$===BigInt("0")||U0($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function _L($){return U0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function bL($){return U0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function xL($){return U0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function kL($){return U0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function gL($){return U0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function fL($,X){let Z=g5($);return Z===X?Z:$}function vL($,X){let Z=f5($);return Z===X?Z:$}function yL($,X){let Z=k5($);return Z===X?Z:$}function hL($,X){return U0($.const)?fL(X,$.const):p($.const)?vL(X,$.const):MZ($.const)?yL(X,$.const):X}function k5($){return xQ($)?!0:kQ($)?!1:$}function mL($){let X=(Z)=>Z.split(".")[0];return Z6($)?BigInt(X($)):p($)?BigInt(Math.trunc($)):kQ($)?BigInt(0):xQ($)?BigInt(1):$}function g5($){return IZ($)&&$.description!==void 0?$.description.toString():TL($)?$.toString():$}function f5($){return Z6($)?parseFloat($):xQ($)?1:kQ($)?0:$}function dL($){return Z6($)?parseInt($):p($)?Math.trunc($):xQ($)?1:kQ($)?0:$}function cL($){return U0($)&&$.toLowerCase()==="null"?null:$}function uL($){return U0($)&&$==="undefined"?void 0:$}function lL($){return p$($)?$:p($)?new Date($):xQ($)?new Date(1):kQ($)?new Date(0):Z6($)?new Date(parseInt($)):bL($)?new Date(`1970-01-01T${$}.000Z`):_L($)?new Date(`1970-01-01T${$}`):kL($)?new Date(`${$}.000Z`):xL($)?new Date($):gL($)?new Date(`${$}T00:00:00.000Z`):$}function pL($){return $}function iL($,X,Z){return(o(Z)?Z:[Z]).map((Y)=>rX($.items,X,Y))}function nL($,X,Z){return mL(Z)}function oL($,X,Z){return k5(Z)}function rL($,X,Z){return lL(Z)}function sL($,X,Z){let Q=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];return rX(Y,[...X,...Q],Z)}function tL($,X,Z){return dL(Z)}function aL($,X,Z){return $.allOf.reduce((Q,Y)=>rX(Y,X,Q),Z)}function eL($,X,Z){return hL($,Z)}function $K($,X,Z){return cL(Z)}function XK($,X,Z){return f5(Z)}function ZK($,X,Z){if(!e(Z)||o(Z))return Z;for(let Q of Object.getOwnPropertyNames($.properties)){if(!s(Z,Q))continue;Z[Q]=rX($.properties[Q],X,Z[Q])}return Z}function QK($,X,Z){if(!(e(Z)&&!o(Z)))return Z;let Y=Object.getOwnPropertyNames($.patternProperties)[0],J=$.patternProperties[Y];for(let[W,z]of Object.entries(Z))Z[W]=rX(J,X,z);return Z}function YK($,X,Z){return rX(N0($,X),X,Z)}function JK($,X,Z){return g5(Z)}function WK($,X,Z){return U0(Z)||p(Z)?Symbol(Z):Z}function zK($,X,Z){return rX(N0($,X),X,Z)}function GK($,X,Z){if(!(o(Z)&&!d0($.items)))return Z;return Z.map((Y,J)=>{return J<$.items.length?rX($.items[J],X,Y):Y})}function MK($,X,Z){return uL(Z)}function qK($,X,Z){for(let Q of $.anyOf)if(Z0(Q,X,Z))return Z;for(let Q of $.anyOf){let Y=rX(Q,X,O0(Z));if(!Z0(Q,X,Y))continue;return Y}return Z}function rX($,X,Z){let Q=I$($,X),Y=$;switch($[j]){case"Array":return iL(Y,Q,Z);case"BigInt":return nL(Y,Q,Z);case"Boolean":return oL(Y,Q,Z);case"Date":return rL(Y,Q,Z);case"Import":return sL(Y,Q,Z);case"Integer":return tL(Y,Q,Z);case"Intersect":return aL(Y,Q,Z);case"Literal":return eL(Y,Q,Z);case"Null":return $K(Y,Q,Z);case"Number":return XK(Y,Q,Z);case"Object":return ZK(Y,Q,Z);case"Record":return QK(Y,Q,Z);case"Ref":return YK(Y,Q,Z);case"String":return JK(Y,Q,Z);case"Symbol":return WK(Y,Q,Z);case"This":return zK(Y,Q,Z);case"Tuple":return GK(Y,Q,Z);case"Undefined":return MK(Y,Q,Z);case"Union":return qK(Y,Q,Z);default:return pL(Z)}}function Q6(...$){return $.length===3?rX($[0],$[1],$[2]):rX($[0],[],$[1])}class gQ extends r{constructor($,X,Z){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class Y6 extends r{constructor($,X,Z,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Z,this.error=Q}}function o0($,X,Z){try{return L0($)?$[T0].Decode(Z):Z}catch(Q){throw new Y6($,X,Z,Q)}}function BK($,X,Z,Q){return o(Q)?o0($,Z,Q.map((Y,J)=>sX($.items,X,`${Z}/${J}`,Y))):o0($,Z,Q)}function HK($,X,Z,Q){if(!e(Q)||UX(Q))return o0($,Z,Q);let Y=hY($),J=Y.map((q)=>q[0]),W={...Q};for(let[q,B]of Y)if(q in W)W[q]=sX(B,X,`${Z}/${q}`,W[q]);if(!L0($.unevaluatedProperties))return o0($,Z,W);let z=Object.getOwnPropertyNames(W),G=$.unevaluatedProperties,M={...W};for(let q of z)if(!J.includes(q))M[q]=o0(G,`${Z}/${q}`,M[q]);return o0($,Z,M)}function UK($,X,Z,Q){let Y=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],W=sX(J,[...X,...Y],Z,Q);return o0($,Z,W)}function DK($,X,Z,Q){return o0($,Z,sX($.not,X,Z,Q))}function NK($,X,Z,Q){if(!e(Q))return o0($,Z,Q);let Y=ZX($),J={...Q};for(let M of Y){if(!s(J,M))continue;if(d0(J[M])&&(!TZ($.properties[M])||g0.IsExactOptionalProperty(J,M)))continue;J[M]=sX($.properties[M],X,`${Z}/${M}`,J[M])}if(!n0($.additionalProperties))return o0($,Z,J);let W=Object.getOwnPropertyNames(J),z=$.additionalProperties,G={...J};for(let M of W)if(!Y.includes(M))G[M]=o0(z,`${Z}/${M}`,G[M]);return o0($,Z,G)}function wK($,X,Z,Q){if(!e(Q))return o0($,Z,Q);let Y=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(Y),W={...Q};for(let q of Object.getOwnPropertyNames(Q))if(J.test(q))W[q]=sX($.patternProperties[Y],X,`${Z}/${q}`,W[q]);if(!n0($.additionalProperties))return o0($,Z,W);let z=Object.getOwnPropertyNames(W),G=$.additionalProperties,M={...W};for(let q of z)if(!J.test(q))M[q]=o0(G,`${Z}/${q}`,M[q]);return o0($,Z,M)}function OK($,X,Z,Q){let Y=N0($,X);return o0($,Z,sX(Y,X,Z,Q))}function AK($,X,Z,Q){let Y=N0($,X);return o0($,Z,sX(Y,X,Z,Q))}function LK($,X,Z,Q){return o(Q)&&o($.items)?o0($,Z,$.items.map((Y,J)=>sX(Y,X,`${Z}/${J}`,Q[J]))):o0($,Z,Q)}function KK($,X,Z,Q){for(let Y of $.anyOf){if(!Z0(Y,X,Q))continue;let J=sX(Y,X,Z,Q);return o0($,Z,J)}return o0($,Z,Q)}function sX($,X,Z,Q){let Y=I$($,X),J=$;switch($[j]){case"Array":return BK(J,Y,Z,Q);case"Import":return UK(J,Y,Z,Q);case"Intersect":return HK(J,Y,Z,Q);case"Not":return DK(J,Y,Z,Q);case"Object":return NK(J,Y,Z,Q);case"Record":return wK(J,Y,Z,Q);case"Ref":return OK(J,Y,Z,Q);case"Symbol":return o0(J,Z,Q);case"This":return AK(J,Y,Z,Q);case"Tuple":return LK(J,Y,Z,Q);case"Union":return KK(J,Y,Z,Q);default:return o0(J,Z,Q)}}function k9($,X,Z){return sX($,X,"",Z)}class fQ extends r{constructor($,X,Z){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class v5 extends r{constructor($,X,Z,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Z,this.error=Q}}function k$($,X,Z){try{return L0($)?$[T0].Encode(Z):Z}catch(Q){throw new v5($,X,Z,Q)}}function jK($,X,Z,Q){let Y=k$($,Z,Q);return o(Y)?Y.map((J,W)=>tX($.items,X,`${Z}/${W}`,J)):Y}function FK($,X,Z,Q){let Y=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],W=k$($,Z,Q);return tX(J,[...X,...Y],Z,W)}function VK($,X,Z,Q){let Y=k$($,Z,Q);if(!e(Q)||UX(Q))return Y;let J=hY($),W=J.map((B)=>B[0]),z={...Y};for(let[B,w]of J)if(B in z)z[B]=tX(w,X,`${Z}/${B}`,z[B]);if(!L0($.unevaluatedProperties))return z;let G=Object.getOwnPropertyNames(z),M=$.unevaluatedProperties,q={...z};for(let B of G)if(!W.includes(B))q[B]=k$(M,`${Z}/${B}`,q[B]);return q}function CK($,X,Z,Q){return k$($.not,Z,k$($,Z,Q))}function PK($,X,Z,Q){let Y=k$($,Z,Q);if(!e(Y))return Y;let J=ZX($),W={...Y};for(let q of J){if(!s(W,q))continue;if(d0(W[q])&&(!TZ($.properties[q])||g0.IsExactOptionalProperty(W,q)))continue;W[q]=tX($.properties[q],X,`${Z}/${q}`,W[q])}if(!n0($.additionalProperties))return W;let z=Object.getOwnPropertyNames(W),G=$.additionalProperties,M={...W};for(let q of z)if(!J.includes(q))M[q]=k$(G,`${Z}/${q}`,M[q]);return M}function SK($,X,Z,Q){let Y=k$($,Z,Q);if(!e(Q))return Y;let J=Object.getOwnPropertyNames($.patternProperties)[0],W=new RegExp(J),z={...Y};for(let B of Object.getOwnPropertyNames(Q))if(W.test(B))z[B]=tX($.patternProperties[J],X,`${Z}/${B}`,z[B]);if(!n0($.additionalProperties))return z;let G=Object.getOwnPropertyNames(z),M=$.additionalProperties,q={...z};for(let B of G)if(!W.test(B))q[B]=k$(M,`${Z}/${B}`,q[B]);return q}function IK($,X,Z,Q){let Y=N0($,X),J=tX(Y,X,Z,Q);return k$($,Z,J)}function RK($,X,Z,Q){let Y=N0($,X),J=tX(Y,X,Z,Q);return k$($,Z,J)}function EK($,X,Z,Q){let Y=k$($,Z,Q);return o($.items)?$.items.map((J,W)=>tX(J,X,`${Z}/${W}`,Y[W])):[]}function TK($,X,Z,Q){for(let Y of $.anyOf){if(!Z0(Y,X,Q))continue;let J=tX(Y,X,Z,Q);return k$($,Z,J)}for(let Y of $.anyOf){let J=tX(Y,X,Z,Q);if(!Z0($,X,J))continue;return k$($,Z,J)}return k$($,Z,Q)}function tX($,X,Z,Q){let Y=I$($,X),J=$;switch($[j]){case"Array":return jK(J,Y,Z,Q);case"Import":return FK(J,Y,Z,Q);case"Intersect":return VK(J,Y,Z,Q);case"Not":return CK(J,Y,Z,Q);case"Object":return PK(J,Y,Z,Q);case"Record":return SK(J,Y,Z,Q);case"Ref":return IK(J,Y,Z,Q);case"This":return RK(J,Y,Z,Q);case"Tuple":return EK(J,Y,Z,Q);case"Union":return TK(J,Y,Z,Q);default:return k$(J,Z,Q)}}function g9($,X,Z){return tX($,X,"",Z)}function _K($,X){return L0($)||F$($.items,X)}function bK($,X){return L0($)||F$($.items,X)}function xK($,X){return L0($)||F$($.returns,X)||$.parameters.some((Z)=>F$(Z,X))}function kK($,X){return L0($)||F$($.returns,X)||$.parameters.some((Z)=>F$(Z,X))}function gK($,X){return L0($)||L0($.unevaluatedProperties)||$.allOf.some((Z)=>F$(Z,X))}function fK($,X){let Z=globalThis.Object.getOwnPropertyNames($.$defs).reduce((Y,J)=>[...Y,$.$defs[J]],[]),Q=$.$defs[$.$ref];return L0($)||F$(Q,[...Z,...X])}function vK($,X){return L0($)||F$($.items,X)}function yK($,X){return L0($)||F$($.not,X)}function hK($,X){return L0($)||Object.values($.properties).some((Z)=>F$(Z,X))||n0($.additionalProperties)&&F$($.additionalProperties,X)}function mK($,X){return L0($)||F$($.item,X)}function dK($,X){let Z=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Z];return L0($)||F$(Q,X)||n0($.additionalProperties)&&L0($.additionalProperties)}function cK($,X){if(L0($))return!0;return F$(N0($,X),X)}function uK($,X){if(L0($))return!0;return F$(N0($,X),X)}function lK($,X){return L0($)||!d0($.items)&&$.items.some((Z)=>F$(Z,X))}function pK($,X){return L0($)||$.anyOf.some((Z)=>F$(Z,X))}function F$($,X){let Z=I$($,X),Q=$;if($.$id&&WJ.has($.$id))return!1;if($.$id)WJ.add($.$id);switch($[j]){case"Array":return _K(Q,Z);case"AsyncIterator":return bK(Q,Z);case"Constructor":return xK(Q,Z);case"Function":return kK(Q,Z);case"Import":return fK(Q,Z);case"Intersect":return gK(Q,Z);case"Iterator":return vK(Q,Z);case"Not":return yK(Q,Z);case"Object":return hK(Q,Z);case"Promise":return mK(Q,Z);case"Record":return dK(Q,Z);case"Ref":return cK(Q,Z);case"This":return uK(Q,Z);case"Tuple":return lK(Q,Z);case"Union":return pK(Q,Z);default:return L0($)}}var WJ=new Set;function fZ($,X){return WJ.clear(),F$($,X)}function y5(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!Z0(X,Z,Q))throw new gQ(X,Q,HZ(X,Z,Q).First());return fZ(X,Z)?k9(X,Z,Q):Q}function vZ($,X){let Z=s($,"default")?$.default:void 0,Q=X8(Z)?Z():O0(Z);return d0(X)?Q:e(X)&&e(Q)?Object.assign(Q,X):X}function zJ($){return Q8($)&&"default"in $}function iK($,X,Z){if(o(Z)){for(let Y=0;Y<Z.length;Y++)Z[Y]=n$($.items,X,Z[Y]);return Z}let Q=vZ($,Z);if(!o(Q))return Q;for(let Y=0;Y<Q.length;Y++)Q[Y]=n$($.items,X,Q[Y]);return Q}function nK($,X,Z){return p$(Z)?Z:vZ($,Z)}function oK($,X,Z){let Q=globalThis.Object.values($.$defs),Y=$.$defs[$.$ref];return n$(Y,[...X,...Q],Z)}function rK($,X,Z){let Q=vZ($,Z);return $.allOf.reduce((Y,J)=>{let W=n$(J,X,Q);return e(W)?{...Y,...W}:W},{})}function sK($,X,Z){let Q=vZ($,Z);if(!e(Q))return Q;let Y=Object.getOwnPropertyNames($.properties);for(let J of Y){let W=n$($.properties[J],X,Q[J]);if(d0(W))continue;Q[J]=n$($.properties[J],X,Q[J])}if(!zJ($.additionalProperties))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(Y.includes(J))continue;Q[J]=n$($.additionalProperties,X,Q[J])}return Q}function tK($,X,Z){let Q=vZ($,Z);if(!e(Q))return Q;let Y=$.additionalProperties,[J,W]=Object.entries($.patternProperties)[0],z=new RegExp(J);for(let G of Object.getOwnPropertyNames(Q)){if(!(z.test(G)&&zJ(W)))continue;Q[G]=n$(W,X,Q[G])}if(!zJ(Y))return Q;for(let G of Object.getOwnPropertyNames(Q)){if(z.test(G))continue;Q[G]=n$(Y,X,Q[G])}return Q}function aK($,X,Z){return n$(N0($,X),X,vZ($,Z))}function eK($,X,Z){return n$(N0($,X),X,Z)}function $j($,X,Z){let Q=vZ($,Z);if(!o(Q)||d0($.items))return Q;let[Y,J]=[$.items,Math.max($.items.length,Q.length)];for(let W=0;W<J;W++)if(W<Y.length)Q[W]=n$(Y[W],X,Q[W]);return Q}function Xj($,X,Z){let Q=vZ($,Z);for(let Y of $.anyOf){let J=n$(Y,X,O0(Q));if(Z0(Y,X,J))return J}return Q}function n$($,X,Z){let Q=I$($,X),Y=$;switch(Y[j]){case"Array":return iK(Y,Q,Z);case"Date":return nK(Y,Q,Z);case"Import":return oK(Y,Q,Z);case"Intersect":return rK(Y,Q,Z);case"Object":return sK(Y,Q,Z);case"Record":return tK(Y,Q,Z);case"Ref":return aK(Y,Q,Z);case"This":return eK(Y,Q,Z);case"Tuple":return $j(Y,Q,Z);case"Union":return Xj(Y,Q,Z);default:return vZ(Y,Z)}}function J6(...$){return $.length===3?n$($[0],$[1],$[2]):n$($[0],[],$[1])}var aX={};$8(aX,{ValuePointerRootSetError:()=>GJ,ValuePointerRootDeleteError:()=>MJ,Set:()=>Zj,Has:()=>Yj,Get:()=>Jj,Format:()=>vQ,Delete:()=>Qj});class GJ extends r{constructor($,X,Z){super("Cannot set root value");this.value=$,this.path=X,this.update=Z}}class MJ extends r{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}function h5($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*vQ($){if($==="")return;let[X,Z]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Z=Q,yield h5($.slice(X,Z)),X=Q+1;else Z=Q;yield h5($.slice(X))}function Zj($,X,Z){if(X==="")throw new GJ($,X,Z);let[Q,Y,J]=[null,$,""];for(let W of vQ(X)){if(Y[W]===void 0)Y[W]={};Q=Y,Y=Y[W],J=W}Q[J]=Z}function Qj($,X){if(X==="")throw new MJ($,X);let[Z,Q,Y]=[null,$,""];for(let J of vQ(X)){if(Q[J]===void 0||Q[J]===null)return;Z=Q,Q=Q[J],Y=J}if(Array.isArray(Z)){let J=parseInt(Y);Z.splice(J,1)}else delete Z[Y]}function Yj($,X){if(X==="")return!0;let[Z,Q,Y]=[null,$,""];for(let J of vQ(X)){if(Q[J]===void 0)return!1;Z=Q,Q=Q[J],Y=J}return Object.getOwnPropertyNames(Z).includes(Y)}function Jj($,X){if(X==="")return $;let Z=$;for(let Q of vQ(X)){if(Z[Q]===void 0)return;Z=Z[Q]}return Z}function Wj($,X){if(!e(X))return!1;let Z=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Z.length!==Q.length)return!1;return Z.every((Y)=>l8($[Y],X[Y]))}function zj($,X){return p$(X)&&$.getTime()===X.getTime()}function Gj($,X){if(!o(X)||$.length!==X.length)return!1;return $.every((Z,Q)=>l8(Z,X[Q]))}function Mj($,X){if(!VX(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Z,Q)=>l8(Z,X[Q]))}function qj($,X){return $===X}function l8($,X){if(p$($))return zj($,X);if(VX($))return Mj($,X);if(o($))return Gj($,X);if(e($))return Wj($,X);if(UX($))return qj($,X);throw new Error("ValueEquals: Unable to compare value")}var Bj=j0({type:B0("insert"),path:i$(),value:uX()}),Hj=j0({type:B0("update"),path:i$(),value:uX()}),Uj=j0({type:B0("delete"),path:i$()}),d5=K0([Bj,Hj,Uj]);class qJ extends r{constructor($,X){super(X);this.value=$}}function W6($,X){return{type:"update",path:$,value:X}}function c5($,X){return{type:"insert",path:$,value:X}}function u5($){return{type:"delete",path:$}}function m5($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new qJ($,"Cannot diff objects with symbols")}function*Dj($,X,Z){if(m5(X),m5(Z),!k7(Z))return yield W6($,Z);let Q=globalThis.Object.getOwnPropertyNames(X),Y=globalThis.Object.getOwnPropertyNames(Z);for(let J of Y){if(s(X,J))continue;yield c5(`${$}/${J}`,Z[J])}for(let J of Q){if(!s(Z,J))continue;if(l8(X,Z))continue;yield*z6(`${$}/${J}`,X[J],Z[J])}for(let J of Q){if(s(Z,J))continue;yield u5(`${$}/${J}`)}}function*Nj($,X,Z){if(!o(Z))return yield W6($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*z6(`${$}/${Q}`,X[Q],Z[Q]);for(let Q=0;Q<Z.length;Q++){if(Q<X.length)continue;yield c5(`${$}/${Q}`,Z[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Z.length)continue;yield u5(`${$}/${Q}`)}}function*wj($,X,Z){if(!VX(Z)||X.length!==Z.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Z).constructor.name)return yield W6($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*z6(`${$}/${Q}`,X[Q],Z[Q])}function*Oj($,X,Z){if(X===Z)return;yield W6($,Z)}function*z6($,X,Z){if(k7(X))return yield*Dj($,X,Z);if(o(X))return yield*Nj($,X,Z);if(VX(X))return yield*wj($,X,Z);if(UX(X))return yield*Oj($,X,Z);throw new qJ(X,"Unable to diff value")}function l5($,X){return[...z6("",$,X)]}function Aj($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function Lj($){return $.length===0}function p5($,X){if(Aj(X))return O0(X[0].value);if(Lj(X))return O0($);let Z=O0($);for(let Q of X)switch(Q.type){case"insert":{aX.Set(Z,Q.path,Q.value);break}case"update":{aX.Set(Z,Q.path,Q.value);break}case"delete":{aX.Delete(Z,Q.path);break}}return Z}function i5(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],Y=fZ(X,Z)?g9(X,Z,Q):Q;if(!Z0(X,Z,Y))throw new fQ(X,Y,HZ(X,Z,Y).First());return Y}function G6($){return e($)&&!o($)}class BJ extends r{constructor($){super($)}}function Kj($,X,Z,Q){if(!G6(Z))aX.Set($,X,O0(Q));else{let Y=Object.getOwnPropertyNames(Z),J=Object.getOwnPropertyNames(Q);for(let W of Y)if(!J.includes(W))delete Z[W];for(let W of J)if(!Y.includes(W))Z[W]=null;for(let W of J)HJ($,`${X}/${W}`,Z[W],Q[W])}}function jj($,X,Z,Q){if(!o(Z))aX.Set($,X,O0(Q));else{for(let Y=0;Y<Q.length;Y++)HJ($,`${X}/${Y}`,Z[Y],Q[Y]);Z.splice(Q.length)}}function Fj($,X,Z,Q){if(VX(Z)&&Z.length===Q.length)for(let Y=0;Y<Z.length;Y++)Z[Y]=Q[Y];else aX.Set($,X,O0(Q))}function Vj($,X,Z,Q){if(Z===Q)return;aX.Set($,X,Q)}function HJ($,X,Z,Q){if(o(Q))return jj($,X,Z,Q);if(VX(Q))return Fj($,X,Z,Q);if(G6(Q))return Kj($,X,Z,Q);if(UX(Q))return Vj($,X,Z,Q)}function n5($){return VX($)||UX($)}function Cj($,X){return G6($)&&o(X)||o($)&&G6(X)}function o5($,X){if(n5($)||n5(X))throw new BJ("Only object and array types can be mutated at the root level");if(Cj($,X))throw new BJ("Cannot assign due type mismatch of assignable values");HJ($,"",$,X)}class DJ extends r{constructor($){super($)}}var UJ;(function($){let X=new Map([["Assert",(J,W,z)=>{return $6(J,W,z),z}],["Cast",(J,W,z)=>bQ(J,W,z)],["Clean",(J,W,z)=>X6(J,W,z)],["Clone",(J,W,z)=>O0(z)],["Convert",(J,W,z)=>Q6(J,W,z)],["Decode",(J,W,z)=>fZ(J,W)?k9(J,W,z):z],["Default",(J,W,z)=>J6(J,W,z)],["Encode",(J,W,z)=>fZ(J,W)?g9(J,W,z):z]]);function Z(J){X.delete(J)}$.Delete=Z;function Q(J,W){X.set(J,W)}$.Set=Q;function Y(J){return X.get(J)}$.Get=Y})(UJ||(UJ={}));var r5=["Clone","Clean","Default","Convert","Assert","Decode"];function Pj($,X,Z,Q){return $.reduce((Y,J)=>{let W=UJ.Get(J);if(d0(W))throw new DJ(`Unable to find Parse operation '${J}'`);return W(X,Z,Y)},Q)}function s5(...$){let[X,Z,Q,Y]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?o($[0])?[$[0],$[1],[],$[2]]:[r5,$[0],$[1],$[2]]:$.length===2?[r5,$[0],[],$[1]]:(()=>{throw new DJ("Invalid Arguments")})();return Pj(X,Z,Q,Y)}var I0={};$8(I0,{ValueErrorIterator:()=>u8,Patch:()=>p5,Parse:()=>s5,Mutate:()=>o5,Hash:()=>B8,Errors:()=>HZ,Equal:()=>l8,Encode:()=>i5,Edit:()=>d5,Diff:()=>l5,Default:()=>J6,Decode:()=>y5,Create:()=>nX,Convert:()=>Q6,Clone:()=>O0,Clean:()=>X6,Check:()=>Z0,Cast:()=>bQ,Assert:()=>$6});class t5{constructor($,X,Z,Q){this.schema=$,this.references=X,this.checkFunc=Z,this.code=Q,this.hasTransform=fZ($,X)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return HZ(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new gQ(this.schema,$,this.Errors($).First());return this.hasTransform?k9(this.schema,this.references,$):$}Encode($){let X=this.hasTransform?g9(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new fQ(this.schema,$,this.Errors($).First());return X}}var yZ;(function($){function X(J){return J===36}$.DollarSign=X;function Z(J){return J===95}$.IsUnderscore=Z;function Q(J){return J>=65&&J<=90||J>=97&&J<=122}$.IsAlpha=Q;function Y(J){return J>=48&&J<=57}$.IsNumeric=Y})(yZ||(yZ={}));var M6;(function($){function X(J){if(J.length===0)return!1;return yZ.IsNumeric(J.charCodeAt(0))}function Z(J){if(X(J))return!1;for(let W=0;W<J.length;W++){let z=J.charCodeAt(W);if(!(yZ.IsAlpha(z)||yZ.IsNumeric(z)||yZ.DollarSign(z)||yZ.IsUnderscore(z)))return!1}return!0}function Q(J){return J.replace(/'/g,"\\'")}function Y(J,W){return Z(W)?`${J}.${W}`:`${J}['${Q(W)}']`}$.Encode=Y})(M6||(M6={}));var NJ;(function($){function X(Z){let Q=[];for(let Y=0;Y<Z.length;Y++){let J=Z.charCodeAt(Y);if(yZ.IsNumeric(J)||yZ.IsAlpha(J))Q.push(Z.charAt(Y));else Q.push(`_${J}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(NJ||(NJ={}));var wJ;(function($){function X(Z){return Z.replace(/'/g,"\\'")}$.Escape=X})(wJ||(wJ={}));class a5 extends r{constructor($){super("Unknown type");this.schema=$}}class OJ extends r{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var p8;(function($){function X(W,z,G){return g0.ExactOptionalPropertyTypes?`('${z}' in ${W} ? ${G} : true)`:`(${M6.Encode(W,z)} !== undefined ? ${G} : true)`}$.IsExactOptionalProperty=X;function Z(W){return!g0.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}))`:`(typeof ${W} === 'object' && ${W} !== null)`}$.IsObjectLike=Z;function Q(W){return!g0.AllowArrayObject?`(typeof ${W} === 'object' && ${W} !== null && !Array.isArray(${W}) && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`:`(typeof ${W} === 'object' && ${W} !== null && !(${W} instanceof Date) && !(${W} instanceof Uint8Array))`}$.IsRecordLike=Q;function Y(W){return g0.AllowNaN?`typeof ${W} === 'number'`:`Number.isFinite(${W})`}$.IsNumberLike=Y;function J(W){return g0.AllowNullVoid?`(${W} === undefined || ${W} === null)`:`${W} === undefined`}$.IsVoidLike=J})(p8||(p8={}));var eX;(function($){function X(D){return D[j]==="Any"||D[j]==="Unknown"}function*Z(D,V,L){yield"true"}function*Q(D,V,L){yield"true"}function*Y(D,V,L){yield`Array.isArray(${L})`;let[x,f]=[aZ("value","any"),aZ("acc","number")];if(p(D.maxItems))yield`${L}.length <= ${D.maxItems}`;if(p(D.minItems))yield`${L}.length >= ${D.minItems}`;let m=M$(D.items,V,"value");if(yield`${L}.every((${x}) => ${m})`,u0(D.contains)||p(D.minContains)||p(D.maxContains)){let $0=u0(D.contains)?D.contains:X0(),_0=M$($0,V,"value"),y$=p(D.minContains)?[`(count >= ${D.minContains})`]:[],b$=p(D.maxContains)?[`(count <= ${D.maxContains})`]:[],BX=`const count = value.reduce((${f}, ${x}) => ${_0} ? acc + 1 : acc, 0)`,VZ=["(count > 0)",...y$,...b$].join(" && ");yield`((${x}) => { ${BX}; return ${VZ}})(${L})`}if(D.uniqueItems===!0)yield`((${x}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${L})`}function*J(D,V,L){yield`(typeof value === 'object' && Symbol.asyncIterator in ${L})`}function*W(D,V,L){if(yield`(typeof ${L} === 'bigint')`,x$(D.exclusiveMaximum))yield`${L} < BigInt(${D.exclusiveMaximum})`;if(x$(D.exclusiveMinimum))yield`${L} > BigInt(${D.exclusiveMinimum})`;if(x$(D.maximum))yield`${L} <= BigInt(${D.maximum})`;if(x$(D.minimum))yield`${L} >= BigInt(${D.minimum})`;if(x$(D.multipleOf))yield`(${L} % BigInt(${D.multipleOf})) === 0`}function*z(D,V,L){yield`(typeof ${L} === 'boolean')`}function*G(D,V,L){yield*jZ(D.returns,V,`${L}.prototype`)}function*M(D,V,L){if(yield`(${L} instanceof Date) && Number.isFinite(${L}.getTime())`,p(D.exclusiveMaximumTimestamp))yield`${L}.getTime() < ${D.exclusiveMaximumTimestamp}`;if(p(D.exclusiveMinimumTimestamp))yield`${L}.getTime() > ${D.exclusiveMinimumTimestamp}`;if(p(D.maximumTimestamp))yield`${L}.getTime() <= ${D.maximumTimestamp}`;if(p(D.minimumTimestamp))yield`${L}.getTime() >= ${D.minimumTimestamp}`;if(p(D.multipleOfTimestamp))yield`(${L}.getTime() % ${D.multipleOfTimestamp}) === 0`}function*q(D,V,L){yield`(typeof ${L} === 'function')`}function*B(D,V,L){let x=globalThis.Object.getOwnPropertyNames(D.$defs).reduce((f,m)=>{return[...f,D.$defs[m]]},[]);yield*jZ(RX(D.$ref),[...V,...x],L)}function*w(D,V,L){if(yield`Number.isInteger(${L})`,p(D.exclusiveMaximum))yield`${L} < ${D.exclusiveMaximum}`;if(p(D.exclusiveMinimum))yield`${L} > ${D.exclusiveMinimum}`;if(p(D.maximum))yield`${L} <= ${D.maximum}`;if(p(D.minimum))yield`${L} >= ${D.minimum}`;if(p(D.multipleOf))yield`(${L} % ${D.multipleOf}) === 0`}function*H(D,V,L){let x=D.allOf.map((f)=>M$(f,V,L)).join(" && ");if(D.unevaluatedProperties===!1){let f=tZ(`${new RegExp(xZ(D))};`),m=`Object.getOwnPropertyNames(${L}).every(key => ${f}.test(key))`;yield`(${x} && ${m})`}else if(u0(D.unevaluatedProperties)){let f=tZ(`${new RegExp(xZ(D))};`),m=`Object.getOwnPropertyNames(${L}).every(key => ${f}.test(key) || ${M$(D.unevaluatedProperties,V,`${L}[key]`)})`;yield`(${x} && ${m})`}else yield`(${x})`}function*U(D,V,L){yield`(typeof value === 'object' && Symbol.iterator in ${L})`}function*O(D,V,L){if(typeof D.const==="number"||typeof D.const==="boolean")yield`(${L} === ${D.const})`;else yield`(${L} === '${wJ.Escape(D.const)}')`}function*F(D,V,L){yield"false"}function*A(D,V,L){yield`(!${M$(D.not,V,L)})`}function*N(D,V,L){yield`(${L} === null)`}function*R(D,V,L){if(yield p8.IsNumberLike(L),p(D.exclusiveMaximum))yield`${L} < ${D.exclusiveMaximum}`;if(p(D.exclusiveMinimum))yield`${L} > ${D.exclusiveMinimum}`;if(p(D.maximum))yield`${L} <= ${D.maximum}`;if(p(D.minimum))yield`${L} >= ${D.minimum}`;if(p(D.multipleOf))yield`(${L} % ${D.multipleOf}) === 0`}function*u(D,V,L){if(yield p8.IsObjectLike(L),p(D.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${D.minProperties}`;if(p(D.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${D.maxProperties}`;let x=Object.getOwnPropertyNames(D.properties);for(let f of x){let m=M6.Encode(L,f),$0=D.properties[f];if(D.required&&D.required.includes(f)){if(yield*jZ($0,V,m),kZ($0)||X($0))yield`('${f}' in ${L})`}else{let _0=M$($0,V,m);yield p8.IsExactOptionalProperty(L,f,_0)}}if(D.additionalProperties===!1)if(D.required&&D.required.length===x.length)yield`Object.getOwnPropertyNames(${L}).length === ${x.length}`;else{let f=`[${x.map((m)=>`'${m}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${L}).every(key => ${f}.includes(key))`}if(typeof D.additionalProperties==="object"){let f=M$(D.additionalProperties,V,`${L}[key]`),m=`[${x.map(($0)=>`'${$0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${L}).every(key => ${m}.includes(key) || ${f}))`}}function*y(D,V,L){yield`${L} instanceof Promise`}function*b(D,V,L){if(yield p8.IsRecordLike(L),p(D.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${D.minProperties}`;if(p(D.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${D.maxProperties}`;let[x,f]=Object.entries(D.patternProperties)[0],m=tZ(`${new RegExp(x)}`),$0=M$(f,V,"value"),_0=u0(D.additionalProperties)?M$(D.additionalProperties,V,L):D.additionalProperties===!1?"false":"true",y$=`(${m}.test(key) ? ${$0} : ${_0})`;yield`(Object.entries(${L}).every(([key, value]) => ${y$}))`}function*_(D,V,L){let x=N0(D,V);if(G$.functions.has(D.$ref))return yield`${zZ(D.$ref)}(${L})`;yield*jZ(x,V,L)}function*v(D,V,L){let x=tZ(`${new RegExp(D.source,D.flags)};`);if(yield`(typeof ${L} === 'string')`,p(D.maxLength))yield`${L}.length <= ${D.maxLength}`;if(p(D.minLength))yield`${L}.length >= ${D.minLength}`;yield`${x}.test(${L})`}function*g(D,V,L){if(yield`(typeof ${L} === 'string')`,p(D.maxLength))yield`${L}.length <= ${D.maxLength}`;if(p(D.minLength))yield`${L}.length >= ${D.minLength}`;if(D.pattern!==void 0)yield`${tZ(`${new RegExp(D.pattern)};`)}.test(${L})`;if(D.format!==void 0)yield`format('${D.format}', ${L})`}function*E(D,V,L){yield`(typeof ${L} === 'symbol')`}function*T(D,V,L){yield`(typeof ${L} === 'string')`,yield`${tZ(`${new RegExp(D.pattern)};`)}.test(${L})`}function*l(D,V,L){yield`${zZ(D.$ref)}(${L})`}function*i(D,V,L){if(yield`Array.isArray(${L})`,D.items===void 0)return yield`${L}.length === 0`;yield`(${L}.length === ${D.maxItems})`;for(let x=0;x<D.items.length;x++)yield`${M$(D.items[x],V,`${L}[${x}]`)}`}function*H0(D,V,L){yield`${L} === undefined`}function*a0(D,V,L){yield`(${D.anyOf.map((f)=>M$(f,V,L)).join(" || ")})`}function*F0(D,V,L){if(yield`${L} instanceof Uint8Array`,p(D.maxByteLength))yield`(${L}.length <= ${D.maxByteLength})`;if(p(D.minByteLength))yield`(${L}.length >= ${D.minByteLength})`}function*R7(D,V,L){yield"true"}function*DQ(D,V,L){yield p8.IsVoidLike(L)}function*VY(D,V,L){let x=G$.instances.size;G$.instances.set(x,D),yield`kind('${D[j]}', ${x}, ${L})`}function*jZ(D,V,L,x=!0){let f=U0(D.$id)?[...V,D]:V,m=D;if(x&&U0(D.$id)){let $0=zZ(D.$id);if(G$.functions.has($0))return yield`${$0}(${L})`;else{G$.functions.set($0,"<deferred>");let _0=FZ($0,D,V,"value",!1);return G$.functions.set($0,_0),yield`${$0}(${L})`}}switch(m[j]){case"Any":return yield*Z(m,f,L);case"Argument":return yield*Q(m,f,L);case"Array":return yield*Y(m,f,L);case"AsyncIterator":return yield*J(m,f,L);case"BigInt":return yield*W(m,f,L);case"Boolean":return yield*z(m,f,L);case"Constructor":return yield*G(m,f,L);case"Date":return yield*M(m,f,L);case"Function":return yield*q(m,f,L);case"Import":return yield*B(m,f,L);case"Integer":return yield*w(m,f,L);case"Intersect":return yield*H(m,f,L);case"Iterator":return yield*U(m,f,L);case"Literal":return yield*O(m,f,L);case"Never":return yield*F(m,f,L);case"Not":return yield*A(m,f,L);case"Null":return yield*N(m,f,L);case"Number":return yield*R(m,f,L);case"Object":return yield*u(m,f,L);case"Promise":return yield*y(m,f,L);case"Record":return yield*b(m,f,L);case"Ref":return yield*_(m,f,L);case"RegExp":return yield*v(m,f,L);case"String":return yield*g(m,f,L);case"Symbol":return yield*E(m,f,L);case"TemplateLiteral":return yield*T(m,f,L);case"This":return yield*l(m,f,L);case"Tuple":return yield*i(m,f,L);case"Undefined":return yield*H0(m,f,L);case"Union":return yield*a0(m,f,L);case"Uint8Array":return yield*F0(m,f,L);case"Unknown":return yield*R7(m,f,L);case"Void":return yield*DQ(m,f,L);default:if(!j$.Has(m[j]))throw new a5(D);return yield*VY(m,f,L)}}let G$={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function M$(D,V,L,x=!0){return`(${[...jZ(D,V,L,x)].join(" && ")})`}function zZ(D){return`check_${NJ.Encode(D)}`}function tZ(D){let V=`local_${G$.variables.size}`;return G$.variables.set(V,`const ${V} = ${D}`),V}function FZ(D,V,L,x,f=!0){let[m,$0]=[`
`,(BX)=>"".padStart(BX," ")],_0=aZ("value","any"),y$=CY("boolean"),b$=[...jZ(V,L,x,f)].map((BX)=>`${$0(4)}${BX}`).join(` &&${m}`);return`function ${D}(${_0})${y$} {${m}${$0(2)}return (${m}${b$}${m}${$0(2)})
}`}function aZ(D,V){let L=G$.language==="typescript"?`: ${V}`:"";return`${D}${L}`}function CY(D){return G$.language==="typescript"?`: ${D}`:""}function eZ(D,V,L){let x=FZ("check",D,V,"value"),f=aZ("value","any"),m=CY("boolean"),$0=[...G$.functions.values()],_0=[...G$.variables.values()],y$=U0(D.$id)?`return function check(${f})${m} {
  return ${zZ(D.$id)}(value)
}`:`return ${x}`;return[..._0,...$0,y$].join(`
`)}function d(...D){let V={language:"javascript"},[L,x,f]=D.length===2&&o(D[1])?[D[0],D[1],V]:D.length===2&&!o(D[1])?[D[0],[],D[1]]:D.length===3?[D[0],D[1],D[2]]:D.length===1?[D[0],[],V]:[null,[],V];if(G$.language=f.language,G$.variables.clear(),G$.functions.clear(),G$.instances.clear(),!u0(L))throw new OJ(L);for(let m of x)if(!u0(m))throw new OJ(m);return eZ(L,x,f)}$.Code=d;function h(D,V=[]){let L=d(D,V,{language:"javascript"}),x=globalThis.Function("kind","format","hash",L),f=new Map(G$.instances);function m(b$,BX,VZ){if(!j$.Has(b$)||!f.has(BX))return!1;let f1=j$.Get(b$),v1=f.get(BX);return f1(v1,VZ)}function $0(b$,BX){if(!V0.Has(b$))return!1;return V0.Get(b$)(BX)}function _0(b$){return B8(b$)}let y$=x(m,$0,_0);return new t5(D,V,y$,L)}$.Compile=h})(eX||(eX={}));var R6=x8(ZG(),1),oG=x8(_Q(),1);var Z4=x8(_Q(),1),o8=x8(_Q(),1);var JX=Symbol.for("TypeBox.Kind"),yj=Symbol.for("TypeBox.Hint"),YG=($)=>/(\ |-|\t|\n|\.)/.test($)||!isNaN(+$[0]),JG=($,X,Z=!1)=>{if(typeof X==="number")return`${$}[${X}]`;if(YG(X))return`${$}${Z?"?.":""}["${X}"]`;return`${$}${Z?"?":""}.${X}`},hj=($)=>YG($)?`"${$}"`:$,QG=($,X=0,Z)=>{if(Z.type!=="string"||Z.const||Z.trusted)return $;let Q="";for(let Y=X-1;Y>=0;Y--)Q+=`d.h${Y}(`;return Q+$+")".repeat(X)},WG=($)=>{if(!$.allOf||JX in $&&($[JX]!=="Intersect"||$.type!=="object"))return $;let{allOf:X,...Z}=$;if(Z.properties={},JX in Z)Z[JX]="Object";for(let Q of X){if(Q.type!=="object")continue;let{properties:Y,required:J,type:W,[JX]:z,...G}=Q;if(J)Z.required=Z.required?Z.required.concat(J):J;Object.assign(Z,G);for(let M in Q.properties)Z.properties[M]=WG(Q.properties[M])}return Z},mj=($,X,Z)=>{let Q=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!Q)return X;let Y=Z.array;Z.array++;let J=`(()=>{const ar${Y}s=Object.keys(${X}),ar${Y}v={};for(let i=0;i<ar${Y}s.length;i++){const ar${Y}p=${X}[ar${Y}s[i]];ar${Y}v[ar${Y}s[i]]=${hZ(Q,`ar${Y}p`,Z)}`,W=Z.optionalsInArray[Y+1];if(W)for(let z=0;z<W.length;z++){let G=`ar${Y}v[ar${Y}s[i]].${W[z]}`;J+=`;if(${G}===undefined)delete ${G}`}return J+=`}return ar${Y}v})()`,J},dj=($,X,Z)=>{let Q=Z.array;Z.array++;let Y=X==="v"&&!Z.unions.length,J="";if(!Y)J="(()=>{";J+=`const ar${Q}v=[`;for(let W=0;W<$.length;W++){if(W!==0)J+=",";J+=hZ($[W],JG(X,W,Z.parentIsOptional),Z)}if(J+="];",!Y)J+=`return ar${Q}v})()`;return J};function q6($,X=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(X.has($))return X.get($);if(Array.isArray($)){let Z=new Array($.length);X.set($,Z);for(let Q=0;Q<$.length;Q++)Z[Q]=q6($[Q],X);return Z}if(typeof $==="object"){let Z=Object.keys($).concat(Object.getOwnPropertySymbols($)),Q={};for(let Y of Z)Q[Y]=q6($[Y],X);return Q}return $}var cj=($,X,Z)=>{if(Z.TypeCompiler===void 0){if(!Z.typeCompilerWanred)console.warn(new Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),Z.typeCompilerWanred=!0;return X}Z.unionKeys[X]=1;let Q=Z.unions.length,Y=Z.unions[Q]=[],J=`(()=>{
`,W=(z)=>{if(!(JX in z)||!z.$ref)return z;if(z[JX]==="This")return q6(Z.definitions[z.$ref]);else if(z[JX]==="Ref")if(!Z.modules)console.warn(new Error("[exact-mirror] modules is required when using nested cyclic reference"));else return Z.modules.Import(z.$ref);return z};for(let z=0;z<$.length;z++){let G=W($[z]);if(Array.isArray(G.anyOf))for(let M=0;M<G.anyOf.length;M++)G.anyOf[M]=W(G.anyOf[M]);else if(G.items)if(Array.isArray(G.items))for(let M=0;M<G.items.length;M++)G.items[M]=W(G.items[M]);else G.items=W(G.items);Y.push(eX.Compile(G)),J+=`if(d.unions[${Q}][${z}].Check(${X})){return ${hZ(G,X,{...Z,recursion:Z.recursion+1,parentIsOptional:!0})}}
`}return J+=`return ${Z.removeUnknownUnionType?"undefined":X}})()`,J},hZ=($,X,Z)=>{if(!$)return"";let Q=X==="v"&&!Z.unions.length;if(JX in $&&$[JX]==="Import"&&$.$ref in $.$defs)return hZ($.$defs[$.$ref],X,{...Z,definitions:Object.assign(Z.definitions,$.$defs)});if(Q&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${QG("v",Z.sanitize?.length,$)}`;if(Z.recursion>=Z.recursionLimit)return X;let Y="";if($.$id&&yj in $)Z.definitions[$.$id]=$;switch($.type){case"object":if($[JX]==="Record"){Y=mj($,X,Z);break}if($=WG($),Y+="{",$.additionalProperties)Y+=`...${X},`;let J=Object.keys($.properties);for(let M=0;M<J.length;M++){let q=J[M],B=!$.required||$.required&&!$.required.includes(q)||Array.isArray($.properties[q].anyOf),w=JG(X,q,Z.parentIsOptional);if(B){let U=Z.array;if(X.startsWith("ar")){let O=w.slice(w.indexOf(".")+1),F=Z.optionalsInArray;if(F[U])F[U].push(O);else F[U]=[O]}else Z.optionals.push(w)}let H=$.properties[q];if(M!==0)Y+=",";Y+=`${hj(q)}:${B?`${w}===undefined?undefined:`:""}${hZ(H,w,{...Z,recursion:Z.recursion+1,parentIsOptional:B})}`}Y+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array")if(Array.isArray($.items)){Y=dj($.items,X,Z);break}else if(Q)return"return v";else if(JX in $.items&&$.items.$ref&&($.items[JX]==="Ref"||$.items[JX]==="This"))Y=hZ(q6(Z.definitions[$.items.$ref]),X,{...Z,parentIsOptional:!0,recursion:Z.recursion+1});else{Y=X;break}let W=Z.array;Z.array++;let z=X;if(Q)Y=`const ar${W}v=new Array(${X}.length);`;else z=`ar${W}s`,Y=`((${z})=>{const ar${W}v=new Array(${z}.length);`;Y+=`for(let i=0;i<${z}.length;i++){const ar${W}p=${z}[i];ar${W}v[i]=${hZ($.items,`ar${W}p`,Z)}`;let G=Z.optionalsInArray[W+1];if(G)for(let M=0;M<G.length;M++){let q=`ar${W}v[i].${G[M]}`;Y+=`;if(${q}===undefined)delete ${q}`}if(Y+="}",!Q)Y+=`return ar${W}v})(${X})`;break;default:if($.$ref&&$.$ref in Z.definitions)return hZ(Z.definitions[$.$ref],X,Z);if(Array.isArray($.anyOf)){Y=cj($.anyOf,X,Z);break}Y=QG(X,Z.sanitize?.length,$);break}if(!Q)return Y;if($.type==="array")Y=`${Y}const x=ar0v;`;else Y=`const x=${Y}
`;for(let J=0;J<Z.optionals.length;J++){let W=Z.optionals[J],z=W.slice(1);if(Y+=`if(${W}===undefined`,Z.unionKeys[W])Y+=`||x${z}===undefined`;let G=z.charCodeAt(0)!==63&&$.type!=="array";Y+=`)delete x${G?z.charCodeAt(0)===91?"?.":"?":""}${z}
`}return`${Y}return x`},B6=($,{TypeCompiler:X,modules:Z,definitions:Q,sanitize:Y,recursionLimit:J=8,removeUnknownUnionType:W=!1}={})=>{let z=[];if(typeof Y==="function")Y=[Y];let G=hZ($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:z,unionKeys:{},TypeCompiler:X,modules:Z,definitions:Q??Z?.$defs??{},sanitize:Y,recursion:0,recursionLimit:J,removeUnknownUnionType:W});if(!z.length&&!Y?.length)return Function("v",G);let M;if(Y?.length){M={};for(let q=0;q<Y.length;q++)M[`h${q}`]=Y[q]}return Function("d",`return function mirror(v){${G}}`)({unions:z,...M})};var f9=($,X)=>{let Z=X?.length?{}:null;if(Z)for(let Q of X)Z[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Z,params:null,wildcardStore:null}},MG=($,X)=>({...$,part:X}),qG=($)=>({name:$,store:null,inert:null}),BG=class ${constructor(X={}){this.config=X,X.lazy&&(this.find=this.lazyFind),X.onParam&&!Array.isArray(X.onParam)&&(this.config.onParam=[this.config.onParam])}root={};history=[];deferred=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=(X,Z)=>this.config.lazy?(this.build(),this.find(X,Z)):this.find;build(){if(this.config.lazy){for(let[X,Z,Q]of this.deferred)this.add(X,Z,Q,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=(X,Z)=>{let Q=this.root[X];return Q?O6(Z,Z.length,Q,0,this.config.onParam):null}}}add(X,Z,Q,{ignoreError:Y=!1,ignoreHistory:J=!1,lazy:W=this.config.lazy}={}){if(W)return this.find=this.lazyFind,this.deferred.push([X,Z,Q]),Q;if(typeof Z!="string")throw new TypeError("Route path must be a string");Z===""?Z="/":Z[0]!=="/"&&(Z=`/${Z}`);let z=Z[Z.length-1]==="*",G=Z.match($.regex.optionalParams);if(G){let H=Z.replaceAll("?","");this.add(X,H,Q,{ignoreError:Y,ignoreHistory:J,lazy:W});for(let U=0;U<G.length;U++){let O=Z.replace(G[U],"");this.add(X,O,Q,{ignoreError:!0,ignoreHistory:J,lazy:W})}return Q}if(G&&(Z=Z.replaceAll("?","")),this.history.find(([H,U,O])=>H===X&&U===Z))return Q;(z||G&&Z.charCodeAt(Z.length-1)===63)&&(Z=Z.slice(0,-1)),J||this.history.push([X,Z,Q]);let M=Z.split($.regex.static),q=Z.match($.regex.params)||[];M[M.length-1]===""&&M.pop();let B;this.root[X]?B=this.root[X]:B=this.root[X]=f9("/");let w=0;for(let H=0;H<M.length;++H){let U=M[H];if(H>0){let O=q[w++].slice(1);if(B.params===null)B.params=qG(O);else if(B.params.name!==O){if(Y)return Q;throw new Error(`Cannot create route "${Z}" with parameter "${O}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`)}let F=B.params;if(F.inert===null){B=F.inert=f9(U);continue}B=F.inert}for(let O=0;;){if(O===U.length){if(O<B.part.length){let F=MG(B,B.part.slice(O));Object.assign(B,f9(U,[F]))}break}if(O===B.part.length){B.inert===null&&(B.inert={});let F=B.inert[U.charCodeAt(O)];if(F){B=F,U=U.slice(O),O=0;continue}let A=f9(U.slice(O));B.inert[U.charCodeAt(O)]=A,B=A;break}if(U[O]!==B.part[O]){let F=MG(B,B.part.slice(O)),A=f9(U.slice(O));Object.assign(B,f9(B.part.slice(0,O),[F,A])),B=A;break}++O}}if(w<q.length){let H=q[w].slice(1);if(B.params===null)B.params=qG(H);else if(B.params.name!==H){if(Y)return Q;throw new Error(`Cannot create route "${Z}" with parameter "${H}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`)}return B.params.store===null&&(B.params.store=Q),B.params.store}return z?(B.wildcardStore===null&&(B.wildcardStore=Q),B.wildcardStore):(B.store===null&&(B.store=Q),B.store)}find(X,Z){let Q=this.root[X];return Q?O6(Z,Z.length,Q,0,this.config.onParam):null}},O6=($,X,Z,Q,Y)=>{let J=Z.part,W=J.length,z=Q+W;if(W>1){if(z>X)return null;if(W<15){for(let G=1,M=Q+1;G<W;++G,++M)if(J.charCodeAt(G)!==$.charCodeAt(M))return null}else if($.slice(Q,z)!==J)return null}if(z===X)return Z.store!==null?{store:Z.store,params:{}}:Z.wildcardStore!==null?{store:Z.wildcardStore,params:{"*":""}}:null;if(Z.inert!==null){let G=Z.inert[$.charCodeAt(z)];if(G!==void 0){let M=O6($,X,G,z,Y);if(M!==null)return M}}if(Z.params!==null){let{store:G,name:M,inert:q}=Z.params,B=$.indexOf("/",z);if(B!==z){if(B===-1||B>=X){if(G!==null){let w={};if(w[M]=$.substring(z,X),Y)for(let H=0;H<Y.length;H++){let U=Y[H](w[M],M);U!==void 0&&(w[M]=U)}return{store:G,params:w}}}else if(q!==null){let w=O6($,X,q,B,Y);if(w!==null){if(w.params[M]=$.substring(z,B),Y)for(let H=0;H<Y.length;H++){let U=Y[H](w.params[M],M);U!==void 0&&(w.params[M]=U)}return w}}}}return Z.wildcardStore!==null?{store:Z.wildcardStore,params:{"*":$.substring(z,X)}}:null},dJ={date:yG,time:_J(!0),"date-time":HG(!0),"iso-time":_J(!1),"iso-date-time":HG(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:sj,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:QF,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:tj,int32:{type:"number",validate:$F},int64:{type:"number",validate:XF},float:{type:"number",validate:DG},double:{type:"number",validate:DG},password:!0,binary:!0};function uj($){return $%4===0&&($%100!==0||$%400===0)}var lj=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,pj=[0,31,28,31,30,31,30,31,31,30,31,30,31];function yG($){let X=lj.exec($);if(!X)return!1;let Z=+X[1],Q=+X[2],Y=+X[3];return Q>=1&&Q<=12&&Y>=1&&Y<=(Q===2&&uj(Z)?29:pj[Q])}var ij=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function _J($){return function(X){let Z=ij.exec(X);if(!Z)return!1;let Q=+Z[1],Y=+Z[2],J=+Z[3],W=Z[4],z=Z[5]==="-"?-1:1,G=+(Z[6]||0),M=+(Z[7]||0);if(G>23||M>59||$&&!W)return!1;if(Q<=23&&Y<=59&&J<60)return!0;let q=Y-M*z,B=Q-G*z-(q<0?1:0);return(B===23||B===-1)&&(q===59||q===-1)&&J<61}}var bJ=($)=>$.charCodeAt($.length-6)===32?$.slice(0,-6)+"+"+$.slice(-5):$,nj=/t|\s/i;function HG($){let X=_J($);return function(Z){let Q=Z.split(nj);return Q.length===2&&yG(Q[0])&&X(Q[1])}}var oj=/\/|:/,rj=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function sj($){return oj.test($)&&rj.test($)}var UG=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function tj($){return UG.lastIndex=0,UG.test($)}var aj=-2147483648,ej=2147483647;function $F($){return Number.isInteger($)&&$<=ej&&$>=aj}function XF($){return Number.isInteger($)}function DG(){return!0}var ZF=/[^\\]\\Z/;function QF($){if(ZF.test($))return!1;try{return new RegExp($),!0}catch{return!1}}var hG=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,mG=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,dG=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,YF=dJ.date,JF=dJ["date-time"];V0.Has("date")||V0.Set("date",($)=>{let X=bJ($).replace(/"/g,"");if(hG.test(X)||mG.test(X)||dG.test(X)||YF(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});V0.Has("date-time")||V0.Set("date-time",($)=>{let X=$.replace(/"/g,"");if(hG.test(X)||mG.test(X)||dG.test(X)||JF(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});Object.entries(dJ).forEach(($)=>{let[X,Z]=$;V0.Has(X)||(Z instanceof RegExp?V0.Set(X,(Q)=>Z.test(Q)):typeof Z=="function"&&V0.Set(X,Z))});V0.Has("numeric")||V0.Set("numeric",($)=>!!$&&!isNaN(+$));V0.Has("integer")||V0.Set("integer",($)=>!!$&&Number.isInteger(+$));V0.Has("boolean")||V0.Set("boolean",($)=>$==="true"||$==="false");V0.Has("ObjectString")||V0.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if((X===9||X===10||X===32)&&(X=$.trimStart().charCodeAt(0)),X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});V0.Has("ArrayString")||V0.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if((X===9||X===10||X===32)&&(X=$.trimStart().charCodeAt(0)),X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var u9=typeof Bun<"u",cG={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},WF=($)=>{let X=$.lastIndexOf(".");return X===-1?"":$.slice(X+1)};var AJ,LJ,xJ=class{constructor($){if(this.path=$,u9)this.value=Bun.file($);else{if(!AJ||!LJ){if(typeof window<"u"){console.warn("Browser environment does not support file");return}let X=(Q)=>console.warn(new Error(`[elysia] \`file\` require \`fs${Q?"."+Q:""}\` ${Q?.includes(".")?"module ":""}which is not available in this environment`));if(typeof process>"u"||typeof process.getBuiltinModule!="function"){X();return}let Z=process.getBuiltinModule("fs");if(!Z){X();return}if(typeof Z.createReadStream!="function"){X();return}if(typeof Z.promises?.stat!="function"){X();return}AJ=Z.createReadStream,LJ=Z.promises.stat}this.value=AJ($),this.stats=LJ($)}}get type(){return cG[WF(this.path)]||"application/octet-stream"}get length(){return u9?this.value.size:this.stats?.then(($)=>$.size)??0}},kJ="toJSON"in new Headers,NG=($,X)=>{let Z=new URL($);return Z.pathname=X,Z.toString()},zF=($)=>typeof $=="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||l0(Object.getPrototypeOf($)),KJ=($)=>$&&typeof $=="object"&&!Array.isArray($),T$=($,X,Z)=>{let Q=Z?.skipKeys,Y=Z?.override??!0,J=Z?.mergeArray??!1;if(!KJ($)||!KJ(X))return $;for(let[W,z]of Object.entries(X))if(!Q?.includes(W)){if(J&&Array.isArray(z)){$[W]=Array.isArray($[W])?[...$[W],...z]:$[W]=z;continue}if(!KJ(z)||!(W in $)||zF(z)){if((Y||!(W in $))&&!Object.isFrozen($))try{$[W]=z}catch{}continue}if(!Object.isFrozen($[W]))try{$[W]=T$($[W],z,{skipKeys:Q,override:Y,mergeArray:J})}catch{}}return $},gJ=($,X)=>{let Z=T$(Object.assign({},$),X,{skipKeys:["properties"],mergeArray:!1});return Z.properties&&delete Z.properties,Z},Z$=($,X)=>{if(!X)return $;let Z=[],Q=[];if($){Array.isArray($)||($=[$]);for(let Y of $)Z.push(Y),Y.checksum&&Q.push(Y.checksum)}if(X){Array.isArray(X)||(X=[X]);for(let Y of X)Q.includes(Y.checksum)||Z.push(Y)}return Z},GF=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],wl=GF.reduce(($,X)=>($[X]=!0,$),{}),H6=($)=>typeof $=="object"&&Object.keys($).every((X)=>!isNaN(+X)),uG=($,X)=>H6($)&&H6(X)?Object.assign({},$,X):$&&!H6($)&&H6(X)?Object.assign({200:$},X):X??$,yQ=($,X)=>!$&&!X?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:uG($?.response,X?.response)},i8=($,X)=>{if(!X)return $??{};if(!$)return X??{};if(!Object.values(X).find((Q)=>Q!=null))return{...$};let Z={...$,...X,body:X.body??$.body,headers:X.headers??$.headers,params:X.params??$.params,query:X.query??$.query,cookie:X.cookie??$.cookie,response:uG($.response,X.response),type:$.type||X.type,detail:T$(X.detail??{},$.detail??{}),parse:Z$($.parse,X.parse),transform:Z$($.transform,X.transform),beforeHandle:Z$(Z$(C$($.resolve,"resolve"),$.beforeHandle),Z$(C$(X.resolve,"resolve"),X.beforeHandle)),afterHandle:Z$($.afterHandle,X.afterHandle),mapResponse:Z$($.mapResponse,X.mapResponse),afterResponse:Z$($.afterResponse,X.afterResponse),trace:Z$($.trace,X.trace),error:Z$($.error,X.error),standaloneSchema:$.standaloneSchema||X.standaloneSchema?$.standaloneSchema&&!X.standaloneSchema?$.standaloneSchema:X.standaloneSchema&&!$.standaloneSchema?X.standaloneSchema:[...$.standaloneSchema??[],...X.standaloneSchema??[]]:void 0};return Z.resolve&&delete Z.resolve,Z},MF=($)=>{$.parse&&!Array.isArray($.parse)&&($.parse=[$.parse]),$.transform&&!Array.isArray($.transform)&&($.transform=[$.transform]),$.afterHandle&&!Array.isArray($.afterHandle)&&($.afterHandle=[$.afterHandle]),$.mapResponse&&!Array.isArray($.mapResponse)&&($.mapResponse=[$.mapResponse]),$.afterResponse&&!Array.isArray($.afterResponse)&&($.afterResponse=[$.afterResponse]),$.trace&&!Array.isArray($.trace)&&($.trace=[$.trace]),$.error&&!Array.isArray($.error)&&($.error=[$.error]);let X=[];return $.resolve&&(X=C$(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve),$.beforeHandle&&(X.length?X=X.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]):X=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]),X.length&&($.beforeHandle=X),$},qF=typeof Bun<"u",Ol=qF&&typeof Bun.hash=="function",mQ=($)=>{let X=9;for(let Z=0;Z<$.length;)X=Math.imul(X^$.charCodeAt(Z++),387420489);return X=X^X>>>9},$Z=($,X)=>{if(!X)return;if(!Array.isArray(X)){let Q=X;return $&&!Q.checksum&&(Q.checksum=$),Q.scope==="scoped"&&(Q.scope="local"),Q}let Z=[...X];for(let Q of Z)$&&!Q.checksum&&(Q.checksum=$),Q.scope==="scoped"&&(Q.scope="local");return Z},wG=($,X,Z)=>({start:Z$($.start,$Z(Z,X?.start)),request:Z$($.request,$Z(Z,X?.request)),parse:Z$($.parse,$Z(Z,X?.parse)),transform:Z$($.transform,$Z(Z,X?.transform)),beforeHandle:Z$(Z$(C$($.resolve,"resolve"),$.beforeHandle),$Z(Z,Z$(C$(X?.resolve,"resolve"),X?.beforeHandle))),afterHandle:Z$($.afterHandle,$Z(Z,X?.afterHandle)),mapResponse:Z$($.mapResponse,$Z(Z,X?.mapResponse)),afterResponse:Z$($.afterResponse,$Z(Z,X?.afterResponse)),trace:Z$($.trace,$Z(Z,X?.trace)),error:Z$($.error,$Z(Z,X?.error)),stop:Z$($.stop,$Z(Z,X?.stop))}),BF=($,X,{skipIfHasType:Z=!1})=>{if(!$)return $;if(!Array.isArray($))return Z?$.scope??=X:$.scope=X,$;for(let Q of $)Z?Q.scope??=X:Q.scope=X;return $},H8=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let X=[];for(let Z of $)switch(Z.scope){case"global":case"scoped":X.push({...Z});break}return X},OG=($)=>({...$,type:$?.type,detail:$?.detail,parse:H8($?.parse),transform:H8($?.transform),beforeHandle:H8($?.beforeHandle),afterHandle:H8($?.afterHandle),mapResponse:H8($?.mapResponse),afterResponse:H8($?.afterResponse),error:H8($?.error),trace:H8($?.trace)}),nQ={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Enhance Your Calm":420,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},AG=Object.fromEntries(Object.entries(nQ).map(([$,X])=>[X,$]));function HF($){let X=$;for(;X.endsWith("=");)X=X.slice(0,-1);return X}var LG=new TextEncoder,A6=async($,X)=>{if(typeof $=="object"?$=JSON.stringify($):typeof $!="string"&&($=$+""),X===null)throw new TypeError("Secret key must be provided.");let Z=await crypto.subtle.importKey("raw",LG.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Z,LG.encode($));return $+"."+HF(Buffer.from(Q).toString("base64"))},KG=async($,X)=>{if(typeof $!="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=$.slice(0,$.lastIndexOf("."));return await A6(Z,X)===$?Z:!1},UF=($,X,Z)=>{if(!$.standaloneValidator?.length||!Array.isArray($.standaloneValidator)){$.standaloneValidator=[{[X]:Z}];return}let Q=$.standaloneValidator[$.standaloneValidator.length-1];X in Q?$.standaloneValidator.push({[X]:Z}):Q[X]=Z},DF=($)=>{if(typeof $=="number")return $;if($.length<16){if($.trim().length===0)return null;let X=Number($);return Number.isNaN(X)?null:X}if($.length===16){if($.trim().length===0)return null;let X=Number($);return Number.isNaN(X)||X.toString()!==$?null:X}return null},lG=($)=>DF($)!==null,NF=class{constructor($=console.error,X=()=>{}){this.onError=$,this.onFinally=X,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),this.promises.length===1&&this.then(this.onFinally),$}async drain(){for(;this.promises.length>0;){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}},C$=($,X)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $=="function"||typeof $=="string")return X?{fn:$,subType:X}:{fn:$};if("fn"in $)return $}let Z=[];for(let Q of $)typeof Q=="function"||typeof Q=="string"?Z.push(X?{fn:Q,subType:X}:{fn:Q}):("fn"in Q)&&Z.push(Q);return Z},jG=($)=>($.start&&($.start=C$($.start)),$.request&&($.request=C$($.request)),$.parse&&($.parse=C$($.parse)),$.transform&&($.transform=C$($.transform)),$.beforeHandle&&($.beforeHandle=C$($.beforeHandle)),$.afterHandle&&($.afterHandle=C$($.afterHandle)),$.mapResponse&&($.mapResponse=C$($.mapResponse)),$.afterResponse&&($.afterResponse=C$($.afterResponse)),$.trace&&($.trace=C$($.trace)),$.error&&($.error=C$($.error)),$.stop&&($.stop=C$($.stop)),$),FG=($)=>{let X=Object.create(null);return $.start?.map&&(X.start=$.start.map((Z)=>Z.fn)),$.request?.map&&(X.request=$.request.map((Z)=>Z.fn)),$.parse?.map&&(X.parse=$.parse.map((Z)=>Z.fn)),$.transform?.map&&(X.transform=$.transform.map((Z)=>Z.fn)),$.beforeHandle?.map&&(X.beforeHandle=$.beforeHandle.map((Z)=>Z.fn)),$.afterHandle?.map&&(X.afterHandle=$.afterHandle.map((Z)=>Z.fn)),$.mapResponse?.map&&(X.mapResponse=$.mapResponse.map((Z)=>Z.fn)),$.afterResponse?.map&&(X.afterResponse=$.afterResponse.map((Z)=>Z.fn)),$.error?.map&&(X.error=$.error.map((Z)=>Z.fn)),$.stop?.map&&(X.stop=$.stop.map((Z)=>Z.fn)),$.trace?.map?X.trace=$.trace.map((Z)=>Z.fn):X.trace=[],X},VG=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),S6=($,X=302)=>Response.redirect($,X),n8=Symbol("ElysiaFormData"),aQ=Symbol("ElysiaRequestId"),wF=($)=>{let X=new FormData;if(X[n8]={},$)for(let[Z,Q]of Object.entries($)){if(Array.isArray(Q)){X[n8][Z]=[];for(let Y of Q)Q instanceof File?X.append(Z,Q,Q.name):Q instanceof xJ?X.append(Z,Q.value,Q.value?.name):X.append(Z,Q),X[n8][Z].push(Q);continue}Q instanceof File?X.append(Z,Q,Q.name):Q instanceof xJ?X.append(Z,Q.value,Q.value?.name):X.append(Z,Q),X[n8][Z]=Q}return X},I6=typeof crypto>"u"?()=>{let $="",X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Z=X.length;for(let Q=0;Q<16;Q++)$+=X.charAt(Math.floor(Math.random()*Z));return $}:()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},OF=($)=>{if(!$.length)return[];let X=[];for(let Z=0;Z<$.length;Z++){let Q=$[Z];Q.checksum&&(X.includes(Q.checksum)&&($.splice(Z,1),Z--),X.push(Q.checksum))}return $},U8=($,X="scoped")=>{if($){if(X==="scoped"){for(let Z of $)"scope"in Z&&Z.scope==="local"&&(Z.scope="scoped");return}for(let Z of $)"scope"in Z&&(Z.scope="global")}},dQ=($)=>$.charCodeAt($.length-1)===47?$.slice(0,$.length-1):$+"/",l0=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},cQ=($,{dynamic:X=!1}={})=>{let Z=encodeURIComponent($).replace(/%2F/g,"/");return X&&(Z=Z.replace(/%3A/g,":").replace(/%3F/g,"?")),Z},pG=!!(typeof Bun>"u"||Bun.semver?.satisfies?.(Bun.version,">=1.2.14"));async function AF($){if($.bodyUsed||!$.body)return 0;let X=0,Z=$.body.getReader();for(;;){let{done:Q,value:Y}=await Z.read();if(Q)break;X+=Y.byteLength}return X}var LF={headers:!0,cookie:!0,query:!0,params:!0,body:!0,response:!0},CG=typeof Bun<"u"?Bun.env:typeof process<"u"?process?.env:void 0,L6=Symbol("ElysiaErrorCode"),N8=(CG?.NODE_ENV??CG?.ENV)==="production",KF={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0},l$=class{constructor($,X){let Z=X??($ in AG?AG[$]:$);this.code=nQ[$]??$,$ in KF?this.response=void 0:this.response=Z}},oQ=($,X)=>new l$($,X);var iG=class extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},jF=class extends Error{constructor($){super("Bad Request",{cause:$});this.code="PARSE",this.status=400}},PG=class extends Error{constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},g$=($)=>{if(!$)return{summary:void 0};let{message:X,path:Z,value:Q,type:Y}=$,J=Z.slice(1).replaceAll("/","."),W=Z==="";switch(Y){case 42:return{...$,summary:W?"Value should not be provided":`Property '${J}' should not be provided`};case 45:return{...$,summary:W?"Value is missing":`Property '${J}' is missing`};case 50:let z=X.indexOf("'"),G=X.slice(z+1,X.indexOf("'",z+1));return{...$,summary:W?"Value should be an email":`Property '${J}' should be ${G}`};case 54:return{...$,summary:`${X.slice(0,9).trim()} property '${J}' to be ${X.slice(8).trim()} but found: ${Q}`};case 62:let M=$.schema.anyOf.map((q)=>`'${q?.format??q.type}'`).join(", ");return{...$,summary:W?`Value should be one of ${M}`:`Property '${J}' should be one of: ${M}`};default:return{summary:X,...$}}},jJ=class $ extends Error{constructor(X,Z,Q=`"${X}" has invalid file type`){super(Q);this.property=X,this.expected=Z,this.message=Q,this.code="INVALID_FILE_TYPE",this.status=422,Object.setPrototypeOf(this,$.prototype)}toResponse(X){return N8?new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...X,"content-type":"application/json"}}):new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...X,"content-type":"application/json"}})}},R0=class $ extends Error{constructor(X,Z,Q,Y){let J="",W,z,G;if(Z?.provider==="standard"||"~standard"in Z||Z.schema&&"~standard"in Z.schema){let M=("~standard"in Z?Z:Z.schema)["~standard"];W=(Y??M.validate(Q).issues)?.[0],N8?J=JSON.stringify({type:"validation",on:X,found:Q}):J=JSON.stringify({type:"validation",on:X,property:W.path?.[0]||"root",message:W?.message,summary:W?.problem,expected:z,found:Q,errors:Y},null,2),G=W?.message}else{Q&&typeof Q=="object"&&Q instanceof l$&&(Q=Q.response),W=Y?.First()??("Errors"in Z?Z.Errors(Q).First():I0.Errors(Z,Q).First());let M=W?.path||"root",q=Z?.schema??Z;if(!N8)try{z=I0.Create(q)}catch(B){z={type:"Could not create expected value",message:B?.message,error:B}}G=W?.schema?.message||W?.schema?.error!==void 0?typeof W.schema.error=="function"?W.schema.error(N8?{type:"validation",on:X,found:Q}:{type:"validation",on:X,value:Q,property:M,message:W?.message,summary:g$(W).summary,found:Q,expected:z,errors:"Errors"in Z?[...Z.Errors(Q)].map(g$):[...I0.Errors(Z,Q)].map(g$)},Z):W.schema.error:void 0,G!==void 0?J=typeof G=="object"?JSON.stringify(G):G+"":N8?J=JSON.stringify({type:"validation",on:X,found:Q}):J=JSON.stringify({type:"validation",on:X,property:M,message:W?.message,summary:g$(W).summary,expected:z,found:Q,errors:"Errors"in Z?[...Z.Errors(Q)].map(g$):[...I0.Errors(Z,Q)].map(g$)},null,2)}super(J);this.type=X,this.validator=Z,this.value=Q,this.code="VALIDATION",this.status=422,this.valueError=W,this.expected=z,this.customError=G,Object.setPrototypeOf(this,$.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(g$):[...I0.Errors(this.validator,this.value)].map(g$)}static simplifyModel(X){let Z="schema"in X?X.schema:X;try{return I0.Create(Z)}catch{return Z}}get model(){return"~standard"in this.validator?this.validator:$.simplifyModel(this.validator)}toResponse(X){return new Response(this.message,{status:400,headers:{...X,"content-type":"application/json"}})}detail(X){if(!this.customError)return this.message;let Z=this.validator,Q=this.value,Y=this.expected,J=this.all;return N8?{type:"validation",on:this.type,found:Q,message:X}:{type:"validation",on:this.type,property:this.valueError?.path||"root",message:X,summary:g$(this.valueError).summary,found:Q,expected:Y,errors:J}}},hQ=($,X)=>{try{return JSON.parse($)}catch{throw new R0("property",X,$)}};function eQ($,X){return j$.Has($)||j$.Set($,X),(Z={})=>aY({...Z,[j]:$})}var mZ=($)=>{try{let X=eX.Compile($);return X.Create=()=>I0.Create($),X.Error=(Z)=>new R0("property",$,Z,X.Errors(Z)),X}catch{return{Check:(X)=>I0.Check($,X),CheckThrow:(X)=>{if(!I0.Check($,X))throw new R0("property",$,X,I0.Errors($,X))},Decode:(X)=>I0.Decode($,X),Create:()=>I0.Create($),Error:(X)=>new R0("property",$,X,I0.Errors($,X))}}},SG=($)=>{if(typeof $=="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},K6=($,X)=>$.startsWith(X)?!0:X.charCodeAt(X.length-1)===42&&X.charCodeAt(X.length-2)===47&&$.startsWith(X.slice(0,-1)),IG=!1,FF=()=>{IG||(console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),IG=!0)},cJ=async()=>Promise.resolve().then(() => x8(GG(),1)).then(($)=>(j6=$.fileTypeFromBlob,j6)).catch(FF),j6,VF=($)=>j6?j6($):cJ().then((X)=>{if(X)return X($)}),nG=async($,X,Z=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((Y)=>nG(Y,X,Z))),!0;if(!$)return!1;let Q=await VF($);if(!Q)throw new jJ(Z,X);if(typeof X=="string"&&!K6(Q.mime,X))throw new jJ(Z,X);for(let Y=0;Y<X.length;Y++)if(K6(Q.mime,X[Y]))return!0;throw new jJ(Z,X)},fJ=($,X)=>{if(X instanceof xJ)return!0;if(!(X instanceof Blob)||$.minSize&&X.size<SG($.minSize)||$.maxSize&&X.size>SG($.maxSize))return!1;if($.extension){if(typeof $.extension=="string")return K6(X.type,$.extension);for(let Z=0;Z<$.extension.length;Z++)if(K6(X.type,$.extension[Z]))return!0;return!1}return!0};var C=Object.assign({},iX);eQ("UnionEnum",($,X)=>(typeof X=="number"||typeof X=="string"||X===null)&&$.enum.includes(X));eQ("ArrayBuffer",($,X)=>X instanceof ArrayBuffer);var CF=eQ("Files",($,X)=>{if($.minItems&&$.minItems>1&&!Array.isArray(X))return!1;if(!Array.isArray(X))return fJ($,X);if($.minItems&&X.length<$.minItems||$.maxItems&&X.length>$.maxItems)return!1;for(let Z=0;Z<X.length;Z++)if(!fJ($,X[Z]))return!1;return!0}),PF=eQ("ElysiaForm",({compiler:$,...X},Z)=>{if(!(Z instanceof FormData))return!1;if($){if(!(n8 in Z))throw new R0("property",X,Z);if(!$.Check(Z[n8]))throw $.Error(Z[n8])}return!0}),f$={String:($)=>iX.String($),Numeric:($)=>{let X=iX.Number($),Z=mZ(X);return C.Transform(C.Union([C.String({format:"numeric",default:0}),C.Number($)],$)).Decode((Q)=>{let Y=+Q;if(isNaN(Y))return Q;if($&&!Z.Check(Y))throw Z.Error(Y);return Y}).Encode((Q)=>Q)},Integer:($)=>{let X=iX.Integer($),Z=mZ(X);return C.Transform(C.Union([C.String({format:"integer",default:0}),iX.Integer($)],$)).Decode((Q)=>{let Y=+Q;if(!Z.Check(Y))throw Z.Error(Y);return Y}).Encode((Q)=>Q)},Date:($)=>{let X=iX.Date($),Z=mZ(X),Q=$?.default?new Date($.default):void 0;return C.Transform(C.Union([iX.Date($),C.String({format:"date-time",default:Q?.toISOString()}),C.String({format:"date",default:Q?.toISOString()}),C.Number({default:Q?.getTime()})],$)).Decode((Y)=>{if(typeof Y=="number"){let W=new Date(Y);if(!Z.Check(W))throw Z.Error(W);return W}if(Y instanceof Date)return Y;let J=new Date(bJ(Y));if(!J||isNaN(J.getTime()))throw new R0("property",X,J);if(!Z.Check(J))throw Z.Error(J);return J}).Encode((Y)=>{if(Y instanceof Date)return Y.toISOString();if(typeof Y=="string"){if(isNaN(new Date(bJ(Y)).getTime()))throw new R0("property",X,Y);return Y}if(!Z.Check(Y))throw Z.Error(Y);return Y})},BooleanString:($)=>{let X=iX.Boolean($),Z=mZ(X);return C.Transform(C.Union([C.Boolean($),C.String({format:"boolean",default:!1})],$)).Decode((Q)=>{if(typeof Q=="string")return Q==="true";if(Q!==void 0&&!Z.Check(Q))throw Z.Error(Q);return Q}).Encode((Q)=>Q)},ObjectString:($,X)=>{let Z=C.Object($,X),Q=mZ(Z);return C.Transform(C.Union([C.String({format:"ObjectString",default:"{}"}),Z],{elysiaMeta:"ObjectString"})).Decode((Y)=>{if(typeof Y=="string"){if(Y.charCodeAt(0)!==123)throw new R0("property",Z,Y);if(!Q.Check(Y=hQ(Y,Z)))throw Q.Error(Y);return Q.Decode(Y)}return Y}).Encode((Y)=>{let J;if(typeof Y=="string"&&(Y=hQ(J=Y,Z)),!Q.Check(Y))throw Q.Error(Y);return J??JSON.stringify(Y)})},ArrayString:($=C.String(),X)=>{let Z=C.Array($,X),Q=mZ(Z),Y=(J,W=!1)=>{if(J.charCodeAt(0)===91){if(!Q.Check(J=hQ(J,Z)))throw Q.Error(J);return Q.Decode(J)}if(W)return J;throw new R0("property",Z,J)};return C.Transform(C.Union([C.String({format:"ArrayString",default:X?.default}),Z])).Decode((J)=>{if(Array.isArray(J)){let W=[];for(let z=0;z<J.length;z++){let G=J[z];if(typeof G=="string"){let M=Y(G,!0);Array.isArray(M)?W=W.concat(M):W.push(M);continue}W.push(G)}return W}return typeof J=="string"?Y(J):J}).Encode((J)=>{let W;if(typeof J=="string"&&(J=hQ(W=J,Z)),!Q.Check(J))throw new R0("property",Z,J);return W??JSON.stringify(J)})},ArrayQuery:($=C.String(),X)=>{let Z=C.Array($,X),Q=mZ(Z),Y=(J)=>J.indexOf(",")!==-1?Q.Decode(J.split(",")):[J];return C.Transform(C.Union([C.String({default:X?.default}),Z],{elysiaMeta:"ArrayQuery"})).Decode((J)=>{if(Array.isArray(J)){let W=[];for(let z=0;z<J.length;z++){let G=J[z];if(typeof G=="string"){let M=Y(G);Array.isArray(M)?W=W.concat(M):W.push(M);continue}W.push(G)}return W}return typeof J=="string"?Y(J):J}).Encode((J)=>{let W;if(typeof J=="string"&&(J=hQ(W=J,Z)),!Q.Check(J))throw new R0("property",Z,J);return W??JSON.stringify(J)})},File:eQ("File",fJ),Files:($={})=>C.Transform(CF($)).Decode((X)=>Array.isArray(X)?X:[X]).Encode((X)=>X),Nullable:($,X)=>C.Union([$,C.Null()],{...X,nullable:!0}),MaybeEmpty:($,X)=>C.Union([$,C.Null(),C.Undefined()],X),Cookie:($,{domain:X,expires:Z,httpOnly:Q,maxAge:Y,path:J,priority:W,sameSite:z,secure:G,secrets:M,sign:q,...B}={})=>{let w=C.Object($,B);return w.config={domain:X,expires:Z,httpOnly:Q,maxAge:Y,path:J,priority:W,sameSite:z,secure:G,secrets:M,sign:q},w},UnionEnum:($,X={})=>{let Z=$.every((Q)=>typeof Q=="string")?{type:"string"}:$.every((Q)=>typeof Q=="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q=="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...X,[j]:"UnionEnum",...Z,enum:$}},NoValidate:($,X=!0)=>($.noValidate=X,$),Form:($,X={})=>{let Z=C.Object($,{default:wF({}),...X}),Q=mZ(Z);return C.Union([Z,PF({compiler:Q})])},ArrayBuffer($={}){return{default:[1,2,3],...$,[j]:"ArrayBuffer"}},Uint8Array:($)=>{let X=iX.Uint8Array($),Z=mZ(X);return C.Transform(C.Union([C.ArrayBuffer(),iX.Uint8Array($)])).Decode((Q)=>{if(Q instanceof ArrayBuffer){if(!Z.Check(Q=new Uint8Array(Q)))throw Z.Error(Q);return Q}return Q}).Encode((Q)=>Q)}};C.BooleanString=f$.BooleanString;C.ObjectString=f$.ObjectString;C.ArrayString=f$.ArrayString;C.ArrayQuery=f$.ArrayQuery;C.Numeric=f$.Numeric;C.Integer=f$.Integer;C.File=($)=>($?.type&&cJ(),f$.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"}));C.Files=($)=>($?.type&&cJ(),f$.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}}));C.Nullable=f$.Nullable;C.MaybeEmpty=f$.MaybeEmpty;C.Cookie=f$.Cookie;C.Date=f$.Date;C.UnionEnum=f$.UnionEnum;C.NoValidate=f$.NoValidate;C.Form=f$.Form;C.ArrayBuffer=f$.ArrayBuffer;C.Uint8Array=f$.Uint8Array;var L8=class{constructor($,X,Z={}){this.name=$,this.jar=X,this.initial=Z}get cookie(){return this.jar[this.name]??this.initial}set cookie($){this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]=$}get setCookie(){return this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $=="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $=="function"?$(this.cookie):$),this}remove(){if(this.value!==void 0)return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value=="object"?JSON.stringify(this.value):this.value?.toString()??""}},RG=($,X,Z)=>($.cookie||($.cookie={}),new Proxy(X,{get(Q,Y){return Y in X?new L8(Y,$.cookie,Object.assign({},Z??{},X[Y])):new L8(Y,$.cookie,Object.assign({},Z))}})),rG=async($,X,{secrets:Z,sign:Q,...Y}={})=>{if(!X)return RG($,{},Y);let J=typeof Z=="string";Q&&Q!==!0&&!Array.isArray(Q)&&(Q=[Q]);let W={},z=R6.parse(X);for(let[G,M]of Object.entries(z)){if(M===void 0)continue;let q=oG.default(M);if(q){let B=q.charCodeAt(0),w=q.charCodeAt(q.length-1);if(B===123&&w===125||B===91&&w===93)try{q=JSON.parse(q)}catch{}}if(Q===!0||Q?.includes(G)){if(!Z)throw new Error("No secret is provided to cookie plugin");if(J){let B=await KG(q,Z);if(B===!1)throw new PG(G);q=B}else{let B=!0;for(let w=0;w<Z.length;w++){let H=await KG(q,Z[w]);if(H!==!1){B=!0,q=H;break}}if(!B)throw new PG(G)}}W[G]={value:q}}return RG($,W,Y)},sG=($)=>{if(!$||!l0($))return;let X=[];for(let[Z,Q]of Object.entries($)){if(!Z||!Q)continue;let Y=Q.value;Y!=null&&X.push(R6.serialize(Z,typeof Y=="object"?JSON.stringify(Y):Y+"",Q))}if(X.length!==0)return X.length===1?X[0]:X},Q$=($,X)=>{if(!u9&&$ instanceof Promise)return $.then((J)=>Q$(J,X));let Z=$.size,Q=X&&(X.status===206||X.status===304||X.status===412||X.status===416),Y=Q?{"transfer-encoding":"chunked"}:{"accept-ranges":"bytes","content-range":Z?`bytes 0-${Z-1}/${Z}`:void 0,"transfer-encoding":"chunked"};if(!X&&!Z)return new Response($);if(!X)return new Response($,{headers:Y});if(X.headers instanceof Headers){for(let J of Object.keys(Y))J in X.headers&&X.headers.append(J,Y[J]);return Q&&(X.headers.delete("content-length"),X.headers.delete("accept-ranges")),new Response($,X)}return l0(X.headers)?new Response($,{status:X.status,headers:Object.assign(Y,X.headers)}):new Response($,{status:X.status,headers:Y})},tG=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Z=0;Z<X.length;Z++){let Q=X[Z].indexOf("=");$.append("set-cookie",`${X[Z].slice(0,Q)}=${X[Z].slice(Q+1)||""}`)}return $},EG=($,X)=>{if(X?.headers){if($)if(kJ)Object.assign(X.headers,$.headers.toJSON());else for(let[Z,Q]of $.headers.entries())Z in X.headers&&(X.headers[Z]=Q);return X.status===200&&(X.status=$.status),X.headers["content-encoding"]&&delete X.headers["content-encoding"],X}if(!$)return{headers:{},status:X?.status??200};if(kJ)return X={headers:$.headers.toJSON(),status:X?.status??200},X.headers["content-encoding"]&&delete X.headers["content-encoding"],X;X={headers:{},status:X?.status??200};for(let[Z,Q]of $.headers.entries())Z!=="content-encoding"&&Z in X.headers&&(X.headers[Z]=Q);return X},uJ=({mapResponse:$,mapCompactResponse:X})=>async(Z,Q,Y)=>{let J=Z.next?.();if(Q&&$Y(Q),J instanceof Promise&&(J=await J),J?.value instanceof ReadableStream)Z=J.value;else if(J&&(typeof J?.done>"u"||J?.done))return Q?$(J.value,Q,Y):X(J.value,Y);let W=J?.value?.sse??Z?.sse??Q?.headers["content-type"]?.startsWith("text/event-stream"),z=W?(M)=>`data: ${M}

`:(M)=>M,G=W?"text/event-stream":J?.value&&typeof J?.value=="object"?"application/json":"text/plain";return Q?.headers?(Q.headers["transfer-encoding"]||(Q.headers["transfer-encoding"]="chunked"),Q.headers["content-type"]||(Q.headers["content-type"]=G),Q.headers["cache-control"]||(Q.headers["cache-control"]="no-cache")):Q={status:200,headers:{"content-type":G,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}},new Response(new ReadableStream({async start(M){let q=!1;if(Y?.signal?.addEventListener("abort",()=>{q=!0;try{M.close()}catch{}}),!(!J||J.value instanceof ReadableStream)){if(J.value!==void 0&&J.value!==null)if(J.value.toSSE)M.enqueue(J.value.toSSE());else if(typeof J.value=="object")try{M.enqueue(z(JSON.stringify(J.value)))}catch{M.enqueue(z(J.value.toString()))}else M.enqueue(z(J.value.toString()))}try{for await(let B of Z){if(q)break;if(B!=null)if(B.toSSE)M.enqueue(B.toSSE());else{if(typeof B=="object")try{M.enqueue(z(JSON.stringify(B)))}catch{M.enqueue(z(B.toString()))}else M.enqueue(z(B.toString()));W||await new Promise((w)=>setTimeout(()=>w(),0))}}}catch(B){console.warn(B)}try{M.close()}catch{}}}),Q)};async function*TG($){let X=$.body;if(!X)return;let Z=X.getReader(),Q=new TextDecoder;try{for(;;){let{done:Y,value:J}=await Z.read();if(Y)break;typeof J=="string"?yield J:yield Q.decode(J)}}finally{Z.releaseLock()}}var $Y=($)=>{if(typeof $.status=="string"&&($.status=nQ[$.status]),$.cookie&&l0($.cookie)){let X=sG($.cookie);X&&($.headers["set-cookie"]=X)}$.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"])&&($.headers=tG(new Headers($.headers),$.headers["set-cookie"]))},aG=($)=>{let X=uJ($);return(Z,Q,Y)=>{let J=!1;if(Q.headers instanceof Headers)for(let z of Q.headers.keys())if(z==="set-cookie"){if(J)continue;J=!0;for(let G of Q.headers.getSetCookie())Z.headers.append("set-cookie",G)}else Z.headers.append(z,Q.headers?.get(z)??"");else for(let z in Q.headers)Z.headers.append(z,Q.headers[z]);let W=Q.status??200;return Z.status!==W&&W!==200&&(Z.status<=300||Z.status>400)?Z.text().then((z)=>{let G=new Response(z,{headers:Z.headers,status:Q.status});return!G.headers.has("content-length")&&G.headers.get("transfer-encoding")==="chunked"?X(TG(G),EG(G,Q),Y):G}):!Z.headers.has("content-length")&&Z.headers.get("transfer-encoding")==="chunked"?X(TG(Z),EG(Z,Q),Y):Z}},F6=($,X={headers:{}})=>{let Z=$.path,Q=cG[Z.slice(Z.lastIndexOf(".")+1)];return Q&&(X.headers["content-type"]=Q),$.stats&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416?$.stats.then((Y)=>{let J=Y.size;return J!==void 0&&(X.headers["content-range"]=`bytes 0-${J-1}/${J}`,X.headers["content-length"]=J),Q$($.value,X)}):Q$($.value,X)},zX=($,X,Z)=>{if(l0(X.headers)||X.status!==200||X.cookie)switch($Y(X),$?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return F6($,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,zX($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),X):new Response("",X);case"Response":return V6($,X,Z);case"Error":return w8($,X);case"Promise":return $.then((Q)=>zX(Q,X,Z));case"Function":return zX($(),X,Z);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return V6($,X,Z);if($ instanceof Promise)return $.then((Q)=>zX(Q,X));if($ instanceof Error)return w8($,X);if($ instanceof l$)return X.status=$.code,zX($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return rQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>zX(Q,X));if(typeof $?.toResponse=="function")return zX($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($,X)}return typeof $?.next=="function"||$ instanceof ReadableStream?rQ($,X,Z):uZ($,Z)},WX=($,X,Z)=>{if($!=null)if(l0(X.headers)||X.status!==200||X.cookie)switch($Y(X),$?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return F6($,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,WX($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),X):void 0;case"Response":return V6($,X,Z);case"Promise":return $.then((Q)=>WX(Q,X));case"Error":return w8($,X);case"Function":return WX($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);default:if($ instanceof Response)return V6($,X,Z);if($ instanceof Promise)return $.then((Q)=>WX(Q,X));if($ instanceof Error)return w8($,X);if($ instanceof l$)return X.status=$.code,WX($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return rQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>WX(Q,X));if(typeof $?.toResponse=="function")return WX($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($,X)}else switch($?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return F6($,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,WX($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((Q)=>{let Y=WX(Q,X);if(Y!==void 0)return Y});case"Error":return w8($,X);case"Function":return uZ($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>WX(Q,X));if($ instanceof Error)return w8($,X);if($ instanceof l$)return X.status=$.code,WX($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return rQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>WX(Q,X));if(typeof $?.toResponse=="function")return WX($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($)}},uZ=($,X)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return F6($);case"File":return Q$($);case"Blob":return Q$($);case"ElysiaCustomStatusResponse":return zX($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return w8($);case"Promise":return $.then((Z)=>uZ(Z,X));case"Function":return uZ($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Z)=>uZ(Z,X));if($ instanceof Error)return w8($);if($ instanceof l$)return zX($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return rQ($,void 0,X);if(typeof $?.then=="function")return $.then((Z)=>zX(Z,set));if(typeof $?.toResponse=="function")return uZ($.toResponse());if("charCodeAt"in $){let Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},w8=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),SF=($,X,Z={})=>{if(typeof $=="function")return;let Q=zX($,{headers:Z});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length)return()=>Q.clone()},V6=aG({mapResponse:zX,mapCompactResponse:uZ}),rQ=uJ({mapResponse:zX,mapCompactResponse:uZ}),c9={name:"web-standard",isWebStandard:!0,handler:{mapResponse:zX,mapEarlyResponse:WX,mapCompactResponse:uZ,createStaticHandler:SF},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){return $?`try{c.body=await c.request.json()}catch{}
`:`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let X=`
c.body={}
`;return $?X+="let form;try{form=await c.request.formData()}catch{}":X+=`const form=await c.request.formData()
`,X+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},async stop($,X){if(!$.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if($.server&&($.server.stop(X),$.server=null,$.event.stop?.length))for(let Z=0;Z<$.event.stop.length;Z++)$.event.stop[Z].fn($)},composeGeneralHandler:{parameters:"r",createContext($){let X="",Z="",Q=$.setHeaders;for(let W of Object.keys($.decorator))X+=`,'${W}':decorator['${W}']`;let Y=$.config.handler?.standardHostname??!0,J=!!$.event.trace?.length;return Z+=`const u=r.url,s=u.indexOf('/',${Y?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,J&&(Z+=`const id=randomId()
`),Z+="const c={request:r,store,qi,path:p,url:u,redirect,status,set:{headers:",Z+=Object.keys(Q??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",Z+=",status:200}",$.inference.server&&(Z+=",get server(){return app.getServer()}"),J&&(Z+=",[ELYSIA_REQUEST_ID]:id"),Z+=X,Z+=`}
`,Z},error404($,X,Z=""){let Q="if(route===null){"+Z+`
return `;return X?Q+=`app.handleError(c,notFound,false,${this.parameters})`:Q+=$?"new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"error404.clone()",Q+="}",{declare:X?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:Q}}},composeError:{mapResponseContext:"",validationError:"return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})",unknownError:"return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})"},listen(){return()=>{throw new Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}};function IF(){try{if(typeof caches<"u"&&typeof caches.default<"u"||typeof WebSocketPair<"u")return!0}catch{return!1}return!1}var Al={...c9,name:"cloudflare-worker",composeGeneralHandler:{...c9.composeGeneralHandler,error404($,X,Z){let{code:Q}=c9.composeGeneralHandler.error404($,X,Z);return{code:Q,declare:X?"":`const error404Message=notFound.message.toString()
const error404={clone:()=>new Response(error404Message,{status:404})}
`}}},beforeCompile($){for(let X of $.routes)X.compile()},listen($){return(X,Z)=>{console.warn("Cloudflare Worker does not support listen method. Please export default Elysia instance instead."),$.compile()}}},RF=($)=>{$.startsWith("async")&&($=$.slice(5)),$=$.trimStart();let X=-1;if($.charCodeAt(0)===40&&(X=$.indexOf("=>",$.indexOf(")")),X!==-1)){let Y=X;for(;Y>0&&$.charCodeAt(--Y)!==41;);let J=$.slice(X+2);return J.charCodeAt(0)===32&&(J=J.trimStart()),[$.slice(1,Y),J,{isArrowReturn:J.charCodeAt(0)!==123}]}if(/^(\w+)=>/g.test($)&&(X=$.indexOf("=>"),X!==-1)){let Y=$.slice(X+2);return Y.charCodeAt(0)===32&&(Y=Y.trimStart()),[$.slice(0,X),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}if($.startsWith("function")){X=$.indexOf("(");let Y=$.indexOf(")");return[$.slice(X+1,Y),$.slice(Y+2),{isArrowReturn:!1}]}let Z=$.indexOf("(");if(Z!==-1){let Y=$.indexOf(`
`,2),J=$.slice(0,Y),W=J.lastIndexOf(")")+1,z=$.slice(Y+1);return[J.slice(Z,W),"{"+z,{isArrowReturn:!1}]}let Q=$.split(`
`,2);return[Q[0],Q[1],{isArrowReturn:!1}]},EF=($)=>{let X=$.indexOf("{");if(X===-1)return[-1,0];let Z=X+1,Q=1;for(;Z<$.length;Z++){let Y=$.charCodeAt(Z);if(Y===123?Q++:Y===125&&Q--,Q===0)break}return Q!==0?[0,$.length]:[X,Z+1]},TF=($)=>{let X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Z=X-1,Q=1;for(;Z>=0;Z--){let Y=$.charCodeAt(Z);if(Y===125?Q++:Y===123&&Q--,Q===0)break}return Q!==0?[-1,0]:[Z,X+1]},eG=($)=>{for(;;){let X=$.indexOf(":");if(X===-1)break;let Z=$.indexOf(",",X);Z===-1&&(Z=$.indexOf("}",X)-1),Z===-2&&(Z=$.length),$=$.slice(0,X)+$.slice(Z)}return $},$4=($)=>{let X=!1;$.charCodeAt(0)===40&&($=$.slice(1,-1)),$.charCodeAt(0)===123&&(X=!0,$=$.slice(1,-1)),$=$.replace(/( |\t|\n)/g,"").trim();let Z=[];for(;;){let[Y,J]=EF($);if(Y===-1)break;Z.push($.slice(0,Y-1)),$.charCodeAt(J)===44&&J++,$=$.slice(J)}$=eG($),$&&(Z=Z.concat($.split(",")));let Q=Object.create(null);for(let Y of Z){if(Y.indexOf(",")===-1){Q[Y]=!0;continue}for(let J of Y.split(","))Q[J.trim()]=!0}return{hasParenthesis:X,parameters:Q}},_F=($,X)=>{let{parameters:Z,hasParenthesis:Q}=$4($);return Z.query&&(X.query=!0),Z.headers&&(X.headers=!0),Z.body&&(X.body=!0),Z.cookie&&(X.cookie=!0),Z.set&&(X.set=!0),Z.server&&(X.server=!0),Z.route&&(X.route=!0),Z.url&&(X.url=!0),Z.path&&(X.path=!0),Q?`{ ${Object.keys(Z).join(", ")} }`:Object.keys(Z).join(", ")},_G=($,X,Z)=>{let Q=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);Z!==void 0&&(Q.lastIndex=Z);let Y=Q.exec(X);return Y?Y.index:-1},X4=($,X,Z=0)=>{if(Z>5)return[];let Q=[],Y=X;for(;;){let J=_G(" = "+$,Y);if(J===-1&&(J=_G("="+$,Y)),J===-1){let M=Y.indexOf(" = "+$);if(M===-1&&(M=Y.indexOf("="+$)),M+3+$.length!==Y.length)break;J=M}let W=Y.slice(0,J),z=W.lastIndexOf(" "),G=W.slice(z!==-1?z+1:-1);if(G==="}"){let[M,q]=TF(W);Q.push(eG(Y.slice(M,q))),Y=Y.slice(J+3+$.length);continue}for(;G.charCodeAt(0)===44;)G=G.slice(1);for(;G.charCodeAt(0)===9;)G=G.slice(1);G.includes("(")||Q.push(G),Y=Y.slice(J+3+$.length)}for(let J of Q){if(J.charCodeAt(0)===123)continue;let W=X4(J,X);W.length>0&&Q.push(...W)}return Q},bF=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(","))return $.indexOf("...")!==-1?$.slice($.indexOf("...")+3):void 0;let X=$.indexOf("...");if(X!==-1)return $.slice(X+3).trimEnd()},xF=($,X,Z)=>{let Q=(Y,J)=>new RegExp(`${J}\\.(${Y})|${J}\\["${Y}"\\]|${J}\\['${Y}'\\]`).test($);for(let Y of X)if(Y){if(Y.charCodeAt(0)===123){let J=$4(Y).parameters;J.query&&(Z.query=!0),J.headers&&(Z.headers=!0),J.body&&(Z.body=!0),J.cookie&&(Z.cookie=!0),J.set&&(Z.set=!0),J.server&&(Z.server=!0),J.url&&(Z.url=!0),J.route&&(Z.route=!0),J.path&&(Z.path=!0);continue}if(!Z.query&&(Q("query",Y)||$.includes("return "+Y)||$.includes("return "+Y+".query"))&&(Z.query=!0),!Z.headers&&Q("headers",Y)&&(Z.headers=!0),!Z.body&&Q("body",Y)&&(Z.body=!0),!Z.cookie&&Q("cookie",Y)&&(Z.cookie=!0),!Z.set&&Q("set",Y)&&(Z.set=!0),!Z.server&&Q("server",Y)&&(Z.server=!0),!Z.route&&Q("route",Y)&&(Z.route=!0),!Z.url&&Q("url",Y)&&(Z.url=!0),!Z.path&&Q("path",Y)&&(Z.path=!0),Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server&&Z.route&&Z.url&&Z.path)break}return X},kF=($,X,Z)=>{try{let Q=new RegExp(`\\w\\((.*?)?${$}`,"gs");Q.test(X);let Y=X.charCodeAt(Q.lastIndex);return Y===41||Y===44?(Z.query=!0,Z.headers=!0,Z.body=!0,Z.cookie=!0,Z.set=!0,Z.server=!0,Z.url=!0,Z.route=!0,Z.path=!0,!0):!1}catch{return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(X),console.log("--- context ---"),console.log($),!0}},U6,w6={},gF=($)=>{$===null||IF()||($===void 0&&($=295000),U6&&clearTimeout(U6),U6=setTimeout(()=>{w6={},U6=void 0,u9&&Bun.gc(!1)},$))},vJ=($,X)=>({body:$.body||X.body,cookie:$.cookie||X.cookie,headers:$.headers||X.headers,query:$.query||X.query,set:$.set||X.set,server:$.server||X.server,url:$.url||X.url,route:$.route||X.route,path:$.path||X.path}),C6=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},Z={})=>{let Q=[];$.request?.length&&Q.push(...$.request),$.beforeHandle?.length&&Q.push(...$.beforeHandle),$.parse?.length&&Q.push(...$.parse),$.error?.length&&Q.push(...$.error),$.transform?.length&&Q.push(...$.transform),$.afterHandle?.length&&Q.push(...$.afterHandle),$.mapResponse?.length&&Q.push(...$.mapResponse),$.afterResponse?.length&&Q.push(...$.afterResponse),$.handler&&typeof $.handler=="function"&&Q.push($.handler);for(let Y=0;Y<Q.length;Y++){let J=Q[Y];if(!J)continue;let W=typeof J=="object"?J.fn:J;if(typeof W!="function")continue;let z=W.toString(),G=mQ(z),M=w6[G];if(M){X=vJ(X,M);continue}gF(Z.gcTime);let q={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[B,w]=RF(z),H=_F(B,q),U=bF(H);if(U){let O=X4(U,w.slice(1,-1));O.splice(0,-1,U);let F=w;F.charCodeAt(0)===123&&F.charCodeAt(w.length-1)===125&&(F=F.slice(1,-1)),kF(U,F,q)||xF(F,O,q),!q.query&&F.includes("return "+U+".query")&&(q.query=!0)}if(w6[G]||(w6[G]=q),X=vJ(X,q),X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server&&X.url&&X.route&&X.path)break}return X},r$=($,X,Z)=>{if(l0(X.headers)||X.status!==200||X.cookie)switch($Y(X),$?.constructor?.name){case"String":return new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return Q$($.value,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,r$($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),X):new Response("",X);case"Response":return P6($,X,Z);case"Error":return O8($,X);case"Promise":return $.then((Q)=>r$(Q,X,Z));case"Function":return r$($(),X,Z);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return P6($,X,Z);if($ instanceof Promise)return $.then((Q)=>r$(Q,X));if($ instanceof Error)return O8($,X);if($ instanceof l$)return X.status=$.code,r$($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return sQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>r$(Q,X));if(typeof $?.toResponse=="function")return r$($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($,X)}return typeof $?.next=="function"||$ instanceof ReadableStream?sQ($,X,Z):lZ($,Z)},o$=($,X,Z)=>{if($!=null)if(l0(X.headers)||X.status!==200||X.cookie)switch($Y(X),$?.constructor?.name){case"String":return new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return Q$($.value,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,o$($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),X):void 0;case"Response":return P6($,X,Z);case"Promise":return $.then((Q)=>o$(Q,X));case"Error":return O8($,X);case"Function":return o$($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);default:if($ instanceof Response)return P6($,X,Z);if($ instanceof Promise)return $.then((Q)=>o$(Q,X));if($ instanceof Error)return O8($,X);if($ instanceof l$)return X.status=$.code,o$($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return sQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>o$(Q,X));if(typeof $?.toResponse=="function")return o$($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($,X)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return Q$($.value,X);case"File":return Q$($,X);case"Blob":return Q$($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,o$($.response,X,Z);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((Q)=>{let Y=o$(Q,X);if(Y!==void 0)return Y});case"Error":return O8($,X);case"Function":return lZ($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof L8?new Response($.value,X):new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>o$(Q,X));if($ instanceof Error)return O8($,X);if($ instanceof l$)return X.status=$.code,o$($.response,X,Z);if(typeof $?.next=="function"||$ instanceof ReadableStream)return sQ($,X,Z);if(typeof $?.then=="function")return $.then((Q)=>o$(Q,X));if(typeof $?.toResponse=="function")return o$($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91)return X.headers["Content-Type"]||(X.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),X)}return new Response($)}},lZ=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return Q$($.value);case"File":return Q$($);case"Blob":return Q$($);case"ElysiaCustomStatusResponse":return r$($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return O8($);case"Promise":return $.then((Z)=>lZ(Z,X));case"Function":return lZ($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Z)=>lZ(Z,X));if($ instanceof Error)return O8($);if($ instanceof l$)return r$($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return sQ($,void 0,X);if(typeof $?.then=="function")return $.then((Z)=>r$(Z,set));if(typeof $?.toResponse=="function")return lZ($.toResponse());if("charCodeAt"in $){let Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},O8=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),fF=($,X,Z={})=>{if(typeof $=="function")return;let Q=r$($,{headers:Z});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length)return()=>Q.clone()},P6=aG({mapResponse:r$,mapCompactResponse:lZ}),sQ=uJ({mapResponse:r$,mapCompactResponse:lZ}),l9=1,p9=2,i9=4,pZ=8;function Q4($,X=0,Z,Q){let Y=Object.create(null),J=0,W=$.length,z=X-1,G=z;for(let q=0;q<W;q++)switch($.charCodeAt(q)){case 38:M($,q),z=q,G=q,J=0;break;case 61:G<=z?G=q:J|=pZ;break;case 43:G>z?J|=i9:J|=l9;break;case 37:G>z?J|=pZ:J|=p9;break}return z<W&&M($,W),Y;function M(q,B){let w=G>z,H=w?G:B,U=q.slice(z+1,H);if(!w&&U.length===0)return;let O=U;J&l9&&(O=O.replace(/\+/g," ")),J&p9&&(O=o8.default(O)||O);let F="";if(w){let N=q.slice(G+1,B);J&i9&&(N=N.replace(/\+/g," ")),J&pZ&&(N=o8.default(N)||N),F=N}let A=Y[O];Z?.[O]?F.charCodeAt(0)===91?(Q?.[O]?F=JSON.parse(F):F=F.slice(1,-1).split(","),A===void 0?Y[O]=F:Array.isArray(A)?A.push(...F):(Y[O]=F,Y[O].unshift(A))):A===void 0?Y[O]=F:Array.isArray(A)?A.push(F):Y[O]=[A,F]:Y[O]=F}}function vF($,X=0){let Z=Object.create(null),Q=0,Y=$.length,J=X-1,W=J;for(let G=0;G<Y;G++)switch($.charCodeAt(G)){case 38:z($,G),J=G,W=G,Q=0;break;case 61:W<=J?W=G:Q|=pZ;break;case 43:W>J?Q|=i9:Q|=l9;break;case 37:W>J?Q|=pZ:Q|=p9;break}return J<Y&&z($,Y),Z;function z(G,M){let q=W>J,B=q?W:M,w=G.slice(J+1,B);if(!q&&w.length===0)return;let H=w;Q&l9&&(H=H.replace(/\+/g," ")),Q&p9&&(H=o8.default(H)||H);let U="";if(q){let F=G.slice(W+1,M);Q&i9&&(F=F.replace(/\+/g," ")),Q&pZ&&(F=o8.default(F)||F),U=F}let O=Z[H];if(U.charCodeAt(0)===91&&U.charCodeAt(U.length-1)===93){try{U=JSON.parse(U)}catch{}O===void 0?Z[H]=U:Array.isArray(O)?O.push(U):Z[H]=[O,U]}else if(U.charCodeAt(0)===123&&U.charCodeAt(U.length-1)===125){try{U=JSON.parse(U)}catch{}O===void 0?Z[H]=U:Array.isArray(O)?O.push(U):Z[H]=[O,U]}else U.includes(",")&&(U=U.split(",")),O===void 0?Z[H]=U:Array.isArray(O)?O.push(U):Z[H]=[O,U]}}function d9($){let X=Object.create(null),Z=0,Q=$.length,Y=-1,J=-1;for(let z=0;z<Q;z++)switch($.charCodeAt(z)){case 38:W($,z),Y=z,J=z,Z=0;break;case 61:J<=Y?J=z:Z|=pZ;break;case 43:J>Y?Z|=i9:Z|=l9;break;case 37:J>Y?Z|=pZ:Z|=p9;break}return Y<Q&&W($,Q),X;function W(z,G){let M=J>Y,q=M?J:G,B=z.slice(Y+1,q);if(!M&&B.length===0)return;let w=B;Z&l9&&(w=w.replace(/\+/g," ")),Z&p9&&(w=o8.default(w)||w);let H="";if(M){let O=z.slice(J+1,G);Z&i9&&(O=O.replace(/\+/g," ")),Z&pZ&&(O=o8.default(O)||O),H=O}let U=X[w];U===void 0?X[w]=H:Array.isArray(U)?U.push(H):X[w]=[U,H]}}var E6=Symbol("ElysiaTrace"),dZ=()=>{let{promise:$,resolve:X}=Promise.withResolvers(),{promise:Z,resolve:Q}=Promise.withResolvers(),{promise:Y,resolve:J}=Promise.withResolvers(),W=[],z=[];return[(G)=>(G&&W.push(G),$),(G)=>{let M=[],q=[],B=null;for(let H=0;H<(G.total??0);H++){let{promise:U,resolve:O}=Promise.withResolvers(),{promise:F,resolve:A}=Promise.withResolvers(),{promise:N,resolve:R}=Promise.withResolvers(),u=[],y=[];M.push((b)=>(b&&u.push(b),U)),q.push((b)=>{let _={...b,end:F,error:N,index:H,onStop(v){return v&&y.push(v),F}};O(_);for(let v=0;v<u.length;v++)u[v](_);return(v=null)=>{let g=performance.now();v&&(B=v);let E={end:g,error:v,get elapsed(){return g-b.begin}};for(let T=0;T<y.length;T++)y[T](E);A(g),R(v)}})}let w={...G,end:Z,error:Y,onEvent(H){for(let U=0;U<M.length;U++)M[U](H)},onStop(H){return H&&z.push(H),Z}};X(w);for(let H=0;H<W.length;H++)W[H](w);return{resolveChild:q,resolve(H=null){let U=performance.now();!H&&B&&(H=B);let O={end:U,error:H,get elapsed(){return U-G.begin}};for(let F=0;F<z.length;F++)z[F](O);Q(U),J(H)}}}]},yF=($)=>(X)=>{let[Z,Q]=dZ(),[Y,J]=dZ(),[W,z]=dZ(),[G,M]=dZ(),[q,B]=dZ(),[w,H]=dZ(),[U,O]=dZ(),[F,A]=dZ(),[N,R]=dZ();return $({id:X[aQ],context:X,set:X.set,onRequest:Z,onParse:Y,onTransform:W,onBeforeHandle:G,onHandle:q,onAfterHandle:w,onMapResponse:F,onAfterResponse:N,onError:U,time:Date.now(),store:X.store}),{request:Q,parse:J,transform:z,beforeHandle:M,handle:B,afterHandle:H,error:O,mapResponse:A,afterResponse:R}},yJ=($)=>$?$?.[j]==="Import"&&$.References?$.References().some(yJ):($.schema&&($=$.schema),!!$&&(K$ in $)):!1,UZ=($)=>{if(!$)return!1;let X=$?.schema??$;if(X[j]==="Import"&&$.References)return $.References().some(UZ);if(X.anyOf)return X.anyOf.some(UZ);if(X.someOf)return X.someOf.some(UZ);if(X.allOf)return X.allOf.some(UZ);if(X.not)return X.not.some(UZ);if(X.type==="object"){let Z=X.properties;if("additionalProperties"in X)return X.additionalProperties;if("patternProperties"in X)return!1;for(let Q of Object.keys(Z)){let Y=Z[Q];if(Y.type==="object"){if(UZ(Y))return!0}else if(Y.anyOf){for(let J=0;J<Y.anyOf.length;J++)if(UZ(Y.anyOf[J]))return!0}return Y.additionalProperties}return!1}return X.type==="array"&&X.items&&!Array.isArray(X.items)?UZ(X.items):!1},D8=($,X)=>{if(!X)return!1;if(j in X&&X[j]===$)return!0;if(X.type==="object"){let Z=X.properties;if(!Z)return!1;for(let Q of Object.keys(Z)){let Y=Z[Q];if(Y.type==="object"){if(D8($,Y))return!0}else if(Y.anyOf){for(let J=0;J<Y.anyOf.length;J++)if(D8($,Y.anyOf[J]))return!0}if(j in Y&&Y[j]===$)return!0}return!1}return!!X.properties&&j in X.properties&&X.properties[j]===$},DZ=($,X)=>{if(!X)return!1;let Z=X?.schema??X;if(Z.elysiaMeta===$)return!0;if(Z[j]==="Import"&&X.References)return X.References().some((Q)=>DZ($,Q));if(Z.anyOf)return Z.anyOf.some((Q)=>DZ($,Q));if(Z.someOf)return Z.someOf.some((Q)=>DZ($,Q));if(Z.allOf)return Z.allOf.some((Q)=>DZ($,Q));if(Z.not)return Z.not.some((Q)=>DZ($,Q));if(Z.type==="object"){let Q=Z.properties;for(let Y of Object.keys(Q)){let J=Q[Y];if(J.type==="object"){if(DZ($,J))return!0}else if(J.anyOf){for(let W=0;W<J.anyOf.length;W++)if(DZ($,J.anyOf[W]))return!0}return Z.elysiaMeta===$}return!1}return Z.type==="array"&&Z.items&&!Array.isArray(Z.items)?DZ($,Z.items):!1},pQ=($,X)=>{if(!X)return;let Z=X.schema??X;if(Z[j]==="Import"&&X.References)return X.References().some((Q)=>pQ($,Q));if(Z.type==="object"){let Q=Z.properties;if(!Q)return!1;for(let Y of Object.keys(Q)){let J=Q[Y];if($ in J)return!0;if(J.type==="object"){if(pQ($,J))return!0}else if(J.anyOf){for(let W=0;W<J.anyOf.length;W++)if(pQ($,J.anyOf[W]))return!0}}return!1}return $ in Z},XZ=($)=>{if(!$)return!1;if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(XZ($.oneOf[X]))return!0}if($.anyOf){for(let X=0;X<$.anyOf.length;X++)if(XZ($.anyOf[X]))return!0}if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(XZ($.oneOf[X]))return!0}if($.allOf){for(let X=0;X<$.allOf.length;X++)if(XZ($.allOf[X]))return!0}if($.not&&XZ($.not))return!0;if($.type==="object"&&$.properties){let X=$.properties;for(let Z of Object.keys(X)){let Q=X[Z];if(XZ(Q)||Q.type==="array"&&Q.items&&XZ(Q.items))return!0}}return $.type==="array"&&$.items&&XZ($.items)?!0:$[j]==="Ref"&&("$ref"in $)},ZZ=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&ZZ($.$defs[$.$ref]))return!0;if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(ZZ($.oneOf[X]))return!0}if($.anyOf){for(let X=0;X<$.anyOf.length;X++)if(ZZ($.anyOf[X]))return!0}if($.allOf){for(let X=0;X<$.allOf.length;X++)if(ZZ($.allOf[X]))return!0}if($.not&&ZZ($.not))return!0;if($.type==="object"&&$.properties){let X=$.properties;for(let Z of Object.keys(X)){let Q=X[Z];if(ZZ(Q)||Q.type==="array"&&Q.items&&ZZ(Q.items))return!0}}return $.type==="array"&&$.items&&ZZ($.items)?!0:(T0 in $)},FJ=($,X,Z={})=>{let Q=Z;if(Q.root=!0,!Array.isArray(X))return X.original=$,V$($,X,Q);for(let Y of X)Y.original=$,$=V$($,Y,Q);return $},V$=($,X,Z)=>{if(!$)return $;let Q=Z.root;if(X.onlyFirst&&$.type===X.onlyFirst)return X.to($)??$;if(X.untilObjectFound&&!Q&&$.type==="object")return $;let Y=X.from[j];if($.oneOf){for(let z=0;z<$.oneOf.length;z++)$.oneOf[z]=V$($.oneOf[z],X,Z);return $}if($.anyOf){for(let z=0;z<$.anyOf.length;z++)$.anyOf[z]=V$($.anyOf[z],X,Z);return $}if($.allOf){for(let z=0;z<$.allOf.length;z++)$.allOf[z]=V$($.allOf[z],X,Z);return $}if($.not)return V$($.not,X,Z);let J=Q&&!!X.excludeRoot;if($[j]===Y){let{anyOf:z,oneOf:G,allOf:M,not:q,properties:B,items:w,...H}=$,U=X.to(H);if(!U)return $;let O,F=(N)=>{let R=A(N);return R.$id&&delete R.$id,R},A=(N)=>{if(B&&N.type==="object"){let u={};for(let[y,b]of Object.entries(B))u[y]=V$(b,X,{...Z,root:!1});return{...H,...N,properties:u}}if(w&&N.type==="array")return{...H,...N,items:V$(w,X,{...Z,root:!1})};let R={...H,...N};return delete R.required,B&&N.type==="string"&&N.format==="ObjectString"&&N.default==="{}"?(O=C.ObjectString(B,H),R.properties=B):w&&N.type==="string"&&N.format==="ArrayString"&&N.default==="[]"&&(O=C.ArrayString(w,H),R.items=w),R};if(J){if(B){let N={};for(let[R,u]of Object.entries(B))N[R]=V$(u,X,{...Z,root:!1});return{...H,properties:N}}else if(w?.map)return{...H,items:w.map((N)=>V$(N,X,{...Z,root:!1}))};return H}if(U.anyOf)for(let N=0;N<U.anyOf.length;N++)U.anyOf[N]=F(U.anyOf[N]);else if(U.oneOf)for(let N=0;N<U.oneOf.length;N++)U.oneOf[N]=F(U.oneOf[N]);else if(U.allOf)for(let N=0;N<U.allOf.length;N++)U.allOf[N]=F(U.allOf[N]);else U.not&&(U.not=F(U.not));if(O&&(U[T0]=O[T0]),U.anyOf||U.oneOf||U.allOf||U.not)return U;if(B){let N={};for(let[R,u]of Object.entries(B))N[R]=V$(u,X,{...Z,root:!1});return{...H,...U,properties:N}}else if(w?.map)return{...H,...U,items:w.map((N)=>V$(N,X,{...Z,root:!1}))};return{...H,...U}}let W=$?.properties;if(W&&Q&&X.rootOnly!==!0)for(let[z,G]of Object.entries(W))switch(G[j]){case Y:let{anyOf:M,oneOf:q,allOf:B,not:w,type:H,...U}=G,O=X.to(U);if(!O)return $;if(O.anyOf)for(let F=0;F<O.anyOf.length;F++)O.anyOf[F]={...U,...O.anyOf[F]};else if(O.oneOf)for(let F=0;F<O.oneOf.length;F++)O.oneOf[F]={...U,...O.oneOf[F]};else if(O.allOf)for(let F=0;F<O.allOf.length;F++)O.allOf[F]={...U,...O.allOf[F]};else O.not&&(O.not={...U,...O.not});W[z]={...U,...V$(U,X,{...Z,root:!1})};break;case"Object":case"Union":W[z]=V$(G,X,{...Z,root:!1});break;default:if(Array.isArray(G.items))for(let F=0;F<G.items.length;F++)G.items[F]=V$(G.items[F],X,{...Z,root:!1});else G.anyOf||G.oneOf||G.allOf||G.not?W[z]=V$(G,X,{...Z,root:!1}):G.type==="array"&&(G.items=V$(G.items,X,{...Z,root:!1}));break}return $.type==="array"&&$.items&&(Array.isArray($.items)?$.items=$.items.map((z)=>V$(z,X,{...Z,root:!1})):$.items=V$($.items,X,{...Z,root:!1})),$},v9=($)=>(X)=>{if(typeof X=="object")try{return I0.Clean($,X)}catch{}return X},P$=($,{models:X={},dynamic:Z=!1,modules:Q,normalize:Y=!1,additionalProperties:J=!1,forceAdditionalProperties:W=!1,coerce:z=!1,additionalCoerce:G=[],validators:M,sanitize:q}={})=>{if(M=M?.filter((A)=>A),!$){if(!M?.length)return;$=M[0],M=M.slice(1)}let B,w=(A)=>z?FJ(A,[{from:C.Number(),to:(N)=>C.Numeric(N),untilObjectFound:!0},{from:C.Boolean(),to:(N)=>C.BooleanString(N),untilObjectFound:!0},...Array.isArray(G)?G:[G]]):FJ(A,G),H=(A)=>{if(A&&typeof A!="string"&&"~standard"in A)return A;if(!A)return;let N;if(typeof A!="string")N=A;else if(N=Q&&A in Q.$defs?Q.Import(A):X[A],!N)return;if(j in N)if(N[j]==="Import")XZ(N.$defs[N.$ref])||(N=N.$defs[N.$ref],(z||G)&&(N=w(N)));else if(XZ(N)){let R=I6();N=C.Module({...Q?.$defs,[R]:N}).Import(R)}else(z||G)&&(N=w(N));return N},U=H($),O=M;if("~standard"in U||M?.length&&M.some((A)=>A&&typeof A!="string"&&("~standard"in A))){let A=(b)=>{let _;if(Y===!0||Y==="exactMirror")try{_=B6(b,{TypeCompiler:eX,sanitize:q?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(b),_=v9(b)}let v=P$(b,{models:X,modules:Q,dynamic:Z,normalize:Y,additionalProperties:!0,forceAdditionalProperties:!0,coerce:z,additionalCoerce:G});return v.Decode=_,(g)=>v.Check(g)?{value:v.Decode(g)}:{issues:[...v.Errors(g)]}},N=U["~standard"]?U["~standard"].validate:A(U),R=[];if(M?.length){for(let b of M)if(b&&typeof b!="string"){if(b?.["~standard"]){R.push(b["~standard"]);continue}if(j in b){R.push(A(b));continue}}}async function u(b){let _=N(b);if(_ instanceof Promise&&(_=await _),_.issues)return _;let v=[];_&&typeof _=="object"&&v.push(_.value);for(let E=0;E<R.length;E++){if(_=R[E].validate(b),_ instanceof Promise&&(_=await _),_.issues)return _;_&&typeof _=="object"&&v.push(_.value)}if(!v.length)return{value:_};if(v.length===1)return{value:v[0]};if(v.length===2)return{value:T$(v[0],v[1])};let g=T$(v[0],v[1]);for(let E=2;E<v.length;E++)g=T$(g,v[E]);return{value:g}}let y={provider:"standard",schema:U,references:"",checkFunc:()=>{},code:"",Check:u,Errors:(b)=>u(b)?.then?.((_)=>_?.issues),Code:()=>"",Decode:u,Encode:(b)=>b,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return y.parse=(b)=>{try{return y.Decode(y.Clean?.(b)??b)}catch{throw[...y.Errors(b)].map(g$)}},y.safeParse=(b)=>{try{return{success:!0,data:y.Decode(y.Clean?.(b)??b),error:null}}catch{let _=[...F.Errors(b)].map(g$);return{success:!1,data:null,error:_[0]?.summary,errors:_}}},y}else if(M?.length){let A=!1,N=O,{schema:R,notObjects:u}=mF([U,...N.map(H)]);u&&(U=C.Intersect([...R?[R]:[],...u.map((y)=>{let b=H(y);return b.type==="object"&&"additionalProperties"in b&&(!A&&b.additionalProperties===!1&&(A=!0),delete b.additionalProperties),b})]),U.type==="object"&&A&&(U.additionalProperties=!1))}else U.type==="object"&&(!("additionalProperties"in U)||W)?U.additionalProperties=J:U=FJ(U,{onlyFirst:"object",from:C.Object({}),to({properties:A,...N}){if(A&&!("additionalProperties"in U))return C.Object(A,{...N,additionalProperties:!1})}});if(Z)if(j in U){let A={provider:"typebox",schema:U,references:"",checkFunc:()=>{},code:"",Check:(N)=>I0.Check(U,N),Errors:(N)=>I0.Errors(U,N),Code:()=>"",Clean:v9(U),Decode:(N)=>I0.Decode(U,N),Encode:(N)=>I0.Encode(U,N),get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=UZ(U)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=pQ("default",U)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=yJ(U)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=ZZ(U)},"~hasRef":B,get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=ZZ(U)}};if(U.config&&(A.config=U.config,A?.schema?.config&&delete A.schema.config),Y&&U.additionalProperties===!1)if(Y===!0||Y==="exactMirror")try{A.Clean=B6(U,{TypeCompiler:eX,sanitize:q?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(U),A.Clean=v9(U)}else A.Clean=v9(U);return A.parse=(N)=>{try{return A.Decode(A.Clean?.(N)??N)}catch{throw[...A.Errors(N)].map(g$)}},A.safeParse=(N)=>{try{return{success:!0,data:A.Decode(A.Clean?.(N)??N),error:null}}catch{let R=[...F.Errors(N)].map(g$);return{success:!1,data:null,error:R[0]?.summary,errors:R}}},A}else{let A={provider:"standard",schema:U,references:"",checkFunc:()=>{},code:"",Check:(N)=>U["~standard"].validate(N),Errors(N){let R=U["~standard"].validate(N);if(R instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return R.issues},Code:()=>"",Decode(N){let R=U["~standard"].validate(N);if(R instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return R},Encode:(N)=>N,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return A.parse=(N)=>{try{return A.Decode(A.Clean?.(N)??N)}catch{throw[...A.Errors(N)].map(g$)}},A.safeParse=(N)=>{try{return{success:!0,data:A.Decode(A.Clean?.(N)??N),error:null}}catch{let R=[...F.Errors(N)].map(g$);return{success:!1,data:null,error:R[0]?.summary,errors:R}}},A}let F;if(j in U)if(F=eX.Compile(U,Object.values(X).filter((A)=>(j in A))),F.provider="typebox",U.config&&(F.config=U.config,F?.schema?.config&&delete F.schema.config),Y===!0||Y==="exactMirror")try{F.Clean=B6(U,{TypeCompiler:eX,sanitize:q?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.dir(U,{depth:null}),F.Clean=v9(U)}else Y==="typebox"&&(F.Clean=v9(U));else F={provider:"standard",schema:U,references:"",checkFunc(A){let N=U["~standard"].validate(A);if(N instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return N},code:"",Check:(A)=>U["~standard"].validate(A),Errors(A){let N=U["~standard"].validate(A);if(N instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return N.issues},Code:()=>"",Decode(A){let N=U["~standard"].validate(A);if(N instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return N},Encode:(A)=>A,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return F.parse=(A)=>{try{return F.Decode(F.Clean?.(A)??A)}catch{throw[...F.Errors(A)].map(g$)}},F.safeParse=(A)=>{try{return{success:!0,data:F.Decode(F.Clean?.(A)??A),error:null}}catch{let N=[...F.Errors(A)].map(g$);return{success:!1,data:null,error:N[0]?.summary,errors:N}}},j in U&&Object.assign(F,{get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=UZ(F)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=pQ("default",F)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=yJ(F)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=ZZ(U)},get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=XZ(U)},"~hasRef":B}),F},hF=($)=>$[j]==="Union"||!$.schema&&!!$.anyOf,mF=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let X,Z=[],Q=!1,Y=!1;for(let J of $){if(J.type!=="object"){Z.push(J);continue}if("additionalProperties"in J&&(J.additionalProperties===!0?Q=!0:J.additionalProperties===!1&&(Y=!0)),!X){X=J;continue}X={...X,...J,properties:{...X.properties,...J.properties},required:[...X?.required??[],...J.required]}}return X&&(X.required&&(X.required=[...new Set(X.required)]),Y?X.additionalProperties=!1:Q&&(X.additionalProperties=!0)),{schema:X,notObjects:Z}},bG=($,{models:X={},modules:Z,dynamic:Q=!1,normalize:Y=!1,additionalProperties:J=!1,validators:W=[],sanitize:z})=>{if(W=W.filter((q)=>q),!$){if(!W?.length)return;$=W[0],W=W.slice(1)}let G;if(typeof $!="string")G=$;else if(G=Z&&$ in Z.$defs?Z.Import($):X[$],!G)return;if(!G)return;if(j in G||"~standard"in G)return{200:P$(G,{modules:Z,models:X,additionalProperties:J,dynamic:Q,normalize:Y,coerce:!1,additionalCoerce:[],validators:W.map((q)=>q[200]),sanitize:z})};let M={};return Object.keys(G).forEach((q)=>{if(isNaN(+q))return;let B=G[+q];if(typeof B=="string"){if(B in X){let w=X[B];if(!w)return;M[+q]=j in w||"~standard"in w?P$(w,{modules:Z,models:X,additionalProperties:J,dynamic:Q,normalize:Y,coerce:!1,additionalCoerce:[],validators:W.map((H)=>H[+q]),sanitize:z}):w}return}M[+q]=j in B||"~standard"in B?P$(B,{modules:Z,models:X,additionalProperties:J,dynamic:Q,normalize:Y,coerce:!1,additionalCoerce:[],validators:W.map((w)=>w[+q]),sanitize:z}):B}),M},VJ,uQ=()=>(VJ||(VJ=[{from:C.Object({}),to:()=>C.ObjectString({}),excludeRoot:!0},{from:C.Array(C.Any()),to:()=>C.ArrayString(C.Any())}]),VJ),CJ,xG=()=>(CJ||(CJ=[{from:C.Object({}),to:()=>C.ObjectString({}),excludeRoot:!0},{from:C.Array(C.Any()),to:()=>C.ArrayQuery(C.Any())}]),CJ),PJ,hJ=()=>(PJ||(PJ=[{from:C.Number(),to:($)=>C.Numeric($),rootOnly:!0},{from:C.Boolean(),to:($)=>C.BooleanString($),rootOnly:!0}]),PJ),dF=({validator:$,modules:X,defaultConfig:Z={},config:Q,dynamic:Y,normalize:J=!1,models:W,validators:z,sanitize:G})=>{let M=$?.provider?$:P$($,{modules:X,dynamic:Y,models:W,normalize:J,additionalProperties:!0,coerce:!0,additionalCoerce:uQ(),validators:z,sanitize:G});return M?M.config=gJ(M.config,Q):(M=P$(C.Cookie(C.Any()),{modules:X,dynamic:Y,models:W,additionalProperties:!0,validators:z,sanitize:G}),M.config=Z),M},y9=($)=>$&&$[j]==="Import"&&$.$defs[$.$ref][j]==="Object"?$.$defs[$.$ref]:$,X$=($,X)=>X?$:"",cF=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],tQ=({context:$="c",trace:X=[],addFn:Z})=>{if(!X.length)return()=>({resolveChild(){return()=>{}},resolve(){}});for(let Q=0;Q<X.length;Q++)Z(`let report${Q},reportChild${Q},reportErr${Q},reportErrChild${Q};let trace${Q}=${$}[ELYSIA_TRACE]?.[${Q}]??trace[${Q}](${$});
`);return(Q,{name:Y,total:J=0}={})=>{Y||(Y="anonymous");let W=Q==="error"?"reportErr":"report";for(let z=0;z<X.length;z++)Z(`${W}${z} = trace${z}.${Q}({id,event:'${Q}',name:'${Y}',begin:performance.now(),total:${J}})
`);return{resolve(){for(let z=0;z<X.length;z++)Z(`${W}${z}.resolve()
`)},resolveChild(z){for(let G=0;G<X.length;G++)Z(`${W}Child${G}=${W}${G}.resolveChild?.shift()?.({id,event:'${Q}',name:'${z}',begin:performance.now()})
`);return(G)=>{for(let M=0;M<X.length;M++)Z(G?`if(${G} instanceof Error){${W}Child${M}?.(${G}) }else{${W}Child${M}?.()}`:`${W}Child${M}?.()
`)}}}}},lQ=({schema:$,name:X,type:Z,typeAlias:Q=Z,normalize:Y,ignoreTryCatch:J=!1})=>!Y||!$.Clean?"":Y===!0||Y==="exactMirror"?J?`${X}=validator.${Q}.Clean(${X})
`:`try{${X}=validator.${Q}.Clean(${X})
}catch{}`:Y==="typebox"?`${X}=validator.${Q}.Clean(${X})
`:"",uF=({injectResponse:$="",normalize:X=!1,validator:Z,encodeSchema:Q=!1,isStaticResponse:Y=!1,hasSanitize:J=!1})=>({validate:(W,z=`c.${W}`,G)=>`c.set.status=422;throw new ValidationError('${W}',validator.${W},${z}${G?","+G:""})`,response:(W="r")=>{if(Y||!Z.response)return"";let z=$+`
`;z+=`if(${W} instanceof ElysiaCustomStatusResponse){c.set.status=${W}.code
${W}=${W}.response}if(${W} instanceof Response === false)switch(c.set.status){`;for(let[G,M]of Object.entries(Z.response)){if(z+=`
case ${G}:
`,M.provider==="standard"){z+=`let vare${G}=validator.response[${G}].Check(${W})
if(vare${G} instanceof Promise)vare${G}=await vare${G}
if(vare${G}.issues)throw new ValidationError('response',validator.response[${G}],${W},vare${G}.issues)
${W}=vare${G}.value
c.set.status=${G}
break
`;continue}let q=M.schema?.noValidate===!0;if(!q&&M.schema?.$ref&&M.schema?.$defs){let U=M.schema.$ref,O=typeof U=="string"&&U.includes("/")?U.split("/").pop():U;M.schema.$defs[O]?.noValidate===!0&&(q=!0)}let B=q||J,w=({ignoreTryCatch:U=!1}={})=>lQ({name:W,schema:M,type:"response",typeAlias:`response[${G}]`,normalize:X,ignoreTryCatch:U});B&&(z+=w());let H=!B&&X&&!q;Q&&M.hasTransform&&!q?(z+=`try{${W}=validator.response[${G}].Encode(${W})
`,B||(z+=w({ignoreTryCatch:!0})),z+=`c.set.status=${G}}catch{`+(H?`try{
`+w({ignoreTryCatch:!0})+`${W}=validator.response[${G}].Encode(${W})
}catch{throw new ValidationError('response',validator.response[${G}],${W})}`:`throw new ValidationError('response',validator.response[${G}],${W})`)+"}"):(B||(z+=w()),q||(z+=`if(validator.response[${G}].Check(${W})===false)throw new ValidationError('response',validator.response[${G}],${W})
c.set.status=${G}
`)),z+=`break
`}return z+"}"}}),A8=($)=>($?.fn??$).constructor.name==="AsyncFunction",lF=/=>\s?response\.clone\(/,pF=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,r0=($)=>{let X=typeof $=="object";if(X&&$.isAsync!==void 0)return $.isAsync;let Z=X?$.fn:$;if(Z.constructor.name==="AsyncFunction")return!0;let Q=Z.toString();if(lF.test(Q))return X&&($.isAsync=!1),!1;let Y=pF.test(Q);return X&&($.isAsync=Y),Y},iQ=($)=>{let X=typeof $=="object";if(X&&$.hasReturn!==void 0)return $.hasReturn;let Z=X?$.fn.toString():typeof $=="string"?$.toString():$,Q=Z.indexOf(")");if(Z.charCodeAt(Q+2)===61&&Z.charCodeAt(Q+5)!==123)return X&&($.hasReturn=!0),!0;let Y=Z.includes("return");return X&&($.hasReturn=Y),Y},D6=($)=>{let X=$?.fn??$;return X.constructor.name==="AsyncGeneratorFunction"||X.constructor.name==="GeneratorFunction"},h9=($,X,Z=`c.${X}`)=>`try{${$}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${X}',validator.${X},${Z})}}`,iF=({app:$,path:X,method:Z,hooks:Q,validator:Y,handler:J,allowMeta:W=!1,inference:z})=>{let G=$["~adapter"].composeHandler,M=$["~adapter"].handler,q=typeof J=="function";if(!q){J=M.mapResponse(J,{headers:$.setHeaders??{}});let d=J instanceof Response||J?.constructor?.name==="Response"&&typeof J?.clone=="function";if(Q.parse?.length&&Q.transform?.length&&Q.beforeHandle?.length&&Q.afterHandle?.length)return d?Function("a",`"use strict";
return function(){return a.clone()}`)(J):Function("a",`"use strict";
return function(){return a}`)(J);if(d){let h=J;J=()=>h.clone()}}let B=q?"handler(c)":"handler",w=!!Q.trace?.length,H="";if(z=C6(Object.assign({handler:J},Q),z,$.config.sucrose),G.declare){let d=G.declare(z);d&&(H+=d)}z.server&&(H+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`),Y.createBody?.(),Y.createQuery?.(),Y.createHeaders?.(),Y.createParams?.(),Y.createCookie?.(),Y.createResponse?.();let U=!!Y.body||!!Y.headers||!!Y.params||!!Y.query||!!Y.cookie||!!Y.response,O=z.query||!!Y.query,F=Q.parse?.length===1&&Q.parse[0].fn==="none",A=Z!==""&&Z!=="GET"&&Z!=="HEAD"&&(z.body||!!Y.body||!!Q.parse?.length)&&!F,N=$.setHeaders,R=N&&!!Object.keys(N).length,u=z.headers||!!Y.headers||G.preferWebstandardHeaders!==!0&&z.body,y=z.cookie||!!Y.cookie,b=Y.cookie?.config?gJ(Y?.cookie?.config,$.config.cookie):$.config.cookie,_="",v=()=>{if(_)return _;if(b?.sign){if(!b.secrets)throw new Error(`t.Cookie required secret which is not set in (${Z}) ${X}.`);let d=b.secrets?typeof b.secrets=="string"?b.secrets:b.secrets[0]:void 0;if(_+=`const _setCookie = c.set.cookie
if(_setCookie){`,b.sign===!0)_+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${d}')}`;else for(let h of b.sign)_+=`if(_setCookie['${h}']?.value)c.set.cookie['${h}'].value=await signCookie(_setCookie['${h}'].value,'${d}')
`;_+=`}
`}return _},g=$.config.normalize,E=$.config.encodeSchema,T=uF({normalize:g,validator:Y,encodeSchema:E,isStaticResponse:J instanceof Response,hasSanitize:!!$.config.sanitize});u&&(H+=G.headers),w&&(H+=`const id=c[ELYSIA_REQUEST_ID]
`);let l=tQ({trace:Q.trace,addFn:(d)=>{H+=d}});if(H+="try{",y){let d=(D,V)=>{let L=b?.[D]??V;return L?typeof L=="string"?`${D}:'${L}',`:L instanceof Date?`${D}: new Date(${L.getTime()}),`:`${D}:${L},`:typeof V=="string"?`${D}:"${V}",`:`${D}:${V},`},h=b?`{secrets:${b.secrets!==void 0?typeof b.secrets=="string"?`'${b.secrets}'`:"["+b.secrets.reduce((D,V)=>D+`'${V}',`,"")+"]":"undefined"},sign:${b.sign===!0?!0:b.sign!==void 0?"["+b.sign.reduce((D,V)=>D+`'${V}',`,"")+"]":"undefined"},`+d("domain")+d("expires")+d("httpOnly")+d("maxAge")+d("path","/")+d("priority")+d("sameSite")+d("secure")+"}":"undefined";u?H+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${h})
`:H+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${h})
`}if(O){let d={},h={},D=!1,V=!1;if(Y.query?.schema){let L=y9(Y.query?.schema);if(j in L&&L.properties)for(let[x,f]of Object.entries(L.properties))DZ("ArrayQuery",f)&&(d[x]=1,D=!0),DZ("ObjectString",f)&&(h[x]=1,V=!0)}H+=`if(c.qi===-1){c.query=Object.create(null)}else{c.query=parseQueryFromURL(c.url,c.qi+1,${D?JSON.stringify(d):void 0},${V?JSON.stringify(h):void 0})}`}let i=typeof J=="function"&&r0(J),H0=w||Q.afterResponse?.length?"c.response=c.responseValue= ":"",a0=Object.keys(Y.response??{}),F0=a0.length>1,R7=a0.length===0||a0.length===1&&a0[0]==="200",DQ=y||A||i||!!Q.parse?.length||!!Q.afterHandle?.some(r0)||!!Q.beforeHandle?.some(r0)||!!Q.transform?.some(r0)||!!Q.mapResponse?.some(r0)||Y.body?.provider==="standard"||Y.headers?.provider==="standard"||Y.query?.provider==="standard"||Y.params?.provider==="standard"||Y.cookie?.provider==="standard"||Object.values(Y.response??{}).find((d)=>d.provider==="standard"),VY=(typeof J=="function"?D6(J):!1)||!!Q.beforeHandle?.some(D6)||!!Q.afterHandle?.some(D6)||!!Q.transform?.some(D6),jZ=z.cookie||z.set||u||w||F0||!R7||q&&R||VY,G$=()=>{if(!Q.afterResponse?.length&&!w)return"";let d="",h=Q.afterResponse?.some(r0)?"async ":"";d+=`
setImmediate(${h}()=>{`;let D=tQ({trace:Q.trace,addFn:(V)=>{d+=V}})("afterResponse",{total:Q.afterResponse?.length});if(Q.afterResponse?.length&&Q.afterResponse)for(let V=0;V<Q.afterResponse.length;V++){let L=D.resolveChild(Q.afterResponse[V].fn.name),x=r0(Q.afterResponse[V])?"await ":"";d+=`
${x}e.afterResponse[${V}](c)
`,L()}return D.resolve(),d+=`})
`,d},M$=(d="r")=>{let h=G$(),D=`${jZ?"mapResponse":"mapCompactResponse"}(${H0}${d}${jZ?",c.set":""}${zZ})
`;return h?`const _res=${D}`+h+"return _res":`return ${D}`},zZ=VY||G.mapResponseContext?`,${G.mapResponseContext}`:"";(w||z.route)&&(H+=`c.route=\`${X}\`
`);let tZ=l("parse",{total:Q.parse?.length});if(A){let d=!!Q.parse?.length||z.body||Y.body;G.parser.declare&&(H+=G.parser.declare),H+=`
try{`;let h=typeof Q.parse=="string"?Q.parse:Array.isArray(Q.parse)&&Q.parse.length===1?typeof Q.parse[0]=="string"?Q.parse[0]:typeof Q.parse[0].fn=="string"?Q.parse[0].fn:void 0:void 0;if(!h&&Y.body&&!Q.parse?.length){let D=Y.body.schema;D&&D.anyOf&&D[j]==="Union"&&D.anyOf?.length===2&&D.anyOf?.find((V)=>V[j]==="ElysiaForm")&&(h="formdata")}if(h&&cF.includes(h)){let D=l("parse",{total:Q.parse?.length}),V=!!Y.body?.isOptional;switch(h){case"json":case"application/json":H+=G.parser.json(V);break;case"text":case"text/plain":H+=G.parser.text(V);break;case"urlencoded":case"application/x-www-form-urlencoded":H+=G.parser.urlencoded(V);break;case"arrayBuffer":case"application/octet-stream":H+=G.parser.arrayBuffer(V);break;case"formdata":case"multipart/form-data":H+=G.parser.formData(V);break;default:h[0]in $["~parser"]&&(H+=u?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",H+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${h}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`);break}D.resolve()}else if(d){H+=`
`,H+=`let contentType
if(c.request.body)`,H+=u?`contentType=c.headers['content-type']
`:`contentType=c.request.headers.get('content-type')
`;let D=!1;if(Q.parse?.length)H+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{D=!0;let L=!!Y.body?.isOptional;H+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+G.parser.json(L)+`break
case 120:`+G.parser.urlencoded(L)+`break
case 111:`+G.parser.arrayBuffer(L)+`break
case 114:`+G.parser.formData(L)+`break
default:if(contentType.charCodeAt(0)===116){`+G.parser.text(L)+`}break
}`}let V=l("parse",{total:Q.parse?.length});if(Q.parse)for(let L=0;L<Q.parse.length;L++){let x=`bo${L}`;if(L!==0&&(H+=`
if(!used){`),typeof Q.parse[L].fn=="string"){let f=V.resolveChild(Q.parse[L].fn),m=!!Y.body?.isOptional;switch(Q.parse[L].fn){case"json":case"application/json":D=!0,H+=G.parser.json(m);break;case"text":case"text/plain":D=!0,H+=G.parser.text(m);break;case"urlencoded":case"application/x-www-form-urlencoded":D=!0,H+=G.parser.urlencoded(m);break;case"arrayBuffer":case"application/octet-stream":D=!0,H+=G.parser.arrayBuffer(m);break;case"formdata":case"multipart/form-data":D=!0,H+=G.parser.formData(m);break;default:H+=`let ${x}=parser['${Q.parse[L].fn}'](c,contentType)
if(${x} instanceof Promise)${x}=await ${x}
if(${x}!==undefined){c.body=${x};used=true;}
`}f()}else{let f=V.resolveChild(Q.parse[L].fn.name);H+=`let ${x}=e.parse[${L}]
${x}=${x}(c,contentType)
if(${x} instanceof Promise)${x}=await ${x}
if(${x}!==undefined){c.body=${x};used=true}`,f()}if(L!==0&&(H+="}"),D)break}if(V.resolve(),!D){let L=!!Y.body?.isOptional;Q.parse?.length&&(H+=`
if(!used){
`),H+=`switch(contentType){case 'application/json':
`+G.parser.json(L)+`break
case 'text/plain':`+G.parser.text(L)+`break
case 'application/x-www-form-urlencoded':`+G.parser.urlencoded(L)+`break
case 'application/octet-stream':`+G.parser.arrayBuffer(L)+`break
case 'multipart/form-data':`+G.parser.formData(L)+`break
`;for(let x of Object.keys($["~parser"]))H+=`case '${x}':let bo${x}=parser['${x}'](c,contentType)
if(bo${x} instanceof Promise)bo${x}=await bo${x}
if(bo${x} instanceof ElysiaCustomStatusResponse){`+M$(`bo${x}`)+`}if(bo${x}!==undefined)c.body=bo${x}
break
`;Q.parse?.length&&(H+="}"),H+="}"}Q.parse?.length&&(H+=`
delete c.contentType`)}H+="}catch(error){throw new ParseError(error)}"}if(tZ.resolve(),Q?.transform||w){let d=l("transform",{total:Q.transform?.length});if(Q.transform?.length){H+=`let transformed
`;for(let h=0;h<Q.transform.length;h++){let D=Q.transform[h],V=d.resolveChild(D.fn.name);H+=r0(D)?`transformed=await e.transform[${h}](c)
`:`transformed=e.transform[${h}](c)
`,D.subType==="mapDerive"?H+="if(transformed instanceof ElysiaCustomStatusResponse){"+M$("transformed")+`}else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`:H+="if(transformed instanceof ElysiaCustomStatusResponse){"+M$("transformed")+`}else Object.assign(c,transformed)
`,V()}}d.resolve()}let FZ=[];if(Y){if(Y.headers){if(Y.headers.hasDefault)for(let[d,h]of Object.entries(I0.Default(Y.headers.schema,{}))){let D=typeof h=="object"?JSON.stringify(h):typeof h=="string"?`'${h}'`:h;D!==void 0&&(H+=`c.headers['${d}']??=${D}
`)}H+=lQ({name:"c.headers",schema:Y.headers,type:"headers",normalize:g}),Y.headers.isOptional&&(H+="if(isNotEmpty(c.headers)){"),Y.headers?.provider==="standard"?H+=`let vah=validator.headers.Check(c.headers)
if(vah instanceof Promise)vah=await vah
if(vah.issues){`+T.validate("headers",void 0,"vah.issues")+`}else{c.headers=vah.value}
`:Y.headers?.schema?.noValidate!==!0&&(H+="if(validator.headers.Check(c.headers) === false){"+T.validate("headers")+"}"),Y.headers.hasTransform&&(H+=h9(`c.headers=validator.headers.Decode(c.headers)
`,"headers")),Y.headers.isOptional&&(H+="}")}if(Y.params){if(Y.params.hasDefault)for(let[d,h]of Object.entries(I0.Default(Y.params.schema,{}))){let D=typeof h=="object"?JSON.stringify(h):typeof h=="string"?`'${h}'`:h;D!==void 0&&(H+=`c.params['${d}']??=${D}
`)}Y.params.provider==="standard"?H+=`let vap=validator.params.Check(c.params)
if(vap instanceof Promise)vap=await vap
if(vap.issues){`+T.validate("params",void 0,"vap.issues")+`}else{c.params=vap.value}
`:Y.params?.schema?.noValidate!==!0&&(H+="if(validator.params.Check(c.params)===false){"+T.validate("params")+"}"),Y.params.hasTransform&&(H+=h9(`c.params=validator.params.Decode(c.params)
`,"params"))}if(Y.query){if(j in Y.query?.schema&&Y.query.hasDefault)for(let[d,h]of Object.entries(I0.Default(Y.query.schema,{}))){let D=typeof h=="object"?JSON.stringify(h):typeof h=="string"?`'${h}'`:h;D!==void 0&&(H+=`if(c.query['${d}']===undefined)c.query['${d}']=${D}
`)}H+=lQ({name:"c.query",schema:Y.query,type:"query",normalize:g}),Y.query.isOptional&&(H+="if(isNotEmpty(c.query)){"),Y.query.provider==="standard"?H+=`let vaq=validator.query.Check(c.query)
if(vaq instanceof Promise)vaq=await vaq
if(vaq.issues){`+T.validate("query",void 0,"vaq.issues")+`}else{c.query=vaq.value}
`:Y.query?.schema?.noValidate!==!0&&(H+="if(validator.query.Check(c.query)===false){"+T.validate("query")+"}"),Y.query.hasTransform&&(H+=h9(`c.query=validator.query.Decode(c.query)
`,"query"),H+=h9(`c.query=validator.query.Decode(c.query)
`,"query")),Y.query.isOptional&&(H+="}")}if(A&&Y.body){(Y.body.hasTransform||Y.body.isOptional)&&(H+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&(isNotEmpty(c.body)||c.body instanceof ArrayBuffer))
`);let d=hF(Y.body.schema),h=!1;if(Y.body.hasDefault){let D=I0.Default(Y.body.schema,Y.body.schema.type==="object"||y9(Y.body.schema)[j]==="Object"?{}:void 0),V=y9(Y.body.schema);if(!d&&D&&typeof D=="object"&&(D8("File",V)||D8("Files",V))){h=!0;for(let[x,f]of Object.entries(D))(f==="File"||f==="Files")&&delete D[x];l0(D)||(D=void 0)}let L=typeof D=="object"?JSON.stringify(D):typeof D=="string"?`'${D}'`:D;D!=null&&(Array.isArray(D)?H+=`if(!c.body)c.body=${L}
`:typeof D=="object"?H+=`c.body=Object.assign(${L},c.body)
`:H+=`c.body=${L}
`),H+=lQ({name:"c.body",schema:Y.body,type:"body",normalize:g}),Y.body.provider==="standard"?H+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+T.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:Y.body?.schema?.noValidate!==!0&&(Y.body.isOptional?H+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+T.validate("body")+"}":H+="if(validator.body.Check(c.body)===false){"+T.validate("body")+"}")}else H+=lQ({name:"c.body",schema:Y.body,type:"body",normalize:g}),Y.body.provider==="standard"?H+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+T.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:Y.body?.schema?.noValidate!==!0&&(Y.body.isOptional?H+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+T.validate("body")+"}":H+="if(validator.body.Check(c.body)===false){"+T.validate("body")+"}");if(Y.body.hasTransform&&(H+=h9(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,"body")),d&&Y.body.schema.anyOf?.length){let D=Object.values(Y.body.schema.anyOf);for(let V=0;V<D.length;V++){let L=D[V];if(D8("File",L)||D8("Files",L)){let x=P$(L,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:hJ(),sanitize:()=>$.config.sanitize});if(x){let f=FZ.length===0,m=Object.entries(L.properties),$0=f?`
`:" else ";$0+=`if(fileUnions[${FZ.length}].Check(c.body)){`;let _0="",y$=0;for(let b$=0;b$<m.length;b$++){let[BX,VZ]=m[b$];!VZ.extension||VZ[j]!=="File"&&VZ[j]!=="Files"||(y$&&(_0+=","),_0+=`fileType(c.body.${BX},${JSON.stringify(VZ.extension)},'body.${BX}')`,y$++)}_0&&(y$===1?$0+=`await ${_0}
`:y$>1&&($0+=`await Promise.all([${_0}])
`),$0+="}",H+=$0,FZ.push(x))}}}}else if(h||!d&&(D8("File",y9(Y.body.schema))||D8("Files",y9(Y.body.schema)))){let D="",V=0;for(let[L,x]of Object.entries(y9(Y.body.schema).properties))!x.extension||x[j]!=="File"&&x[j]!=="Files"||(V&&(D+=","),D+=`fileType(c.body.${L},${JSON.stringify(x.extension)},'body.${L}')`,V++);V&&(H+=`
`),V===1?H+=`await ${D}
`:V>1&&(H+=`await Promise.all([${D}])
`)}}Y.cookie&&(Y.cookie.config=gJ(Y.cookie.config,Y.cookie?.config??{}),H+=`let cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,Y.cookie.isOptional&&(H+="if(isNotEmpty(c.cookie)){"),Y.cookie.provider==="standard"?(H+=`let vac=validator.cookie.Check(cookieValue)
if(vac instanceof Promise)vac=await vac
if(vac.issues){`+T.validate("cookie",void 0,"vac.issues")+`}else{cookieValue=vac.value}
`,H+=`for(const k of Object.keys(cookieValue))c.cookie[k].value=cookieValue[k]
`):Y.body?.schema?.noValidate!==!0&&(H+="if(validator.cookie.Check(cookieValue)===false){"+T.validate("cookie","cookieValue")+"}",Y.cookie.hasTransform&&(H+=h9("for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue))){c.cookie[key].value=value}","cookie"))),Y.cookie.isOptional&&(H+="}"))}if(Q?.beforeHandle||w){let d=l("beforeHandle",{total:Q.beforeHandle?.length}),h=!1;if(Q.beforeHandle?.length)for(let D=0;D<Q.beforeHandle.length;D++){let V=Q.beforeHandle[D],L=d.resolveChild(V.fn.name),x=iQ(V);if(V.subType==="resolve"||V.subType==="mapResolve")h||(h=!0,H+=`
let resolved
`),H+=r0(V)?`resolved=await e.beforeHandle[${D}](c);
`:`resolved=e.beforeHandle[${D}](c);
`,V.subType==="mapResolve"?H+="if(resolved instanceof ElysiaCustomStatusResponse){"+M$("resolved")+`}else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`:H+="if(resolved instanceof ElysiaCustomStatusResponse){"+M$("resolved")+`}else Object.assign(c, resolved)
`,L();else if(!x)H+=r0(V)?`await e.beforeHandle[${D}](c)
`:`e.beforeHandle[${D}](c)
`,L();else{if(H+=r0(V)?`be=await e.beforeHandle[${D}](c)
`:`be=e.beforeHandle[${D}](c)
`,L("be"),H+="if(be!==undefined){",d.resolve(),Q.afterHandle?.length||w){l("handle",{name:q?J.name:void 0}).resolve();let m=l("afterHandle",{total:Q.afterHandle?.length});if(Q.afterHandle?.length)for(let $0=0;$0<Q.afterHandle.length;$0++){let _0=Q.afterHandle[$0],y$=iQ(_0),b$=m.resolveChild(_0.fn.name);H+=`c.response = be
`,y$?(H+=r0(_0.fn)?`af=await e.afterHandle[${$0}](c)
`:`af=e.afterHandle[${$0}](c)
`,H+=`if(af!==undefined) c.response=c.responseValue=be=af
`):H+=r0(_0.fn)?`await e.afterHandle[${$0}](c, be)
`:`e.afterHandle[${$0}](c, be)
`,b$("af")}m.resolve()}Y.response&&(H+=T.response("be"));let f=l("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){H+=`c.response=c.responseValue=be
`;for(let m=0;m<Q.mapResponse.length;m++){let $0=Q.mapResponse[m],_0=f.resolveChild($0.fn.name);H+=`if(mr===undefined){mr=${A8($0)?"await ":""}e.mapResponse[${m}](c)
if(mr!==undefined)be=c.response=c.responseValue=mr}`,_0()}}f.resolve(),H+=v(),H+=`return mapEarlyResponse(${H0}be,c.set${zZ})}
`}}d.resolve()}if(Q.afterHandle?.length||w){let d=l("handle",{name:q?J.name:void 0});Q.afterHandle?.length?H+=i?`let r=c.response=c.responseValue=await ${B}
`:`let r=c.response=c.responseValue=${B}
`:H+=i?`let r=await ${B}
`:`let r=${B}
`,d.resolve();let h=l("afterHandle",{total:Q.afterHandle?.length});if(Q.afterHandle?.length)for(let V=0;V<Q.afterHandle.length;V++){let L=Q.afterHandle[V],x=iQ(L),f=h.resolveChild(L.fn.name);x?(H+=r0(L.fn)?`af=await e.afterHandle[${V}](c)
`:`af=e.afterHandle[${V}](c)
`,f("af"),Y.response?(H+="if(af!==undefined){",h.resolve(),H+=T.response("af"),H+="c.response=c.responseValue=af}"):(H+="if(af!==undefined){",h.resolve(),H+="c.response=c.responseValue=af}")):(H+=r0(L.fn)?`await e.afterHandle[${V}](c)
`:`e.afterHandle[${V}](c)
`,f())}h.resolve(),Q.afterHandle?.length&&(H+=`r=c.response
`),Y.response&&(H+=T.response()),H+=v();let D=l("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let V=0;V<Q.mapResponse.length;V++){let L=Q.mapResponse[V],x=D.resolveChild(L.fn.name);H+=`mr=${A8(L)?"await ":""}e.mapResponse[${V}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr
`,x()}D.resolve(),H+=M$()}else{let d=l("handle",{name:q?J.name:void 0});if(Y.response||Q.mapResponse?.length||w){H+=i?`let r=await ${B}
`:`let r=${B}
`,d.resolve(),Y.response&&(H+=T.response());let h=l("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){H+=`
c.response=c.responseValue=r
`;for(let D=0;D<Q.mapResponse.length;D++){let V=Q.mapResponse[D],L=h.resolveChild(V.fn.name);H+=`
if(mr===undefined){mr=${A8(V)?"await ":""}e.mapResponse[${D}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}
`,L()}}h.resolve(),H+=v(),J instanceof Response?(H+=G$(),H+=z.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${H0}${B}.clone(),c.set${zZ})
else return ${B}.clone()`:`return ${B}.clone()`,H+=`
`):H+=M$()}else if(y||w){H+=i?`let r=await ${B}
`:`let r=${B}
`,d.resolve();let h=l("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){H+=`c.response=c.responseValue= r
`;for(let D=0;D<Q.mapResponse.length;D++){let V=Q.mapResponse[D],L=h.resolveChild(V.fn.name);H+=`if(mr===undefined){mr=${A8(V)?"await ":""}e.mapResponse[${D}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}`,L()}}h.resolve(),H+=v()+M$()}else{d.resolve();let h=i?`await ${B}`:B;J instanceof Response?(H+=G$(),H+=z.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${H0}${B}.clone(),c.set${zZ})
else return ${B}.clone()
`:`return ${B}.clone()
`):H+=M$(h)}}if(H+=`
}catch(error){`,!DQ&&Q.error?.length&&(H+="return(async()=>{"),H+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,y&&(H+=v()),w&&Q.trace)for(let d=0;d<Q.trace.length;d++)H+=`report${d}?.resolve(error);reportChild${d}?.(error)
`;let aZ=l("error",{total:Q.error?.length});if(Q.error?.length){H+=`c.error=error
`,U?H+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`:H+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`,H+=`let er
`,Q.mapResponse?.length&&(H+=`let mep
`);for(let d=0;d<Q.error.length;d++){let h=aZ.resolveChild(Q.error[d].fn.name);if(r0(Q.error[d])?H+=`er=await e.error[${d}](c)
`:H+=`er=e.error[${d}](c)
if(er instanceof Promise)er=await er
`,h(),Q.mapResponse?.length){let D=l("mapResponse",{total:Q.mapResponse?.length});for(let V=0;V<Q.mapResponse.length;V++){let L=Q.mapResponse[V],x=D.resolveChild(L.fn.name);H+=`c.response=c.responseValue=er
mep=e.mapResponse[${V}](c)
if(mep instanceof Promise)er=await er
if(mep!==undefined)er=mep
`,x()}D.resolve()}if(H+=`er=mapEarlyResponse(er,set${zZ})
`,H+="if(er){",w&&Q.trace){for(let D=0;D<Q.trace.length;D++)H+=`report${D}.resolve()
`;aZ.resolve()}H+="return er}"}}aZ.resolve(),H+="return handleError(c,error,true)",!DQ&&Q.error?.length&&(H+="})()"),H+="}";let CY=G.inject?Object.keys(G.inject).join(",")+",":"",eZ="const {handler,handleError,hooks:e, "+X$("validator,",U)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+X$("parseQuery,",A)+X$("parseQueryFromURL,",O)+"},error:{"+X$("ValidationError,",U)+X$("ParseError",A)+"},fileType,schema,definitions,ERROR_CODE,"+X$("parseCookie,",y)+X$("signCookie,",y)+X$("decodeURIComponent,",O)+"ElysiaCustomStatusResponse,"+X$("ELYSIA_TRACE,",w)+X$("ELYSIA_REQUEST_ID,",w)+X$("parser,",Q.parse?.length)+X$("getServer,",z.server)+X$("fileUnions,",FZ.length)+CY+X$("TypeBoxError",U)+`}=hooks
const trace=e.trace
return ${DQ?"async ":""}function handle(c){`;Q.beforeHandle?.length&&(eZ+=`let be
`),Q.afterHandle?.length&&(eZ+=`let af
`),Q.mapResponse?.length&&(eZ+=`let mr
`),W&&(eZ+=`c.schema=schema
c.defs=definitions
`),H=eZ+H+"}",eZ="";try{return Function("hooks",`"use strict";
`+H)({handler:J,hooks:FG(Q),validator:U?Y:void 0,handleError:$.handleError,mapResponse:M.mapResponse,mapCompactResponse:M.mapCompactResponse,mapEarlyResponse:M.mapEarlyResponse,isNotEmpty:l0,utils:{parseQuery:A?d9:void 0,parseQueryFromURL:O?Y.query?.provider==="standard"?vF:Q4:void 0},error:{ValidationError:U?R0:void 0,ParseError:A?jF:void 0},fileType:nG,schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:L6,parseCookie:y?rG:void 0,signCookie:y?A6:void 0,decodeURIComponent:O?Z4.default:void 0,ElysiaCustomStatusResponse:l$,ELYSIA_TRACE:w?E6:void 0,ELYSIA_REQUEST_ID:w?aQ:void 0,getServer:z.server?()=>$.getServer():void 0,fileUnions:FZ.length?FZ:void 0,TypeBoxError:U?r:void 0,parser:$["~parser"],...G.inject})}catch(d){let h=FG(Q);console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof J=="function"?J.toString():J,instruction:H,hooks:{...h,transform:h?.transform?.map?.((D)=>D.toString()),resolve:h?.resolve?.map?.((D)=>D.toString()),beforeHandle:h?.beforeHandle?.map?.((D)=>D.toString()),afterHandle:h?.afterHandle?.map?.((D)=>D.toString()),mapResponse:h?.mapResponse?.map?.((D)=>D.toString()),parse:h?.parse?.map?.((D)=>D.toString()),error:h?.error?.map?.((D)=>D.toString()),afterResponse:h?.afterResponse?.map?.((D)=>D.toString()),stop:h?.stop?.map?.((D)=>D.toString())},validator:Y,definitions:$.definitions.type,error:d}),console.log("---"),process.exit(1)}},Y4=($,X)=>{let Z="",Q=tQ({trace:$.event.trace,addFn:X??((Y)=>{Z+=Y})})("request",{total:$.event.request?.length});if($.event.request?.length){Z+="try{";for(let Y=0;Y<$.event.request.length;Y++){let J=$.event.request[Y],W=iQ(J),z=r0(J),G=Q.resolveChild($.event.request[Y].fn.name);W?(Z+=`re=mapEarlyResponse(${z?"await ":""}onRequest[${Y}](c),c.set)
`,G("re"),Z+=`if(re!==undefined)return re
`):(Z+=`${z?"await ":""}onRequest[${Y}](c)
`,G())}Z+="}catch(error){return app.handleError(c,error,false)}"}return Q.resolve(),Z},J4=($,X="map")=>{let Z=$.extender.higherOrderFunctions;if(!Z.length)return"return "+X;let Q=$["~adapter"].composeGeneralHandler,Y=X;for(let J=0;J<Z.length;J++)Y=`hoc[${J}](${Y},${Q.parameters})`;return`return function hocMap(${Q.parameters}){return ${Y}(${Q.parameters})}`},SJ=($)=>{let X=$["~adapter"].composeGeneralHandler;$.router.http.build();let Z=$["~adapter"].isWebStandard,Q=$.event.trace?.length,Y="",J=$.router,W=J.http.root.WS?"const route=router.find(r.method==='GET'&&r.headers.get('upgrade')==='websocket'?'WS':r.method,p)":"const route=router.find(r.method,p)";W+=J.http.root.ALL?`??router.find('ALL',p)
`:`
`,Z&&(W+=`if(r.method==='HEAD'){const route=router.find('GET',p)
if(route){c.params=route.params
const _res=route.store.handler?route.store.handler(c):route.store.compile()(c)
if(_res)return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})}}`);let z=`c.error=notFound
`;if($.event.afterResponse?.length&&!$.event.error){z=`
c.error=notFound
`;let U=$.event.afterResponse.some(r0)?"async":"";z+=`
setImmediate(${U}()=>{`;for(let O=0;O<$.event.afterResponse.length;O++){let F=$.event.afterResponse[O].fn;z+=`
${A8(F)?"await ":""}afterResponse[${O}](c)
`}z+=`})
`}$.inference.query&&(z+=`
if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}`);let G=X.error404(!!$.event.request?.length,!!$.event.error?.length,z);W+=G.code,W+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let M="";for(let[U,O]of Object.entries(J.static)){M+=`case'${U}':`,$.config.strictPath!==!0&&(M+=`case'${dQ(U)}':`);let F=cQ(U);U!==F&&(M+=`case'${F}':`),M+="switch(r.method){",(("GET"in O)||("WS"in O))&&(M+="case 'GET':",("WS"in O)&&(M+=`if(r.headers.get('upgrade')==='websocket')return ht[${O.WS}].composed(c)
`,("GET"in O)||("ALL"in O?M+=`return ht[${O.ALL}].composed(c)
`:M+=`break map
`)),("GET"in O)&&(M+=`return ht[${O.GET}].composed(c)
`)),Z&&(("GET"in O)||("ALL"in O))&&!("HEAD"in O)&&(M+=`case 'HEAD':const _res=ht[${O.GET??O.ALL}].composed(c)
return getResponseLength(_res).then((length)=>{_res.headers.set('content-length', length)
return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers})
})
`);for(let[A,N]of Object.entries(O))A==="ALL"||A==="GET"||A==="WS"||(M+=`case '${A}':return ht[${N}].composed(c)
`);"ALL"in O?M+=`default:return ht[${O.ALL}].composed(c)
`:M+=`default:break map
`,M+="}"}let q=!!$.event.request?.some(r0),B=X.inject?Object.keys(X.inject).join(",")+",":"";Y+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,getResponseLength,`+X$("parseQueryFromURL,",$.inference.query)+X$("ELYSIA_TRACE,",Q)+X$("ELYSIA_REQUEST_ID,",Q)+B+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length&&(Y+=`const onRequest=app.event.request.map(x=>x.fn)
`),$.event.afterResponse?.length&&(Y+=`const afterResponse=app.event.afterResponse.map(x=>x.fn)
`),Y+=G.declare,$.event.trace?.length&&(Y+="const "+$.event.trace.map((U,O)=>`tr${O}=app.event.trace[${O}].fn`).join(",")+`
`),Y+=`${q?"async ":""}function map(${X.parameters}){`,$.event.request?.length&&(Y+=`let re
`),Y+=X.createContext($),$.event.trace?.length&&(Y+="c[ELYSIA_TRACE]=["+$.event.trace.map((U,O)=>`tr${O}(c)`).join(",")+`]
`),Y+=Y4($),M&&(Y+=`
map: switch(p){
`+M+"}"),Y+=W+`}
`+J4($);let w=W4($);$.handleError=w;let H=Function("data",`"use strict";
`+Y)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:iG,randomId:I6,handleError:w,status:oQ,redirect:S6,getResponseLength:AF,parseQueryFromURL:$.inference.query?Q4:void 0,ELYSIA_TRACE:Q?E6:void 0,ELYSIA_REQUEST_ID:Q?aQ:void 0,...X.inject});return u9&&Bun.gc(!1),H},W4=($)=>{let X=$.event,Z="",Q=$["~adapter"].composeError,Y=Q.inject?Object.keys(Q.inject).join(",")+",":"",J=!!$.event.trace?.length;Z+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,"+X$("onError,",$.event.error)+X$("afterResponse,",$.event.afterResponse)+X$("trace,",$.event.trace)+X$("onMapResponse,",$.event.mapResponse)+X$("ELYSIA_TRACE,",J)+X$("ELYSIA_REQUEST_ID,",J)+Y+`}=inject
`,Z+=`return ${$.event.error?.find(r0)||$.event.mapResponse?.find(r0)?"async ":""}function(context,error,skipGlobal){`,Z+="",J&&(Z+=`const id=context[ELYSIA_REQUEST_ID]
`);let W=tQ({context:"context",trace:X.trace,addFn:(B)=>{Z+=B}}),z=()=>{if(!X.afterResponse?.length&&!J)return"";let B="",w=X.afterResponse?.some(r0)?"async":"";B+=`
setImmediate(${w}()=>{`;let H=tQ({context:"context",trace:X.trace,addFn:(U)=>{B+=U}})("afterResponse",{total:X.afterResponse?.length,name:"context"});if(X.afterResponse?.length&&X.afterResponse)for(let U=0;U<X.afterResponse.length;U++){let O=X.afterResponse[U].fn,F=H.resolveChild(O.name);B+=`
${A8(O)?"await ":""}afterResponse[${U}](context)
`,F()}return H.resolve(),B+=`})
`,B};Z+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,Q.declare&&(Z+=Q.declare);let G=J||X.afterResponse?.length?"context.response = ":"";if($.event.error)for(let B=0;B<$.event.error.length;B++){let w=$.event.error[B],H=`${r0(w)?"await ":""}onError[${B}](context)
`;if(Z+="if(skipGlobal!==true){",iQ(w)){Z+=`_r=${H}
if(_r!==undefined){if(_r instanceof Response){`+z()+`return mapResponse(_r,set${Q.mapResponseContext})}if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let U=W("mapResponse",{total:X.mapResponse?.length,name:"context"});if(X.mapResponse?.length)for(let O=0;O<X.mapResponse.length;O++){let F=X.mapResponse[O],A=U.resolveChild(F.fn.name);Z+=`context.response=context.responseValue=_r_r=${A8(F)?"await ":""}onMapResponse[${O}](context)
`,A()}U.resolve(),Z+=z()+`return mapResponse(${G}_r,set${Q.mapResponseContext})}`}else Z+=H;Z+="}"}Z+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+z()+Q.validationError+`
}
`,Z+="if(error instanceof Error){"+z()+`
if(typeof error.toResponse==='function')return context.response=context.responseValue=error.toResponse()
`+Q.unknownError+`
}`;let M=W("mapResponse",{total:X.mapResponse?.length,name:"context"});if(Z+=`
if(!context.response)context.response=context.responseValue=error.message??error
`,X.mapResponse?.length){Z+=`let mr
`;for(let B=0;B<X.mapResponse.length;B++){let w=X.mapResponse[B],H=M.resolveChild(w.fn.name);Z+=`if(mr===undefined){mr=${A8(w)?"await ":""}onMapResponse[${B}](context)
if(mr!==undefined)error=context.response=context.responseValue=mr}`,H()}}M.resolve(),Z+=z()+`
return mapResponse(${G}error,set${Q.mapResponseContext})}`;let q=(B)=>typeof B=="function"?B:B.fn;return Function("inject",`"use strict";
`+Z)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:L6,ElysiaCustomStatusResponse:l$,onError:$.event.error?.map(q),afterResponse:$.event.afterResponse?.map(q),trace:$.event.trace?.map(q),onMapResponse:$.event.mapResponse?.map(q),ELYSIA_TRACE:J?E6:void 0,ELYSIA_REQUEST_ID:J?aQ:void 0,...Q.inject})},cZ=($,X)=>X?$:"",kG=($,X,Z,Q=!1)=>{let Y="",J=$.setHeaders,W=!!$.event.trace?.length;W&&(Y+=`const id=randomId()
`);let z=/[:*]/.test(X.path),G=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`,M=Z.query||!!X.hooks.query||!!X.hooks.standaloneValidator?.find((B)=>B.query)||$.event.request?.length;M&&(Y+=G);let q=Z.path?z?"get path(){"+(M?"":G)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`:`path:'${X.path}',`:"";Y+=cZ("const c=",!Q)+"{request,store,"+cZ("qi,",M)+cZ("params:request.params,",z)+q+cZ("url:request.url,",W||Z.url||M)+"redirect,status,set:{headers:"+(l0(J)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",Z.server&&(Y+=",get server(){return app.getServer()}"),W&&(Y+=",[ELYSIA_REQUEST_ID]:id");{let B="";for(let w of Object.keys($.singleton.decorator))B+=`,'${w}':decorator['${w}']`;Y+=B}return Y+=`}
`,Y},IJ=($,X)=>{let Z=!!$.event.trace?.length,Q=!!$.extender.higherOrderFunctions.length,Y=C6(X.hooks,$.inference);Y=C6({handler:X.handler},Y);let J="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+cZ("randomId=data.randomId,",Z)+cZ("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",Z)+cZ("ELYSIA_TRACE=data.ELYSIA_TRACE,",Z)+cZ("trace=data.trace,",Z)+cZ("hoc=data.hoc,",Q)+`status=data.status
`;$.event.request?.length&&(J+=`const onRequest=app.event.request.map(x=>x.fn)
`),J+=`${$.event.request?.find(r0)?"async":""} function map(request){`;let W=Y.query||!!X.hooks.query||!!X.hooks.standaloneValidator?.find((z)=>z.query);return Z||W||$.event.request?.length?(J+=kG($,X,Y),J+=Y4($),J+="return handler(c)}"):J+=`return handler(${kG($,X,Y,!0)})}`,J+=J4($),Function("data",J)({app:$,handler:X.compile?.()??X.composed,redirect:S6,status:oQ,hoc:$.extender.higherOrderFunctions.map((z)=>z.fn),store:$.store,decorator:$.decorator,route:X.path,randomId:Z?I6:void 0,ELYSIA_TRACE:Z?E6:void 0,ELYSIA_REQUEST_ID:Z?aQ:void 0,trace:Z?$.event.trace?.map((z)=>z?.fn??z):void 0,mapEarlyResponse:o$})},nF=($,X,Z)=>{if(typeof $=="function"||$ instanceof Blob)return;if(mJ($))return()=>$;let Q=r$($,Z??{headers:{}});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length)return Q instanceof Promise?Q.then((Y)=>{if(Y)return Y.headers.has("content-type")||Y.headers.append("content-type","text/plain"),Y.clone()}):(Q.headers.has("content-type")||Q.headers.append("content-type","text/plain"),()=>Q.clone())},gG={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Z){$.data.close?.($,X,Z)}},N6=class{constructor($,X,Z=void 0){this.raw=$,this.data=X,this.body=Z,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,X){return Buffer.isBuffer($)?this.raw.send($,X):this.validator?.Check($)===!1?this.raw.send(new R0("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.send($,X))}ping($){return Buffer.isBuffer($)?this.raw.ping($):this.validator?.Check($)===!1?this.raw.send(new R0("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.ping($))}pong($){return Buffer.isBuffer($)?this.raw.pong($):this.validator?.Check($)===!1?this.raw.send(new R0("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.pong($))}publish($,X,Z){return Buffer.isBuffer(X)?this.raw.publish($,X,Z):this.validator?.Check(X)===!1?this.raw.send(new R0("message",this.validator,X).message):(typeof X=="object"&&(X=JSON.stringify(X)),this.raw.publish($,X,Z))}get readyState(){return this.raw.readyState}get id(){return this.data.id}},oF=($)=>{let X=typeof $=="function"?[$]:$;return async function(Z,Q){if(typeof Q=="string"){let Y=Q?.charCodeAt(0);if(Y===34||Y===47||Y===91||Y===123)try{Q=JSON.parse(Q)}catch{}else lG(Q)?Q=+Q:Q==="true"?Q=!0:Q==="false"?Q=!1:Q==="null"&&(Q=null)}if(X)for(let Y=0;Y<X.length;Y++){let J=X[Y](Z,Q);if(J instanceof Promise&&(J=await J),J!==void 0)return J}return Q}},rF=($)=>{let X=(Z,Q)=>{if(Q instanceof Promise)return Q.then((W)=>X(Z,W));if(Buffer.isBuffer(Q))return Z.send(Q.toString());if(Q===void 0)return;let Y=(W)=>{if($?.Check(W)===!1)return Z.send(new R0("message",$,W).message);if(typeof W=="object")return Z.send(JSON.stringify(W));Z.send(W)};if(typeof Q?.next!="function")return void Y(Q);let J=Q.next();if(J instanceof Promise)return(async()=>{let W=await J;if($?.Check(W)===!1)return Z.send(new R0("message",$,W).message);if(Y(W.value),!W.done)for await(let z of Q)Y(z)})();if(Y(J.value),!J.done)for(let W of Q)Y(W)};return X},sF=/:.+?\?(?=\/|$)/,z4=($)=>{let X=sF.exec($);if(!X)return[$];let Z=[],Q=$.slice(0,X.index),Y=X[0].slice(0,-1),J=$.slice(X.index+X[0].length);Z.push(Q.slice(0,-1)),Z.push(Q+Y);for(let W of z4(J))W&&(W.startsWith("/:")||Z.push(Q.slice(0,-1)+W),Z.push(Q+Y+W));return Z},mJ=($)=>typeof $=="object"&&$!==null&&($.toString()==="[object HTMLBundle]"||typeof $.index=="string"),G4={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},RJ=($)=>{if(!$.config.aot||!$.config.systemRouter)return;let X={},Z=(Y,J)=>{let W=encodeURI(Y.path);X[W]?X[W][Y.method]||(X[W][Y.method]=J):X[W]={[Y.method]:J}},Q=$.routeTree;for(let Y of $.router.history){if(typeof Y.handler!="function")continue;let J=Y.method;if(J==="GET"&&`WS_${Y.path}`in Q||J==="WS"||Y.path.charCodeAt(Y.path.length-1)===42||!(J in G4))continue;if(J==="ALL"){`WS_${Y.path}`in Q||(X[Y.path]=Y.hooks?.config?.mount?Y.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?IJ($,Y):Y.hooks.mount||Y.handler:Y.handler);continue}let W,z=$.config.precompile?IJ($,Y):(G)=>W?W(G):(W=IJ($,Y))(G);for(let G of z4(Y.path))Z({method:J,path:G},z)}return X},m9=($,X)=>{if(!X)return $;for(let Z of Object.keys(X))if($[Z]!==X[Z]){if(!$[Z]){$[Z]=X[Z];continue}if($[Z]&&X[Z]){if(typeof $[Z]=="function"||$[Z]instanceof Response){$[Z]=X[Z];continue}$[Z]={...$[Z],...X[Z]}}}return $},tF={...c9,name:"bun",handler:{mapResponse:r$,mapEarlyResponse:o$,mapCompactResponse:lZ,createStaticHandler:fF,createNativeStaticHandler:nF},composeHandler:{...c9.composeHandler,headers:kJ?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(X,Z)=>{if(typeof Bun>"u")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof X=="string"){if(!lG(X))throw new Error("Port must be a numeric value");X=parseInt(X)}let Q=(J,{withAsync:W=!1}={})=>{let z={},G=[];for(let[M,q]of Object.entries(J))if(M=encodeURI(M),pG){if(!q)continue;for(let[B,w]of Object.entries(q))if(!(!w||!(B in G4))){if(w instanceof Promise){W&&(z[M]||(z[M]={}),G.push(w.then((H)=>{H instanceof Response&&(z[M][B]=H),mJ(H)&&(z[M][B]=H)})));continue}!(w instanceof Response)&&!mJ(w)||(z[M]||(z[M]={}),z[M][B]=w)}}else{if(!q)continue;if(q instanceof Promise){W&&(z[M]||(z[M]={}),G.push(q.then((B)=>{B instanceof Response&&(z[M]=B)})));continue}if(!(q instanceof Response))continue;z[M]=q}return W?Promise.all(G).then(()=>z):z},Y=typeof X=="object"?{development:!N8,reusePort:!0,idleTimeout:30,...$.config.serve||{},...X||{},routes:m9(m9(Q($.router.response),RJ($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...gG||{},...X.websocket||{}},fetch:$.fetch}:{development:!N8,reusePort:!0,idleTimeout:30,...$.config.serve||{},routes:m9(m9(Q($.router.response),RJ($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...gG||{}},port:X,fetch:$.fetch};if($.server=Bun.serve(Y),$.event.start)for(let J=0;J<$.event.start.length;J++)$.event.start[J].fn($);Z&&Z($.server),process.on("beforeExit",()=>{if($.server&&($.server.stop?.(),$.server=null,$.event.stop))for(let J=0;J<$.event.stop.length;J++)$.event.stop[J].fn($)}),$.promisedModules.then(async()=>{$.server?.reload({...Y,fetch:$.fetch,routes:m9(m9(await Q($.router.response,{withAsync:!0}),RJ($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},async stop($,X){if($.server){if($.server.stop(X),$.server=null,$.event.stop?.length)for(let Z=0;Z<$.event.stop.length;Z++)$.event.stop[Z].fn($)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",new Error().stack)},ws($,X,Z){let{parse:Q,body:Y,response:J,...W}=Z,z=P$(Y,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),G=P$(J,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",X,async(M)=>{let q=M.server??$.server,{set:B,path:w,qi:H,headers:U,query:O,params:F}=M;if(M.validator=G,Z.upgrade)if(typeof Z.upgrade=="function"){let _=Z.upgrade(M);_ instanceof Promise&&await _}else Z.upgrade&&Object.assign(B.headers,Z.upgrade);if(B.cookie&&l0(B.cookie)){let _=sG(B.cookie);_&&(B.headers["set-cookie"]=_)}B.headers["set-cookie"]&&Array.isArray(B.headers["set-cookie"])&&(B.headers=tG(new Headers(B.headers),B.headers["set-cookie"]));let A=rF(G),N=oF(Q),R;if(typeof Z.beforeHandle=="function"){let _=Z.beforeHandle(M);_ instanceof Promise&&await _}let u=[...Z.error?Array.isArray(Z.error)?Z.error:[Z.error]:[],...($.event.error??[]).map((_)=>typeof _=="function"?_:_.fn)].filter((_)=>_),y=u.length>0,b=y?async(_,v)=>{for(let g of u){let E=g(Object.assign(M,{error:v}));if(E instanceof Promise&&(E=await E),await A(_,E),E)break}}:()=>{};if(!q?.upgrade(M.request,{headers:l0(B.headers)?B.headers:void 0,data:{...M,get id(){return R||(R=I6())},validator:G,ping(_){Z.ping?.(_)},pong(_){Z.pong?.(_)},open:async(_)=>{try{await A(_,Z.open?.(new N6(_,M)))}catch(v){b(_,v)}},message:async(_,v)=>{let g=await N(_,v);if(z?.Check(g)===!1){let E=new R0("message",z,g);return y?b(_,E):void _.send(E.message)}try{await A(_,Z.message?.(new N6(_,M,g),g))}catch(E){b(_,E)}},drain:async(_)=>{try{await A(_,Z.drain?.(new N6(_,M)))}catch(v){b(_,v)}},close:async(_,v,g)=>{try{await A(_,Z.close?.(new N6(_,M),v,g))}catch(E){b(_,E)}}}}))return B.status=400,"Expected a websocket connection"},{...W,websocket:Z})}},fG=u9?Bun.env:typeof process<"u"&&process?.env?process.env:{},EJ=($,X)=>{let Z=$.schema;if(Z&&(Z.$defs?.[Z.$ref]&&(Z=Z.$defs[Z.$ref]),!!Z?.properties))for(let[Q,Y]of Object.entries(Z.properties))X[Q]??=Y.default},vG=($)=>{let{mapResponse:X,mapEarlyResponse:Z}=$["~adapter"].handler,Q=$.setHeaders;return async(Y)=>{let J=Y.url,W=J.indexOf("/",11),z=J.indexOf("?",W+1),G=z===-1?J.substring(W):J.substring(W,z),M={cookie:{},status:200,headers:Q?{...Q}:{}},q=Object.assign({},$.singleton.decorator,{set:M,store:$.singleton.store,request:Y,path:G,qi:z,error:oQ,status:oQ,redirect:S6});try{if($.event.request)for(let g=0;g<$.event.request.length;g++){let E=$.event.request[g].fn,T=E(q);if(T instanceof Promise&&(T=await T),T=Z(T,M),T)return q.response=T}let B=Y.method==="GET"&&Y.headers.get("upgrade")?.toLowerCase()==="websocket"?"WS":Y.method,w=$.router.dynamic.find(Y.method,G)??$.router.dynamic.find(B,G)??$.router.dynamic.find("ALL",G);if(!w)throw q.query=z===-1?{}:d9(J.substring(z+1)),new iG;let{handle:H,hooks:U,validator:O,content:F,route:A}=w.store,N;if(Y.method!=="GET"&&Y.method!=="HEAD")if(F)switch(F){case"application/json":N=await Y.json();break;case"text/plain":N=await Y.text();break;case"application/x-www-form-urlencoded":N=d9(await Y.text());break;case"application/octet-stream":N=await Y.arrayBuffer();break;case"multipart/form-data":N={};let g=await Y.formData();for(let E of g.keys()){if(N[E])continue;let T=g.getAll(E);T.length===1?N[E]=T[0]:N[E]=T}break}else{let g;if(Y.body&&(g=Y.headers.get("content-type")),g){let E=g.indexOf(";");if(E!==-1&&(g=g.slice(0,E)),q.contentType=g,U.parse)for(let T=0;T<U.parse.length;T++){let l=U.parse[T].fn;if(typeof l=="string")switch(l){case"json":case"application/json":N=await Y.json();break;case"text":case"text/plain":N=await Y.text();break;case"urlencoded":case"application/x-www-form-urlencoded":N=d9(await Y.text());break;case"arrayBuffer":case"application/octet-stream":N=await Y.arrayBuffer();break;case"formdata":case"multipart/form-data":N={};let i=await Y.formData();for(let a0 of i.keys()){if(N[a0])continue;let F0=i.getAll(a0);F0.length===1?N[a0]=F0[0]:N[a0]=F0}break;default:let H0=$["~parser"][l];if(H0){let a0=H0(q,g);if(a0 instanceof Promise&&(a0=await a0),a0){N=a0;break}}break}else{let i=l(q,g);if(i instanceof Promise&&(i=await i),i){N=i;break}}}if(delete q.contentType,N===void 0)switch(g){case"application/json":N=await Y.json();break;case"text/plain":N=await Y.text();break;case"application/x-www-form-urlencoded":N=d9(await Y.text());break;case"application/octet-stream":N=await Y.arrayBuffer();break;case"multipart/form-data":N={};let T=await Y.formData();for(let l of T.keys()){if(N[l])continue;let i=T.getAll(l);i.length===1?N[l]=i[0]:N[l]=i}break}}}q.route=A,q.body=N,q.params=w?.params||void 0,q.query=z===-1?{}:d9(J.substring(z+1)),q.headers={};for(let[g,E]of Y.headers.entries())q.headers[g]=E;let R={domain:$.config.cookie?.domain??O?.cookie?.config.domain,expires:$.config.cookie?.expires??O?.cookie?.config.expires,httpOnly:$.config.cookie?.httpOnly??O?.cookie?.config.httpOnly,maxAge:$.config.cookie?.maxAge??O?.cookie?.config.maxAge,path:$.config.cookie?.path??O?.cookie?.config.path,priority:$.config.cookie?.priority??O?.cookie?.config.priority,partitioned:$.config.cookie?.partitioned??O?.cookie?.config.partitioned,sameSite:$.config.cookie?.sameSite??O?.cookie?.config.sameSite,secure:$.config.cookie?.secure??O?.cookie?.config.secure,secrets:$.config.cookie?.secrets??O?.cookie?.config.secrets,sign:$.config.cookie?.sign??O?.cookie?.config.sign},u=Y.headers.get("cookie");q.cookie=await rG(q.set,u,R);let y=O?.createHeaders?.();y&&EJ(y,q.headers);let b=O?.createParams?.();b&&EJ(b,q.params);let _=O?.createQuery?.();if(_&&EJ(_,q.query),U.transform)for(let g=0;g<U.transform.length;g++){let E=U.transform[g],T=E.fn(q);if(T instanceof Promise&&(T=await T),T instanceof l$){let l=Z(T,q.set);if(l)return q.response=l}E.subType==="derive"&&Object.assign(q,T)}if(O){if(y){let g=structuredClone(q.headers);for(let[E,T]of Y.headers)g[E]=T;if(O.headers.Check(g)===!1)throw new R0("header",O.headers,g)}else O.headers?.Decode&&(q.headers=O.headers.Decode(q.headers));if(b?.Check(q.params)===!1)throw new R0("params",O.params,q.params);if(O.params?.Decode&&(q.params=O.params.Decode(q.params)),O.query?.schema){let g=O.query.schema;g.$defs?.[g.$ref]&&(g=g.$defs[g.$ref]);let E=g.properties;for(let T of Object.keys(E)){let l=E[T];(l.type==="array"||l.items?.type==="string")&&typeof q.query[T]=="string"&&q.query[T]&&(q.query[T]=q.query[T].split(","))}}if(_?.Check(q.query)===!1)throw new R0("query",O.query,q.query);if(O.query?.Decode&&(q.query=O.query.Decode(q.query)),O.createCookie?.()){let g={};for(let[E,T]of Object.entries(q.cookie))g[E]=T.value;if(O.cookie.Check(g)===!1)throw new R0("cookie",O.cookie,g);O.cookie?.Decode&&(g=O.cookie.Decode(g))}if(O.createBody?.()?.Check(N)===!1)throw new R0("body",O.body,N);O.body?.Decode&&(q.body=O.body.Decode(N))}if(U.beforeHandle)for(let g=0;g<U.beforeHandle.length;g++){let E=U.beforeHandle[g],T=E.fn(q);if(T instanceof Promise&&(T=await T),T instanceof l$){let l=Z(T,q.set);if(l)return q.response=l}if(E.subType==="resolve"){Object.assign(q,T);continue}if(T!==void 0){if(q.response=T,U.afterHandle)for(let i=0;i<U.afterHandle.length;i++){let H0=U.afterHandle[i].fn(q);H0 instanceof Promise&&(H0=await H0),H0&&(T=H0)}let l=Z(T,q.set);if(l)return q.response=l}}let v=typeof H=="function"?H(q):H;if(v instanceof Promise&&(v=await v),U.afterHandle?.length){q.response=v;for(let g=0;g<U.afterHandle.length;g++){let E=U.afterHandle[g].fn(q);E instanceof Promise&&(E=await E);let T=E instanceof l$,l=T?E.code:M.status?typeof M.status=="string"?nQ[M.status]:M.status:200;T&&(M.status=l,E=E.response);let i=O?.createResponse?.()?.[l];if(i?.Check(E)===!1)if(i?.Clean){let a0=i.Clean(E);if(i?.Check(a0)===!1)throw new R0("response",i,E);E=a0}else throw new R0("response",i,E);i?.Encode&&(q.response=E=i.Encode(E)),i?.Clean&&(q.response=E=i.Clean(E));let H0=Z(E,q.set);if(H0!==void 0)return q.response=H0}}else{let g=v instanceof l$,E=g?v.code:M.status?typeof M.status=="string"?nQ[M.status]:M.status:200;g&&(M.status=E,v=v.response);let T=O?.createResponse?.()?.[E];if(T?.Check(v)===!1)if(T?.Clean){let l=T.Clean(v);if(T?.Check(l)===!1)throw new R0("response",T,v);v=l}else throw new R0("response",T,v);T?.Encode&&(v=T.Encode(v)),T?.Clean&&(v=T.Clean(v))}if(q.set.cookie&&R?.sign){let g=R.secrets?typeof R.secrets=="string"?R.secrets:R.secrets[0]:void 0;if(R.sign===!0){if(g)for(let[E,T]of Object.entries(q.set.cookie))q.set.cookie[E].value=await A6(T.value,g)}else{let E=O?.cookie?.schema?.properties;if(g)for(let T of R.sign)T in E&&q.set.cookie[T]?.value&&(q.set.cookie[T].value=await A6(q.set.cookie[T].value,g))}}return X(q.response=v,q.set)}catch(B){let w=B instanceof Y6&&B.error?B.error:B;return $.handleError(q,w)}finally{$.event.afterResponse&&setImmediate(async()=>{for(let B of $.event.afterResponse)await B.fn(q)})}}},aF=($)=>{let{mapResponse:X}=$["~adapter"].handler;return async(Z,Q)=>{let Y=Object.assign(Z,{error:Q,code:Q.code});if(Y.set=Z.set,$.event.error)for(let J=0;J<$.event.error.length;J++){let W=$.event.error[J].fn(Y);if(W instanceof Promise&&(W=await W),W!=null)return Z.response=X(W,Z.set)}return new Response(typeof Q.cause=="string"?Q.cause:Q.message,{headers:Z.set.headers,status:Q.status??500})}},M4;M4=Symbol.dispose;var eF=class ${constructor(X={}){this.server=null,this.dependencies={},this["~Prefix"]="",this["~Singleton"]=null,this["~Definitions"]=null,this["~Metadata"]=null,this["~Ephemeral"]=null,this["~Volatile"]=null,this["~Routes"]=null,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={typebox:C.Module({}),type:{},error:{}},this.extender={macro:{},higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return!this.global&&!this.scoped&&!this.local?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:yQ(yQ(this.global,this.scoped),this.local)}},this.standaloneValidator={global:null,scoped:null,local:null},this.event={},this.router={"~http":void 0,get http(){return this["~http"]||(this["~http"]=new BG({lazy:!0,onParam:TJ.default})),this["~http"]},"~dynamic":void 0,get dynamic(){return this["~dynamic"]||(this["~dynamic"]=new BG({onParam:TJ.default})),this["~dynamic"]},static:{},response:{},history:[]},this.routeTree={},this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1},this["~parser"]={},this.handle=async(Z)=>this.fetch(Z),this.fetch=(Z)=>(this.fetch=this.config.aot?SJ(this):vG(this))(Z),this.handleError=async(Z,Q)=>(this.handleError=this.config.aot?W4(this):aF(this))(Z,Q),this.listen=(Z,Q)=>(this["~adapter"].listen(this)(Z,Q),this),this.stop=async(Z)=>(await this["~adapter"].stop?.(this,Z),this),this[M4]=()=>{this.server&&this.stop()},X.tags&&(X.detail?X.detail.tags=X.tags:X.detail={tags:X.tags}),this.config={aot:fG.ELYSIA_AOT!=="false",nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...X,prefix:X.prefix?X.prefix.charCodeAt(0)===47?X.prefix:`/${X.prefix}`:void 0,cookie:{path:"/",...X?.cookie},experimental:X?.experimental??{},seed:X?.seed===void 0?"":X?.seed},this["~adapter"]=X.adapter??(typeof Bun<"u"?tF:c9),X?.analytic&&(X?.name||X?.seed!==void 0)&&(this.telemetry={stack:new Error().stack})}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}getServer(){return this.server}getParent(){return null}get promisedModules(){return this._promisedModules||(this._promisedModules=new NF(console.error,()=>{})),this._promisedModules}env(X,Z=fG){if(P$(X,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(Z)===!1){let Q=new R0("env",X,Z);throw new Error(Q.all.map((Y)=>Y.summary).join(`
`))}return this}wrap(X){return this.extender.higherOrderFunctions.push({checksum:mQ(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X}),this}get models(){let X={};for(let Z of Object.keys(this.definitions.type))X[Z]=P$(this.definitions.typebox.Import(Z));return X.modules=this.definitions.typebox,X}add(X,Z,Q,Y,J){let W=J?.skipPrefix??!1,z=J?.allowMeta??!1;Y??={},this.applyMacro(Y);let G=[];if(Y.standaloneValidator&&(G=G.concat(Y.standaloneValidator)),this.standaloneValidator.local&&(G=G.concat(this.standaloneValidator.local)),this.standaloneValidator.scoped&&(G=G.concat(this.standaloneValidator.scoped)),this.standaloneValidator.global&&(G=G.concat(this.standaloneValidator.global)),Z!==""&&Z.charCodeAt(0)!==47&&(Z="/"+Z),this.config.prefix&&!W&&(Z=this.config.prefix+Z),Y?.type)switch(Y.type){case"text":Y.type="text/plain";break;case"json":Y.type="application/json";break;case"formdata":Y.type="multipart/form-data";break;case"urlencoded":Y.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Y.type="application/octet-stream";break;default:break}let M=this.validator.getCandidate(),q={body:Y?.body??M?.body,headers:Y?.headers??M?.headers,params:Y?.params??M?.params,query:Y?.query??M?.query,cookie:Y?.cookie??M?.cookie,response:Y?.response??M?.response},B=this.config.precompile===!0||typeof this.config.precompile=="object"&&this.config.precompile.compose===!0,w=()=>{let E=this.definitions.type,T=!this.config.aot,l=this.config.normalize,i=this.definitions.typebox,H0=()=>this.config.sanitize,a0=()=>{if(q.cookie||G.find((F0)=>F0.cookie))return dF({modules:i,validator:q.cookie,defaultConfig:this.config.cookie,normalize:l,config:q.cookie?.config??{},dynamic:T,models:E,validators:G.map((F0)=>F0.cookie),sanitize:H0})};return B?{body:P$(q.body,{modules:i,dynamic:T,models:E,normalize:l,additionalCoerce:hJ(),validators:G.map((F0)=>F0.body),sanitize:H0}),headers:P$(q.headers,{modules:i,dynamic:T,models:E,additionalProperties:!0,coerce:!0,additionalCoerce:uQ(),validators:G.map((F0)=>F0.headers),sanitize:H0}),params:P$(q.params,{modules:i,dynamic:T,models:E,coerce:!0,additionalCoerce:uQ(),validators:G.map((F0)=>F0.params),sanitize:H0}),query:P$(q.query,{modules:i,dynamic:T,models:E,normalize:l,coerce:!0,additionalCoerce:xG(),validators:G.map((F0)=>F0.query),sanitize:H0}),cookie:a0(),response:bG(q.response,{modules:i,dynamic:T,models:E,normalize:l,validators:G.map((F0)=>F0.response),sanitize:H0})}:{createBody(){return this.body?this.body:this.body=P$(q.body,{modules:i,dynamic:T,models:E,normalize:l,additionalCoerce:hJ(),validators:G.map((F0)=>F0.body),sanitize:H0})},createHeaders(){return this.headers?this.headers:this.headers=P$(q.headers,{modules:i,dynamic:T,models:E,normalize:l,additionalProperties:!l,coerce:!0,additionalCoerce:uQ(),validators:G.map((F0)=>F0.headers),sanitize:H0})},createParams(){return this.params?this.params:this.params=P$(q.params,{modules:i,dynamic:T,models:E,normalize:l,coerce:!0,additionalCoerce:uQ(),validators:G.map((F0)=>F0.params),sanitize:H0})},createQuery(){return this.query?this.query:this.query=P$(q.query,{modules:i,dynamic:T,models:E,normalize:l,coerce:!0,additionalCoerce:xG(),validators:G.map((F0)=>F0.query),sanitize:H0})},createCookie(){return this.cookie?this.cookie:this.cookie=a0()},createResponse(){return this.response?this.response:this.response=bG(q.response,{modules:i,dynamic:T,models:E,normalize:l,validators:G.map((F0)=>F0.response),sanitize:H0})}}};(M.body||M.cookie||M.headers||M.params||M.query||M.response)&&(Y=i8(Y,M)),Y.tags&&(Y.detail?Y.detail.tags=Y.tags:Y.detail={tags:Y.tags}),l0(this.config.detail)&&(Y.detail=T$(Object.assign({},this.config.detail),Y.detail));let H=l0(this.event)?i8(this.event,jG(Y)):{...MF(jG(Y))};if(G.length&&Object.assign(H,{standaloneValidator:G}),this.config.aot===!1){let E=w();this.router.dynamic.add(X,Z,{validator:E,hooks:H,content:Y?.type,handle:Q,route:Z});let T=cQ(Z,{dynamic:!0});if(Z!==T&&this.router.dynamic.add(X,T,{validator:E,hooks:H,content:Y?.type,handle:Q,route:Z}),this.config.strictPath===!1){let l=dQ(Z);this.router.dynamic.add(X,l,{validator:E,hooks:H,content:Y?.type,handle:Q,route:Z});let i=cQ(l);l!==i&&this.router.dynamic.add(X,l,{validator:E,hooks:H,content:Y?.type,handle:Q,route:Z})}this.router.history.push({method:X,path:Z,composed:null,handler:Q,compile:void 0,hooks:H});return}let U=this["~adapter"].handler,O=typeof Q!="function"?()=>{let E={redirect:S6,request:this["~adapter"].isWebStandard?new Request(`http://e.ly${Z}`,{method:X}):void 0,server:null,set:{headers:Object.assign({},this.setHeaders)},status:oQ,store:this.store};try{this.event.request?.map((l)=>{if(typeof l.fn=="function")return l.fn(E);if(typeof l=="function")return l(E)})}catch(l){let i;E.error=l,this.event.error?.some((H0)=>{if(typeof H0.fn=="function")return i=H0.fn(E);if(typeof H0=="function")return i=H0(E)}),i!==void 0&&(Q=i)}let T=U.createNativeStaticHandler?.(Q,H,E.set);return T instanceof Promise?T.then((l)=>{if(l)return l}):T?.()}:void 0,F=this.config.nativeStaticResponse===!0,A=(E)=>{!F||!O||(pG?this.router.response[E]?this.router.response[E][X]=O():this.router.response[E]={[X]:O()}:this.router.response[E]=O())};A(Z);let N,R=()=>N||(N=iF({app:this,path:Z,method:X,hooks:H,validator:w(),handler:typeof Q!="function"&&typeof U.createStaticHandler!="function"?()=>Q:Q,allowMeta:z,inference:this.inference})),u;if(`${X}_${Z}`in this.routeTree)for(let E=0;E<this.router.history.length;E++){let T=this.router.history[E];if(T.path===Z&&T.method===X){u=E;break}}else this.routeTree[`${X}_${Z}`]=this.router.history.length;let y=u??this.router.history.length,b=B?R():(E)=>(this.router.history[y].composed=R())(E);u!==void 0?this.router.history[u]=Object.assign({method:X,path:Z,composed:b,compile:R,handler:Q,hooks:H},G.length?{standaloneValidators:G}:void 0,Y.webSocket?{websocket:Y.websocket}:void 0):this.router.history.push(Object.assign({method:X,path:Z,composed:b,compile:R,handler:Q,hooks:H},Y.webSocket?{websocket:Y.websocket}:void 0));let _={handler:B?b:void 0,compile(){return this.handler=R()}},v=this.router.static,g=Z.indexOf(":")===-1&&Z.indexOf("*")===-1;if(X==="WS"){if(g){Z in v?v[Z][X]=y:v[Z]={[X]:y};return}this.router.http.add("WS",Z,_),this.config.strictPath||this.router.http.add("WS",dQ(Z),_);let E=cQ(Z,{dynamic:!0});Z!==E&&this.router.http.add("WS",E,_);return}if(g)Z in v?v[Z][X]=y:v[Z]={[X]:y},this.config.strictPath||A(dQ(Z));else{if(this.router.http.add(X,Z,_),!this.config.strictPath){let T=dQ(Z);A(T),this.router.http.add(X,T,_)}let E=cQ(Z,{dynamic:!0});Z!==E&&(this.router.http.add(X,E,_),A(E))}}headers(X){return X?(this.setHeaders||(this.setHeaders={}),this.setHeaders=T$(this.setHeaders,X),this):this}onStart(X){return this.on("start",X),this}onRequest(X){return this.on("request",X),this}onParse(X,Z){return Z?this.on(X,"parse",Z):typeof X=="string"?this.on("parse",this["~parser"][X]):this.on("parse",X)}parser(X,Z){return this["~parser"][X]=Z,this}onTransform(X,Z){return Z?this.on(X,"transform",Z):this.on("transform",X)}resolve(X,Z){Z||(Z=X,X={as:"local"});let Q={subType:"resolve",fn:Z};return this.onBeforeHandle(X,Q)}mapResolve(X,Z){Z||(Z=X,X={as:"local"});let Q={subType:"mapResolve",fn:Z};return this.onBeforeHandle(X,Q)}onBeforeHandle(X,Z){return Z?this.on(X,"beforeHandle",Z):this.on("beforeHandle",X)}onAfterHandle(X,Z){return Z?this.on(X,"afterHandle",Z):this.on("afterHandle",X)}mapResponse(X,Z){return Z?this.on(X,"mapResponse",Z):this.on("mapResponse",X)}onAfterResponse(X,Z){return Z?this.on(X,"afterResponse",Z):this.on("afterResponse",X)}trace(X,Z){Z||(Z=X,X={as:"local"}),Array.isArray(Z)||(Z=[Z]);for(let Q of Z)this.on(X,"trace",yF(Q));return this}error(X,Z){switch(typeof X){case"string":return Z.prototype[L6]=X,this.definitions.error[X]=Z,this;case"function":return this.definitions.error=X(this.definitions.error),this}for(let[Q,Y]of Object.entries(X))Y.prototype[L6]=Q,this.definitions.error[Q]=Y;return this}onError(X,Z){return Z?this.on(X,"error",Z):this.on("error",X)}onStop(X){return this.on("stop",X),this}on(X,Z,Q){let Y;switch(typeof X){case"string":Y=X,Q=Z;break;case"object":Y=Z,!Array.isArray(Z)&&typeof Z=="object"&&(Q=Z);break}Array.isArray(Q)?Q=C$(Q):typeof Q=="function"?Q=[{fn:Q}]:Q=[Q];let J=Q;for(let W of J)W.scope=typeof X=="string"?"local":X?.as??"local",(Y==="resolve"||Y==="derive")&&(W.subType=Y);Y!=="trace"&&(this.inference=C6({[Y]:J.map((W)=>W.fn)},this.inference,this.config.sucrose));for(let W of J){let z=BF(W,"global",{skipIfHasType:!0});switch(Y){case"start":this.event.start??=[],this.event.start.push(z);break;case"request":this.event.request??=[],this.event.request.push(z);break;case"parse":this.event.parse??=[],this.event.parse.push(z);break;case"transform":this.event.transform??=[],this.event.transform.push(z);break;case"derive":this.event.transform??=[],this.event.transform.push(C$(z,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(z);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(C$(z,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(z);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(z);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(z);break;case"trace":this.event.trace??=[],this.event.trace.push(z);break;case"error":this.event.error??=[],this.event.error.push(z);break;case"stop":this.event.stop??=[],this.event.stop.push(z);break}}return this}as(X){return U8(this.event.parse,X),U8(this.event.transform,X),U8(this.event.beforeHandle,X),U8(this.event.afterHandle,X),U8(this.event.mapResponse,X),U8(this.event.afterResponse,X),U8(this.event.trace,X),U8(this.event.error,X),X==="scoped"?(this.validator.scoped=yQ(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null)):X==="global"&&(this.validator.global=yQ(this.validator.global,yQ(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null),this.standaloneValidator.scoped!==null&&(this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null)),this}group(X,Z,Q){let Y=new $({...this.config,prefix:""});Y.singleton={...this.singleton},Y.definitions={...this.definitions},Y.getServer=()=>this.getServer(),Y.inference=VG(this.inference),Y.extender={...this.extender},Y["~parser"]=this["~parser"],Y.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let J=typeof Z=="object",W=(J?Q:Z)(Y);return this.singleton=T$(this.singleton,Y.singleton),this.definitions=T$(this.definitions,Y.definitions),W.event.request?.length&&(this.event.request=[...this.event.request||[],...W.event.request||[]]),W.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]]),this.model(W.definitions.type),Object.values(Y.router.history).forEach(({method:z,path:G,handler:M,hooks:q})=>{if(G=(J?"":this.config.prefix??"")+X+G,J){let{body:B,headers:w,query:H,params:U,cookie:O,response:F,...A}=Z,N=q,R=B||w||H||U||O||F;this.add(z,G,M,i8(A,{...N||{},error:N.error?Array.isArray(N.error)?[...N.error??[],...W.event.error??[]]:[N.error,...W.event.error??[]]:W.event.error,standaloneValidator:R?[...N.standaloneValidator??[],{body:B,headers:w,query:H,params:U,cookie:O,response:F}]:N.standaloneValidator}),void 0)}else this.add(z,G,M,i8(q,{error:W.event.error}),{skipPrefix:!0})}),this}guard(X,Z){if(!Z){if(typeof X=="object"){this.applyMacro(X),X.detail&&(this.config.detail?this.config.detail=T$(Object.assign({},this.config.detail),X.detail):this.config.detail=X.detail),X.tags&&(this.config.detail?this.config.detail.tags=X.tags:this.config.detail={tags:X.tags});let J=X.as??"local";if(X.schema==="standalone"){this.standaloneValidator[J]||(this.standaloneValidator[J]=[]);let W=X?.response?typeof X.response=="string"||j in X.response||"~standard"in X.response?{200:X.response}:X?.response:void 0;this.standaloneValidator[J].push({body:X.body,headers:X.headers,params:X.params,query:X.query,response:W,cookie:X.cookie})}else this.validator[J]={body:X.body??this.validator[J]?.body,headers:X.headers??this.validator[J]?.headers,params:X.params??this.validator[J]?.params,query:X.query??this.validator[J]?.query,response:X.response??this.validator[J]?.response,cookie:X.cookie??this.validator[J]?.cookie};return X.parse&&this.on({as:J},"parse",X.parse),X.transform&&this.on({as:J},"transform",X.transform),X.derive&&this.on({as:J},"derive",X.derive),X.beforeHandle&&this.on({as:J},"beforeHandle",X.beforeHandle),X.resolve&&this.on({as:J},"resolve",X.resolve),X.afterHandle&&this.on({as:J},"afterHandle",X.afterHandle),X.mapResponse&&this.on({as:J},"mapResponse",X.mapResponse),X.afterResponse&&this.on({as:J},"afterResponse",X.afterResponse),X.error&&this.on({as:J},"error",X.error),this}return this.guard({},X)}let Q=new $({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.inference=VG(this.inference),Q.extender={...this.extender},Q.getServer=()=>this.getServer();let Y=Z(Q);return this.singleton=T$(this.singleton,Q.singleton),this.definitions=T$(this.definitions,Q.definitions),Y.getServer=()=>this.server,Y.event.request?.length&&(this.event.request=[...this.event.request||[],...Y.event.request||[]]),Y.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...Y.event.mapResponse||[]]),this.model(Y.definitions.type),Object.values(Q.router.history).forEach(({method:J,path:W,handler:z,hooks:G})=>{let{body:M,headers:q,query:B,params:w,cookie:H,response:U,...O}=X,F=M||q||B||w||H||U;this.add(J,W,z,i8(O,{...G||{},error:G.error?Array.isArray(G.error)?[...G.error??[],...Y.event.error??[]]:[G.error,...Y.event.error??[]]:Y.event.error,standaloneValidator:F?[...G.standaloneValidator??[],{body:M,headers:q,query:B,params:w,cookie:H,response:U}]:G.standaloneValidator}))}),this}use(X){if(!X)return this;if(Array.isArray(X)){let Z=this;for(let Q of X)Z=Z.use(Q);return Z}return X instanceof Promise?(this.promisedModules.add(X.then((Z)=>{if(typeof Z=="function")return Z(this);if(Z instanceof $)return this._use(Z).compile();if(Z.constructor?.name==="Elysia")return this._use(Z).compile();if(typeof Z.default=="function")return Z.default(this);if(Z.default instanceof $)return this._use(Z.default);if(Z.constructor?.name==="Elysia")return this._use(Z.default);if(Z.constructor?.name==="_Elysia")return this._use(Z.default);try{return this._use(Z.default)}catch(Q){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),Q}}).then((Z)=>(Z&&typeof Z.compile=="function"&&Z.compile(),Z))),this):this._use(X)}propagatePromiseModules(X){if(X.promisedModules.size<=0)return this;for(let Z of X.promisedModules.promises)this.promisedModules.add(Z.then((Q)=>{if(!Q)return;let Y=this._use(Q);return Y instanceof Promise?Y.then((J)=>{J?J.compile():Q.compile()}):Q.compile()}));return this}_use(X){if(typeof X=="function"){let Y=X(this);return Y instanceof Promise?(this.promisedModules.add(Y.then((J)=>{if(J instanceof $){J.getServer=()=>this.getServer(),J.getGlobalRoutes=()=>this.getGlobalRoutes(),J.getGlobalDefinitions=()=>this.getGlobalDefinitions(),J.model(this.definitions.type),J.error(this.definitions.error);for(let{method:W,path:z,handler:G,hooks:M}of Object.values(J.router.history))this.add(W,z,G,M,void 0);return J===this?void 0:(this.propagatePromiseModules(J),J)}return typeof J=="function"?J(this):typeof J.default=="function"?J.default(this):this._use(J)}).then((J)=>(J&&typeof J.compile=="function"&&J.compile(),J))),this):Y}this.propagatePromiseModules(X);let Z=X.config.name,Q=X.config.seed;if(X.getParent=()=>this,X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.getGlobalDefinitions=()=>this.getGlobalDefinitions(),X.standaloneValidator?.scoped&&(this.standaloneValidator.local?this.standaloneValidator.local=this.standaloneValidator.local.concat(X.standaloneValidator.scoped):this.standaloneValidator.local=X.standaloneValidator.scoped),X.standaloneValidator?.global&&(this.standaloneValidator.global?this.standaloneValidator.global=this.standaloneValidator.global.concat(X.standaloneValidator.global):this.standaloneValidator.global=X.standaloneValidator.global),l0(X["~parser"])&&(this["~parser"]={...X["~parser"],...this["~parser"]}),X.setHeaders&&this.headers(X.setHeaders),Z){Z in this.dependencies||(this.dependencies[Z]=[]);let Y=Q!==void 0?mQ(Z+JSON.stringify(Q)):0;this.dependencies[Z].some(({checksum:J})=>Y===J)||(this.extender.macro={...this.extender.macro,...X.extender.macro},this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions))}else l0(X.extender.macro)&&(this.extender.macro={...this.extender.macro,...X.extender.macro}),X.extender.higherOrderFunctions.length&&(this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions));if(X.extender.higherOrderFunctions.length){OF(this.extender.higherOrderFunctions);let Y=[];for(let J=0;J<this.extender.higherOrderFunctions.length;J++){let W=this.extender.higherOrderFunctions[J];W.checksum&&(Y.includes(W.checksum)&&(this.extender.higherOrderFunctions.splice(J,1),J--),Y.push(W.checksum))}Y.length=0}this.inference=vJ(this.inference,X.inference),l0(X.singleton.decorator)&&this.decorate(X.singleton.decorator),l0(X.singleton.store)&&this.state(X.singleton.store),l0(X.definitions.type)&&this.model(X.definitions.type),l0(X.definitions.error)&&this.error(X.definitions.error),l0(X.extender.macro)&&(this.extender.macro={...this.extender.macro,...X.extender.macro});for(let{method:Y,path:J,handler:W,hooks:z}of Object.values(X.router.history))this.add(Y,J,W,z);if(Z){Z in this.dependencies||(this.dependencies[Z]=[]);let Y=Q!==void 0?mQ(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:J})=>Y===J))return this;this.dependencies[Z].push(this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies,stack:X.telemetry?.stack,routes:X.router.history,decorators:X.singleton,store:X.singleton.store,error:X.definitions.error,derive:X.event.transform?.filter((J)=>J?.subType==="derive").map((J)=>({fn:J.toString(),stack:new Error().stack??""})),resolve:X.event.transform?.filter((J)=>J?.subType==="resolve").map((J)=>({fn:J.toString(),stack:new Error().stack??""}))}:{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies}),l0(X.event)&&(this.event=wG(this.event,OG(X.event),Y))}else l0(X.event)&&(this.event=wG(this.event,OG(X.event)));return X.validator.global&&(this.validator.global=i8(this.validator.global,{...X.validator.global})),X.validator.scoped&&(this.validator.local=i8(this.validator.local,{...X.validator.scoped})),this}macro(X,Z){if(typeof X=="string"&&!Z)throw new Error("Macro function is required");return typeof X=="string"?this.extender.macro[X]=Z:this.extender.macro={...this.extender.macro,...X},this}applyMacro(X,Z=X,{iteration:Q=0,applied:Y={}}={}){if(Q>=16)return;let J=this.extender.macro;for(let[W,z]of Object.entries(Z)){if(!(W in J))continue;let G=typeof J[W]=="function"?J[W](z):J[W];if(!G||typeof J[W]=="object"&&z===!1)return;let M=mQ(W+JSON.stringify(G.seed??z));if(!(M in Y)){Y[M]=!0;for(let[q,B]of Object.entries(G))if(q!=="seed"){if(q in LF){UF(X,q,B),delete X[W];continue}if(q==="detail"){X.detail||(X.detail={}),X.detail=T$(X.detail,B,{mergeArray:!0}),delete X[W];continue}if(q in J){this.applyMacro(X,{[q]:B},{applied:Y,iteration:Q+1}),delete X[W];continue}switch((q==="derive"||q==="resolve")&&typeof B=="function"&&(B={fn:B,subType:q}),typeof X[q]){case"function":X[q]=[X[q],B];break;case"object":Array.isArray(X[q])?X[q].push(B):X[q]=[X[q],B];break;case"undefined":X[q]=B;break}delete X[W]}}}}mount(X,Z,Q){if(X instanceof $||typeof X=="function"||X.length===0||X==="/"){let z=typeof X=="function"?X:X instanceof $?X.compile().fetch:Z instanceof $?Z.compile().fetch:typeof Z=="function"?Z:(()=>{throw new Error("Invalid handler")})(),G=({request:M,path:q})=>z(new Request(NG(M.url,q),{method:M.method,headers:M.headers,signal:M.signal,credentials:M.credentials,referrerPolicy:M.referrerPolicy,duplex:M.duplex,redirect:M.redirect,mode:M.mode,keepalive:M.keepalive,integrity:M.integrity,body:M.body}));return this.route("ALL","/*",G,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:z}}),this}let Y=Z instanceof $?Z.compile().fetch:typeof Z=="function"?Z:(()=>{throw new Error("Invalid handler")})(),J=X.length-(X.endsWith("*")?1:0),W=({request:z,path:G})=>Y(new Request(NG(z.url,G.slice(J)||"/"),{method:z.method,headers:z.headers,signal:z.signal,credentials:z.credentials,referrerPolicy:z.referrerPolicy,duplex:z.duplex,redirect:z.redirect,mode:z.mode,keepalive:z.keepalive,integrity:z.integrity,body:z.body}));return this.route("ALL",X,W,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:Y}}),this.route("ALL",X+(X.endsWith("/")?"*":"/*"),W,{parse:"none",...Q,detail:{...Q?.detail,hide:!0},config:{mount:Y}}),this}get(X,Z,Q){return this.add("GET",X,Z,Q),this}post(X,Z,Q){return this.add("POST",X,Z,Q),this}put(X,Z,Q){return this.add("PUT",X,Z,Q),this}patch(X,Z,Q){return this.add("PATCH",X,Z,Q),this}delete(X,Z,Q){return this.add("DELETE",X,Z,Q),this}options(X,Z,Q){return this.add("OPTIONS",X,Z,Q),this}all(X,Z,Q){return this.add("ALL",X,Z,Q),this}head(X,Z,Q){return this.add("HEAD",X,Z,Q),this}connect(X,Z,Q){return this.add("CONNECT",X,Z,Q),this}route(X,Z,Q,Y){return this.add(X.toUpperCase(),Z,Q,Y,Y?.config),this}ws(X,Z){return this["~adapter"].ws?this["~adapter"].ws(this,X,Z):console.warn("Current adapter doesn't support WebSocket"),this}state(X,Z,Q){Z===void 0?(Q=X,X={as:"append"},Z=""):Q===void 0&&(typeof X=="string"?(Q=Z,Z=X,X={as:"append"}):typeof X=="object"&&(Q=Z,Z=""));let{as:Y}=X;if(typeof Z!="string")return this;switch(typeof Q){case"object":return!Q||!l0(Q)?this:Z?((Z in this.singleton.store)?this.singleton.store[Z]=T$(this.singleton.store[Z],Q,{override:Y==="override"}):this.singleton.store[Z]=Q,this):Q===null?this:(this.singleton.store=T$(this.singleton.store,Q,{override:Y==="override"}),this);case"function":return Z?(Y==="override"||!(Z in this.singleton.store))&&(this.singleton.store[Z]=Q):this.singleton.store=Q(this.singleton.store),this;default:return(Y==="override"||!(Z in this.singleton.store))&&(this.singleton.store[Z]=Q),this}}decorate(X,Z,Q){Z===void 0?(Q=X,X={as:"append"},Z=""):Q===void 0&&(typeof X=="string"?(Q=Z,Z=X,X={as:"append"}):typeof X=="object"&&(Q=Z,Z=""));let{as:Y}=X;if(typeof Z!="string")return this;switch(typeof Q){case"object":return Z?((Z in this.singleton.decorator)?this.singleton.decorator[Z]=T$(this.singleton.decorator[Z],Q,{override:Y==="override"}):this.singleton.decorator[Z]=Q,this):Q===null?this:(this.singleton.decorator=T$(this.singleton.decorator,Q,{override:Y==="override"}),this);case"function":return Z?(Y==="override"||!(Z in this.singleton.decorator))&&(this.singleton.decorator[Z]=Q):this.singleton.decorator=Q(this.singleton.decorator),this;default:return(Y==="override"||!(Z in this.singleton.decorator))&&(this.singleton.decorator[Z]=Q),this}}derive(X,Z){Z||(Z=X,X={as:"local"});let Q={subType:"derive",fn:Z};return this.onTransform(X,Q)}model(X,Z){let Q=(Y)=>{let J={};for(let W in Y)"~standard"in Y[W]||(J[W]=Y[W]);return J};switch(typeof X){case"object":let Y={},J=Object.entries(X);if(!J.length)return this;for(let[G,M]of J)G in this.definitions.type||("~standard"in M?this.definitions.type[G]=M:(Y[G]=this.definitions.type[G]=M,Y[G].$id??=`#/components/schemas/${G}`));return this.definitions.typebox=C.Module({...this.definitions.typebox.$defs,...Y}),this;case"function":let W=X(this.definitions.type);return this.definitions.type=W,this.definitions.typebox=C.Module(Q(W)),this;case"string":if(!Z)break;if(this.definitions.type[X]=Z,"~standard"in Z)return this;let z={...Z,id:Z.$id??`#/components/schemas/${X}`};return this.definitions.typebox=C.Module({...this.definitions.typebox.$defs,...z}),this}return Z?(this.definitions.type[X]=Z,("~standard"in Z)?this:(this.definitions.typebox=C.Module({...this.definitions.typebox.$defs,[X]:Z}),this)):this}Ref(X){return C.Ref(X)}mapDerive(X,Z){Z||(Z=X,X={as:"local"});let Q={subType:"mapDerive",fn:Z};return this.onTransform(X,Q)}affix(X,Z,Q){if(Q==="")return this;let Y=["_","-"," "],J=(M)=>M[0].toUpperCase()+M.slice(1),W=X==="prefix"?(M,q)=>Y.includes(M.at(-1)??"")?M+q:M+J(q):Y.includes(Q.at(-1)??"")?(M,q)=>q+M:(M,q)=>q+J(M),z=(M)=>{let q={};switch(M){case"decorator":for(let B in this.singleton.decorator)q[W(Q,B)]=this.singleton.decorator[B];this.singleton.decorator=q;break;case"state":for(let B in this.singleton.store)q[W(Q,B)]=this.singleton.store[B];this.singleton.store=q;break;case"model":for(let B in this.definitions.type)q[W(Q,B)]=this.definitions.type[B];this.definitions.type=q;break;case"error":for(let B in this.definitions.error)q[W(Q,B)]=this.definitions.error[B];this.definitions.error=q;break}},G=Array.isArray(Z)?Z:[Z];for(let M of G.some((q)=>q==="all")?["decorator","state","model","error"]:G)z(M);return this}prefix(X,Z){return this.affix("prefix",X,Z)}suffix(X,Z){return this.affix("suffix",X,Z)}compile(){return this["~adapter"].beforeCompile?.(this),this["~adapter"].isWebStandard?(this.fetch=this.config.aot?SJ(this):vG(this),typeof this.server?.reload=="function"&&this.server.reload({...this.server||{},fetch:this.fetch}),this):(typeof this.server?.reload=="function"&&this.server.reload(this.server||{}),this._handle=SJ(this),this)}get modules(){return this.promisedModules}},QZ=eF;var $V=Object.defineProperty,iZ=($,X)=>{for(var Z in X)$V($,Z,{get:X[Z],enumerable:!0})};function lJ($){return"type"in $||"properties"in $||"items"in $}function XV($,X){return($==="createdAt"||$==="updatedAt")&&"anyOf"in X&&Array.isArray(X.anyOf)}function T4($){if(!lJ($)||typeof $!=="object"||$===null)return $;let X={...$};return Object.entries(X).forEach(([Z,Q])=>{if(lJ(Q))if(XV(Z,Q)){let Y=Q.anyOf?.find((J)=>lJ(J)&&J.format==="date-time");if(Y){let J={type:"string",format:"date-time",default:Y.default};X[Z]=J}}else X[Z]=T4(Q)}),X}var ZV=($,X)=>{let{version:Z="latest",theme:Q=`https://unpkg.com/swagger-ui-dist@${Z??"latest"}/swagger-ui.css`,cdn:Y=`https://unpkg.com/swagger-ui-dist@${Z}/swagger-ui-bundle.js`,autoDarkMode:J=!0,...W}=X,z=JSON.stringify({dom_id:"#swagger-ui",...W},(M,q)=>typeof q==="function"?void 0:q),G=JSON.parse(z);if(G.components&&G.components.schemas)G.components.schemas=Object.fromEntries(Object.entries(G.components.schemas).map(([M,q])=>[M,T4(q)]));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    ${J&&typeof Q==="string"?`<style>
@media (prefers-color-scheme: dark) {
    body {
        background-color: #222;
        color: #faf9a;
    }
    .swagger-ui {
        filter: invert(92%) hue-rotate(180deg);
    }

    .swagger-ui .microlight {
        filter: invert(100%) hue-rotate(180deg);
    }
}
</style>`:""}
    ${typeof Q==="string"?`<link rel="stylesheet" href="${Q}" />`:`<link rel="stylesheet" media="(prefers-color-scheme: light)" href="${Q.light}" />
<link rel="stylesheet" media="(prefers-color-scheme: dark)" href="${Q.dark}" />`}
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="${Y}" crossorigin></script>
    <script>
        window.onload = () => {
            window.ui = SwaggerUIBundle(${z});
        };
    </script>
</body>
</html>`},QV=`.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #f06292;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(156, 163, 175, 1);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-accent: #f06292;

  --scalar-background-1: #111728;
  --scalar-background-2: #1e293b;
  --scalar-background-3: #334155;
  --scalar-background-accent: #f062921f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: #f062921f;
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
}
.dark-mode {
  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #a3ffa9;
  --scalar-color-red: #ffa3a3;
  --scalar-color-yellow: #fffca3;
  --scalar-color-blue: #a5d6ff;
  --scalar-color-orange: #e2ae83;
  --scalar-color-purple: #d2a8ff;

  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
}
.section-flare {
  width: 100%;
  height: 400px;
  position: absolute;
}
.section-flare-item:first-of-type:before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  --stripes: repeating-linear-gradient(100deg, #fff 0%, #fff 0%, transparent 2%, transparent 12%, #fff 17%);
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 0%, transparent 10%, transparent 12%, #000 17%);
  --rainbow: repeating-linear-gradient(100deg, #60a5fa 10%, #e879f9 16%, #5eead4 22%, #60a5fa 30%);
  contain: strict;
  contain-intrinsic-size: 100vw 40vh;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: opacity(20%) saturate(200%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
}
.section-flare-item:first-of-type:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripes), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
  background-image: var(--stripesDark), var(--rainbow);
  pointer-events: none;
}
.light-mode .section-flare-item:first-of-type:after,
.light-mode .section-flare-item:first-of-type:before {
  background-image: var(--stripes), var(--rainbow);
  filter: opacity(4%) saturate(200%);
}`,YV=($,X,Z)=>`<!doctype html>
<html>
  <head>
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
      }
    </style>
    <style>
      ${X.customCss??QV}
    </style>
  </head>
  <body>
    <script
      id="api-reference"
      data-configuration='${JSON.stringify(Object.assign(X,{content:Z}))}'
    >
    </script>
    <script src="${X.cdn}" crossorigin></script>
  </body>
</html>`,JV={};iZ(JV,{HasPropertyKey:()=>nJ,IsArray:()=>OZ,IsAsyncIterator:()=>WV,IsBigInt:()=>_4,IsBoolean:()=>r9,IsDate:()=>zV,IsFunction:()=>GV,IsIterator:()=>MV,IsNull:()=>qV,IsNumber:()=>NZ,IsObject:()=>Y$,IsRegExp:()=>BV,IsString:()=>A$,IsSymbol:()=>HV,IsUint8Array:()=>sJ,IsUndefined:()=>wZ});function nJ($,X){return X in $}function WV($){return Y$($)&&!OZ($)&&!sJ($)&&Symbol.asyncIterator in $}function OZ($){return Array.isArray($)}function _4($){return typeof $==="bigint"}function r9($){return typeof $==="boolean"}function zV($){return $ instanceof globalThis.Date}function GV($){return typeof $==="function"}function MV($){return Y$($)&&!OZ($)&&!sJ($)&&Symbol.iterator in $}function qV($){return $===null}function NZ($){return typeof $==="number"}function Y$($){return typeof $==="object"&&$!==null}function BV($){return $ instanceof globalThis.RegExp}function A$($){return typeof $==="string"}function HV($){return typeof $==="symbol"}function sJ($){return $ instanceof globalThis.Uint8Array}function wZ($){return $===void 0}function UV($){return $!==null&&typeof $==="object"}function DV($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function NV($){return $===void 0}function wV($){return typeof $==="number"}var q4;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(W,z){return $.ExactOptionalPropertyTypes?z in W:W[z]!==void 0}$.IsExactOptionalProperty=X;function Z(W){let z=UV(W);return $.AllowArrayObject?z:z&&!DV(W)}$.IsObjectLike=Z;function Q(W){return Z(W)&&!(W instanceof Date)&&!(W instanceof Uint8Array)}$.IsRecordLike=Q;function Y(W){return $.AllowNaN?wV(W):Number.isFinite(W)}$.IsNumberLike=Y;function J(W){let z=NV(W);return $.AllowNullVoid?z||W===null:z}$.IsVoidLike=J})(q4||(q4={}));var OV=class extends Error{constructor($){super($)}},AV={};iZ(AV,{IsAny:()=>g4,IsArgument:()=>f4,IsArray:()=>v4,IsAsyncIterator:()=>y4,IsBigInt:()=>h4,IsBoolean:()=>m4,IsComputed:()=>d4,IsConstructor:()=>c4,IsDate:()=>u4,IsFunction:()=>l4,IsImport:()=>jV,IsInteger:()=>p4,IsIntersect:()=>i4,IsIterator:()=>n4,IsKind:()=>wM,IsKindOf:()=>J0,IsLiteral:()=>YY,IsLiteralBoolean:()=>PV,IsLiteralNumber:()=>CV,IsLiteralString:()=>VV,IsLiteralValue:()=>SV,IsMappedKey:()=>o4,IsMappedResult:()=>r4,IsNever:()=>s4,IsNot:()=>t4,IsNull:()=>a4,IsNumber:()=>e4,IsObject:()=>$M,IsOptional:()=>KV,IsPromise:()=>XM,IsProperties:()=>FV,IsReadonly:()=>LV,IsRecord:()=>ZM,IsRecursive:()=>IV,IsRef:()=>QM,IsRegExp:()=>YM,IsSchema:()=>EV,IsString:()=>JM,IsSymbol:()=>WM,IsTemplateLiteral:()=>zM,IsThis:()=>GM,IsTransform:()=>RV,IsTuple:()=>MM,IsUint8Array:()=>HM,IsUndefined:()=>qM,IsUnion:()=>BM,IsUnknown:()=>UM,IsUnsafe:()=>DM,IsVoid:()=>NM});var b4=Symbol.for("TypeBox.Transform"),x4=Symbol.for("TypeBox.Readonly"),k4=Symbol.for("TypeBox.Optional"),k6=Symbol.for("TypeBox.Hint"),s$=Symbol.for("TypeBox.Kind");function LV($){return Y$($)&&$[x4]==="Readonly"}function KV($){return Y$($)&&$[k4]==="Optional"}function g4($){return J0($,"Any")}function f4($){return J0($,"Argument")}function v4($){return J0($,"Array")}function y4($){return J0($,"AsyncIterator")}function h4($){return J0($,"BigInt")}function m4($){return J0($,"Boolean")}function d4($){return J0($,"Computed")}function c4($){return J0($,"Constructor")}function u4($){return J0($,"Date")}function l4($){return J0($,"Function")}function jV($){return J0($,"Import")}function p4($){return J0($,"Integer")}function FV($){return Y$($)}function i4($){return J0($,"Intersect")}function n4($){return J0($,"Iterator")}function J0($,X){return Y$($)&&s$ in $&&$[s$]===X}function VV($){return YY($)&&A$($.const)}function CV($){return YY($)&&NZ($.const)}function PV($){return YY($)&&r9($.const)}function SV($){return r9($)||NZ($)||A$($)}function YY($){return J0($,"Literal")}function o4($){return J0($,"MappedKey")}function r4($){return J0($,"MappedResult")}function s4($){return J0($,"Never")}function t4($){return J0($,"Not")}function a4($){return J0($,"Null")}function e4($){return J0($,"Number")}function $M($){return J0($,"Object")}function XM($){return J0($,"Promise")}function ZM($){return J0($,"Record")}function IV($){return Y$($)&&k6 in $&&$[k6]==="Recursive"}function QM($){return J0($,"Ref")}function YM($){return J0($,"RegExp")}function JM($){return J0($,"String")}function WM($){return J0($,"Symbol")}function zM($){return J0($,"TemplateLiteral")}function GM($){return J0($,"This")}function RV($){return Y$($)&&b4 in $}function MM($){return J0($,"Tuple")}function qM($){return J0($,"Undefined")}function BM($){return J0($,"Union")}function HM($){return J0($,"Uint8Array")}function UM($){return J0($,"Unknown")}function DM($){return J0($,"Unsafe")}function NM($){return J0($,"Void")}function wM($){return Y$($)&&s$ in $&&A$($[s$])}function EV($){return g4($)||f4($)||v4($)||m4($)||h4($)||y4($)||d4($)||c4($)||u4($)||l4($)||p4($)||i4($)||n4($)||YY($)||o4($)||r4($)||s4($)||t4($)||a4($)||e4($)||$M($)||XM($)||ZM($)||QM($)||YM($)||JM($)||WM($)||zM($)||GM($)||MM($)||qM($)||BM($)||HM($)||UM($)||DM($)||NM($)||wM($)}var TV={};iZ(TV,{IsAny:()=>KM,IsArgument:()=>jM,IsArray:()=>FM,IsAsyncIterator:()=>VM,IsBigInt:()=>CM,IsBoolean:()=>PM,IsComputed:()=>SM,IsConstructor:()=>IM,IsDate:()=>RM,IsFunction:()=>EM,IsImport:()=>vV,IsInteger:()=>TM,IsIntersect:()=>_M,IsIterator:()=>bM,IsKind:()=>Yq,IsKindOf:()=>W0,IsLiteral:()=>JY,IsLiteralBoolean:()=>yV,IsLiteralNumber:()=>kM,IsLiteralString:()=>xM,IsLiteralValue:()=>gM,IsMappedKey:()=>fM,IsMappedResult:()=>vM,IsNever:()=>yM,IsNot:()=>hM,IsNull:()=>mM,IsNumber:()=>dM,IsObject:()=>cM,IsOptional:()=>fV,IsPromise:()=>uM,IsProperties:()=>h6,IsReadonly:()=>gV,IsRecord:()=>lM,IsRecursive:()=>hV,IsRef:()=>pM,IsRegExp:()=>iM,IsSchema:()=>_$,IsString:()=>nM,IsSymbol:()=>oM,IsTemplateLiteral:()=>rM,IsThis:()=>sM,IsTransform:()=>tM,IsTuple:()=>aM,IsUint8Array:()=>$q,IsUndefined:()=>eM,IsUnion:()=>eJ,IsUnionLiteral:()=>mV,IsUnknown:()=>Xq,IsUnsafe:()=>Zq,IsVoid:()=>Qq,TypeGuardUnknownTypeError:()=>_V});var _V=class extends OV{},bV=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function OM($){try{return new RegExp($),!0}catch{return!1}}function tJ($){if(!A$($))return!1;for(let X=0;X<$.length;X++){let Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0}function AM($){return aJ($)||_$($)}function XY($){return wZ($)||_4($)}function k0($){return wZ($)||NZ($)}function aJ($){return wZ($)||r9($)}function E0($){return wZ($)||A$($)}function xV($){return wZ($)||A$($)&&tJ($)&&OM($)}function kV($){return wZ($)||A$($)&&tJ($)}function LM($){return wZ($)||_$($)}function gV($){return Y$($)&&$[x4]==="Readonly"}function fV($){return Y$($)&&$[k4]==="Optional"}function KM($){return W0($,"Any")&&E0($.$id)}function jM($){return W0($,"Argument")&&NZ($.index)}function FM($){return W0($,"Array")&&$.type==="array"&&E0($.$id)&&_$($.items)&&k0($.minItems)&&k0($.maxItems)&&aJ($.uniqueItems)&&LM($.contains)&&k0($.minContains)&&k0($.maxContains)}function VM($){return W0($,"AsyncIterator")&&$.type==="AsyncIterator"&&E0($.$id)&&_$($.items)}function CM($){return W0($,"BigInt")&&$.type==="bigint"&&E0($.$id)&&XY($.exclusiveMaximum)&&XY($.exclusiveMinimum)&&XY($.maximum)&&XY($.minimum)&&XY($.multipleOf)}function PM($){return W0($,"Boolean")&&$.type==="boolean"&&E0($.$id)}function SM($){return W0($,"Computed")&&A$($.target)&&OZ($.parameters)&&$.parameters.every((X)=>_$(X))}function IM($){return W0($,"Constructor")&&$.type==="Constructor"&&E0($.$id)&&OZ($.parameters)&&$.parameters.every((X)=>_$(X))&&_$($.returns)}function RM($){return W0($,"Date")&&$.type==="Date"&&E0($.$id)&&k0($.exclusiveMaximumTimestamp)&&k0($.exclusiveMinimumTimestamp)&&k0($.maximumTimestamp)&&k0($.minimumTimestamp)&&k0($.multipleOfTimestamp)}function EM($){return W0($,"Function")&&$.type==="Function"&&E0($.$id)&&OZ($.parameters)&&$.parameters.every((X)=>_$(X))&&_$($.returns)}function vV($){return W0($,"Import")&&nJ($,"$defs")&&Y$($.$defs)&&h6($.$defs)&&nJ($,"$ref")&&A$($.$ref)&&$.$ref in $.$defs}function TM($){return W0($,"Integer")&&$.type==="integer"&&E0($.$id)&&k0($.exclusiveMaximum)&&k0($.exclusiveMinimum)&&k0($.maximum)&&k0($.minimum)&&k0($.multipleOf)}function h6($){return Y$($)&&Object.entries($).every(([X,Z])=>tJ(X)&&_$(Z))}function _M($){return W0($,"Intersect")&&(A$($.type)&&$.type!=="object"?!1:!0)&&OZ($.allOf)&&$.allOf.every((X)=>_$(X)&&!tM(X))&&E0($.type)&&(aJ($.unevaluatedProperties)||LM($.unevaluatedProperties))&&E0($.$id)}function bM($){return W0($,"Iterator")&&$.type==="Iterator"&&E0($.$id)&&_$($.items)}function W0($,X){return Y$($)&&s$ in $&&$[s$]===X}function xM($){return JY($)&&A$($.const)}function kM($){return JY($)&&NZ($.const)}function yV($){return JY($)&&r9($.const)}function JY($){return W0($,"Literal")&&E0($.$id)&&gM($.const)}function gM($){return r9($)||NZ($)||A$($)}function fM($){return W0($,"MappedKey")&&OZ($.keys)&&$.keys.every((X)=>NZ(X)||A$(X))}function vM($){return W0($,"MappedResult")&&h6($.properties)}function yM($){return W0($,"Never")&&Y$($.not)&&Object.getOwnPropertyNames($.not).length===0}function hM($){return W0($,"Not")&&_$($.not)}function mM($){return W0($,"Null")&&$.type==="null"&&E0($.$id)}function dM($){return W0($,"Number")&&$.type==="number"&&E0($.$id)&&k0($.exclusiveMaximum)&&k0($.exclusiveMinimum)&&k0($.maximum)&&k0($.minimum)&&k0($.multipleOf)}function cM($){return W0($,"Object")&&$.type==="object"&&E0($.$id)&&h6($.properties)&&AM($.additionalProperties)&&k0($.minProperties)&&k0($.maxProperties)}function uM($){return W0($,"Promise")&&$.type==="Promise"&&E0($.$id)&&_$($.item)}function lM($){return W0($,"Record")&&$.type==="object"&&E0($.$id)&&AM($.additionalProperties)&&Y$($.patternProperties)&&((X)=>{let Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&OM(Z[0])&&Y$(X.patternProperties)&&_$(X.patternProperties[Z[0]])})($)}function hV($){return Y$($)&&k6 in $&&$[k6]==="Recursive"}function pM($){return W0($,"Ref")&&E0($.$id)&&A$($.$ref)}function iM($){return W0($,"RegExp")&&E0($.$id)&&A$($.source)&&A$($.flags)&&k0($.maxLength)&&k0($.minLength)}function nM($){return W0($,"String")&&$.type==="string"&&E0($.$id)&&k0($.minLength)&&k0($.maxLength)&&xV($.pattern)&&kV($.format)}function oM($){return W0($,"Symbol")&&$.type==="symbol"&&E0($.$id)}function rM($){return W0($,"TemplateLiteral")&&$.type==="string"&&A$($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function sM($){return W0($,"This")&&E0($.$id)&&A$($.$ref)}function tM($){return Y$($)&&b4 in $}function aM($){return W0($,"Tuple")&&$.type==="array"&&E0($.$id)&&NZ($.minItems)&&NZ($.maxItems)&&$.minItems===$.maxItems&&(wZ($.items)&&wZ($.additionalItems)&&$.minItems===0||OZ($.items)&&$.items.every((X)=>_$(X)))}function eM($){return W0($,"Undefined")&&$.type==="undefined"&&E0($.$id)}function mV($){return eJ($)&&$.anyOf.every((X)=>xM(X)||kM(X))}function eJ($){return W0($,"Union")&&E0($.$id)&&Y$($)&&OZ($.anyOf)&&$.anyOf.every((X)=>_$(X))}function $q($){return W0($,"Uint8Array")&&$.type==="Uint8Array"&&E0($.$id)&&k0($.minByteLength)&&k0($.maxByteLength)}function Xq($){return W0($,"Unknown")&&E0($.$id)}function Zq($){return W0($,"Unsafe")}function Qq($){return W0($,"Void")&&$.type==="void"&&E0($.$id)}function Yq($){return Y$($)&&s$ in $&&A$($[s$])&&!bV.includes($[s$])}function _$($){return Y$($)&&(KM($)||jM($)||FM($)||PM($)||CM($)||VM($)||SM($)||IM($)||RM($)||EM($)||TM($)||_M($)||bM($)||JY($)||fM($)||vM($)||yM($)||hM($)||mM($)||dM($)||cM($)||uM($)||lM($)||pM($)||iM($)||nM($)||oM($)||rM($)||sM($)||aM($)||eM($)||eJ($)||$q($)||Xq($)||Zq($)||Qq($)||Yq($))}var dV="(true|false)",cV="(0|[1-9][0-9]*)",uV="(.*)",lV="(?!.*)",vl=`^${dV}$`,yl=`^${cV}$`,hl=`^${uV}$`,ml=`^${lV}$`,t={};iZ(t,{Clear:()=>iV,Delete:()=>nV,Entries:()=>pV,Get:()=>sV,Has:()=>oV,Set:()=>rV});var s9=new Map;function pV(){return new Map(s9)}function iV(){return s9.clear()}function nV($){return s9.delete($)}function oV($){return s9.has($)}function rV($,X){s9.set($,X)}function sV($){return s9.get($)}var GX={};iZ(GX,{Clear:()=>aV,Delete:()=>eV,Entries:()=>tV,Get:()=>ZC,Has:()=>$C,Set:()=>XC});var t9=new Map;function tV(){return new Map(t9)}function aV(){return t9.clear()}function eV($){return t9.delete($)}function $C($){return t9.has($)}function XC($,X){t9.set($,X)}function ZC($){return t9.get($)}var B4;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(B4||(B4={}));var H4=($)=>$.charAt(0).toUpperCase()+$.slice(1),QC=($)=>C.Ref(`#/components/schemas/${$}`),YC=($,X)=>{let Z=$.toLowerCase();if(!X||X==="/")return Z+"Index";for(let Q of X.split("/"))Z+=Q.includes(":")?"By"+H4(Q.replace(":","")):H4(Q);return Z=Z.replace(/\?/g,"Optional"),Z},JC=/(\/:\w+\?)/g,Jq=($)=>{let X=$.match(JC);if(!X)return[$];let Q=[$.replace(/\?/g,"")];for(let Y=0;Y<X.length;Y++){let J=$.replace(X[Y],"");Q.push(...Jq(J))}return Q},ZY=($)=>$&&typeof $==="object"&&((s$ in $)&&$[s$]!=="Unknown"||$.type||$.properties||$.items),WC=($)=>{if($.charCodeAt($.length-1)===47)return $.slice(0,$.length-1);return $+"/"},T6={zod4:`import openapi from '@elysiajs/openapi'
import * as z from 'zod'

openapi({
  mapJsonSchema: {
    zod: z.toJSONSchema
  }
})`,zod3:`import openapi from '@elysiajs/openapi'
import { zodToJsonSchema } from 'zod-to-json-schema'

openapi({
  mapJsonSchema: {
    zod: zodToJsonSchema
  }
})`,valibot:`import openapi from '@elysiajs/openapi'
import { toJsonSchema } from '@valibot/to-json-schema'

openapi({
  mapJsonSchema: {
    valibot: toJsonSchema
  }
})`,effect:`import { JSONSchema } from 'effect'

openapi({
  mapJsonSchema: {
    effect: JSONSchema.make
  }
})`},K8={},r8=($,X)=>{let Z=$?.$ref;if(!Z)return $;let Q=Z.slice(Z.lastIndexOf("/")+1);if(Z&&X[Q])$=X[Q];return s8($)},j8=($,X)=>{if(!$)return;if(typeof $==="string")$=QC($);if(s$ in $)return s8($);if(s$ in $||!$?.["~standard"])return;let Z=$["~standard"].vendor;try{if(X?.[Z]&&typeof X[Z]==="function")return s8(X[Z]($));switch(Z){case"zod":if(K8.zod4||K8.zod3)break;if(console.warn("[@elysiajs/openapi] Zod doesn't provide JSON Schema method on the schema"),"_zod"in $)K8.zod4=!0,console.warn(`For Zod v4, please provide z.toJSONSchema as follows:
`),console.warn(T6.zod4);else K8.zod3=!0,console.warn(`For Zod v3, please install zod-to-json-schema package and use it like this:
`),console.warn(T6.zod3);break;case"valibot":if(K8.valibot)break;K8.valibot=!0,console.warn("[@elysiajs/openapi] Valibot require a separate package for JSON Schema conversion"),console.warn(`Please install @valibot/to-json-schema package and use it like this:
`),console.warn(T6.valibot);break;case"effect":if(K8.effect)break;K8.effect=!0,console.warn("[@elysiajs/openapi] Effect Schema doesn't provide JSON Schema method on the schema"),console.warn(`please provide JSONSchema from 'effect' package as follows:
`),console.warn(T6.effect);break}if(Z==="arktype")return s8($?.toJsonSchema?.());return s8($.toJSONSchema?.()??$?.toJsonSchema?.())}catch(Q){console.warn(Q)}},s8=($)=>{if(!$||typeof $!=="object")return $;if(s$ in $){let Z=$;if(Z[s$]==="Union"&&Z.anyOf&&Array.isArray(Z.anyOf)&&Z.anyOf.length>0&&Z.anyOf.every((Q)=>Q&&typeof Q==="object"&&Q.const!==void 0))return{type:"string",enum:Z.anyOf.map((Q)=>Q.const)}}let X=$;if(X.type==="object"&&X.properties){let Z={};for(let[Q,Y]of Object.entries(X.properties))Z[Q]=s8(Y);return{...X,properties:Z}}if(X.type==="array"&&X.items)return{...X,items:s8(X.items)};return X};function U4($,X,Z,Q){let{methods:Y=["options"],staticFile:J=!0,tags:W}=X??{};Y=Y.map((w)=>w.toLowerCase());let z=Array.isArray(X?.paths)?X.paths:typeof X?.paths!=="undefined"?[X.paths]:[],G=Object.create(null),M=$.getGlobalDefinitions?.().type,q=$.getGlobalRoutes();if(Z){if(!Array.isArray(Z))Z=[Z];for(let w=0;w<Z.length;w++){let H=Z[w];if(typeof H==="function")Z[w]=H()}}for(let w of q){if(w.hooks?.detail?.hide)continue;let H=w.method.toLowerCase();if(J&&w.path.includes(".")||z.includes(w.path)||Y.includes(H))continue;let U=w.hooks??{};if(Z?.length)for(let A of Z){if(!A)continue;let N=A[w.path]?.[H]??A[WC(w.path)]?.[H];if(!N)continue;if(!U.body&&ZY(N.body))U.body=N.body;if(!U.query&&ZY(N.query))U.query=N.query;if(!U.params&&ZY(N.params))U.params=N.params;if(!U.headers&&ZY(N.headers))U.headers=N.headers;if(N.response){for(let[R,u]of Object.entries(N.response))if(ZY(u)){if(!U.response)U.response={};else if(typeof U.response!=="object"||U.response.type||U.response.$ref||U.response["~standard"])U.response={200:U.response};if(!U.response[R])try{U.response[R]=u}catch(y){console.log("[@elysiajs/openapi/gen] Failed to assigned response schema"),console.log(y)}}}}if(W&&U.detail.tags?.some((A)=>W?.includes(A)))continue;let O={...U.detail},F=[];if(U.params){let A=r8(j8(U.params,Q),M);if(A&&A.type==="object"&&A.properties)for(let[N,R]of Object.entries(A.properties))F.push({name:N,in:"path",required:!0,schema:R})}else for(let A of w.path.matchAll(/:([^/]+)/g)){let N=A[1].replace("?","");F.push({name:N,in:"path",required:!0,schema:{type:"string"}})}if(U.query){let A=r8(j8(U.query,Q),M);if(A&&A.type==="object"&&A.properties){let N=A.required||[];for(let[R,u]of Object.entries(A.properties))F.push({name:R,in:"query",required:N.includes(R),schema:u})}}if(U.headers){let A=r8(j8(U.headers,Q),M);if(A&&A.type==="object"&&A.properties){let N=A.required||[];for(let[R,u]of Object.entries(A.properties))F.push({name:R,in:"header",required:N.includes(R),schema:u})}}if(U.cookie){let A=r8(j8(U.cookie,Q),M);if(A&&A.type==="object"&&A.properties){let N=A.required||[];for(let[R,u]of Object.entries(A.properties))F.push({name:R,in:"cookie",required:N.includes(R),schema:u})}}if(F.length>0)O.parameters=F;if(U.body&&H!=="get"&&H!=="head"){let A=j8(U.body,Q);if(A){let{type:N,description:R,$ref:u,...y}=r8(A,M);if(U.parse){let b={},_=U.parse;for(let v of _){if(typeof v.fn==="function")continue;switch(v.fn){case"text":case"text/plain":b["text/plain"]={schema:A};continue;case"urlencoded":case"application/x-www-form-urlencoded":b["application/x-www-form-urlencoded"]={schema:A};continue;case"json":case"application/json":b["application/json"]={schema:A};continue;case"formdata":case"multipart/form-data":b["multipart/form-data"]={schema:A};continue}}O.requestBody={description:R,content:b,required:!0}}else O.requestBody={description:R,required:!0,content:N==="string"||N==="number"||N==="integer"||N==="boolean"?{"text/plain":{schema:A}}:{"application/json":{schema:A},"application/x-www-form-urlencoded":{schema:A},"multipart/form-data":{schema:A}}}}}if(U.response)if(O.responses={},typeof U.response==="object"&&!U.response.type&&!U.response.$ref&&!U.response["~standard"])for(let[A,N]of Object.entries(U.response)){let R=j8(N,Q);if(!R)continue;let{type:u,description:y,$ref:b,..._}=r8(R,M);O.responses[A]={description:y??`Response for status ${A}`,content:u==="void"||u==="null"||u==="undefined"?{type:u,description:y}:u==="string"||u==="number"||u==="integer"||u==="boolean"?{"text/plain":{schema:R}}:{"application/json":{schema:R}}}}else{let A=j8(U.response,Q);if(A){let{type:N,description:R,...u}=r8(A,M),y=N;O.responses["200"]={description:R??"Response for status 200",content:y==="void"||y==="null"||y==="undefined"?{type:y,description:R}:y==="string"||y==="number"||y==="integer"||y==="boolean"?{"text/plain":{schema:A}}:{"application/json":{schema:A}}}}}for(let A of Jq(w.path)){let N=U.detail?.operationId??YC(w.method,A);if(A=A.replace(/:([^/]+)/g,"{$1}"),!G[A])G[A]={};let R=G[A];if(H!=="all"){R[H]={...O,operationId:N};continue}for(let u of["get","post","put","delete","patch","head","options","trace"])R[u]={...O,operationId:N}}}let B=Object.create(null);if(M)for(let[w,H]of Object.entries(M)){let U=j8(H,Q);if(U)B[w]=U}return{components:{schemas:B},paths:G}}var zC={};iZ(zC,{Array:()=>OC,As:()=>NC,Const:()=>AC,Context:()=>wC,Guard:()=>Wq,Ident:()=>jC,Identity:()=>YZ,Module:()=>fC,Number:()=>FC,Optional:()=>VC,Parse:()=>Hq,Ref:()=>LC,String:()=>KC,Token:()=>zq,Tuple:()=>CC,Union:()=>PC});var Wq={};iZ(Wq,{IsArray:()=>X2,IsConst:()=>Z2,IsContext:()=>Q2,IsIdent:()=>Y2,IsNumber:()=>J2,IsOptional:()=>W2,IsParser:()=>g6,IsRef:()=>z2,IsString:()=>G2,IsTuple:()=>M2,IsUnion:()=>q2});function S$($,X){return X in $}function bX($){return typeof $==="object"&&$!==null}function $2($){return globalThis.Array.isArray($)}function X2($){return bX($)&&S$($,"type")&&$.type==="Array"&&S$($,"parser")&&bX($.parser)}function Z2($){return bX($)&&S$($,"type")&&$.type==="Const"&&S$($,"value")&&typeof $.value==="string"}function Q2($){return bX($)&&S$($,"type")&&$.type==="Context"&&S$($,"left")&&g6($.left)&&S$($,"right")&&g6($.right)}function Y2($){return bX($)&&S$($,"type")&&$.type==="Ident"}function J2($){return bX($)&&S$($,"type")&&$.type==="Number"}function W2($){return bX($)&&S$($,"type")&&$.type==="Optional"&&S$($,"parser")&&bX($.parser)}function z2($){return bX($)&&S$($,"type")&&$.type==="Ref"&&S$($,"ref")&&typeof $.ref==="string"}function G2($){return bX($)&&S$($,"type")&&$.type==="String"&&S$($,"options")&&$2($.options)}function M2($){return bX($)&&S$($,"type")&&$.type==="Tuple"&&S$($,"parsers")&&$2($.parsers)}function q2($){return bX($)&&S$($,"type")&&$.type==="Union"&&S$($,"parsers")&&$2($.parsers)}function g6($){return X2($)||Z2($)||Q2($)||Y2($)||J2($)||W2($)||z2($)||G2($)||M2($)||q2($)}var zq={};iZ(zq,{Const:()=>Gq,Ident:()=>Mq,Number:()=>qq,String:()=>Bq});var U$;(function($){function X(q){return q===32}$.IsWhitespace=X;function Z(q){return q===10}$.IsNewline=Z;function Q(q){return q>=65&&q<=90||q>=97&&q<=122}$.IsAlpha=Q;function Y(q){return q===48}$.IsZero=Y;function J(q){return q>=49&&q<=57}$.IsNonZero=J;function W(q){return J(q)||Y(q)}$.IsDigit=W;function z(q){return q===46}$.IsDot=z;function G(q){return q===95}$.IsUnderscore=G;function M(q){return q===36}$.IsDollarSign=M})(U$||(U$={}));var a8;(function($){function X(Q){for(let Y=0;Y<Q.length;Y++){if(U$.IsWhitespace(Q.charCodeAt(Y)))continue;return Q.slice(Y)}return Q}$.TrimWhitespaceOnly=X;function Z(Q){return Q.trimStart()}$.TrimAll=Z})(a8||(a8={}));function GC($,X){if($.length>X.length)return!1;for(let Z=0;Z<$.length;Z++)if($.charCodeAt(Z)!==X.charCodeAt(Z))return!1;return!0}function pJ($,X){return GC($,X)?[X.slice(0,$.length),X.slice($.length)]:[]}function Gq($,X){if($.length===0)return["",X];let Z=$.charCodeAt(0);return U$.IsNewline(Z)?pJ($,a8.TrimWhitespaceOnly(X)):U$.IsWhitespace(Z)?pJ($,X):pJ($,a8.TrimAll(X))}function MC($){return U$.IsAlpha($)||U$.IsDollarSign($)||U$.IsUnderscore($)}function qC($){return U$.IsAlpha($)||U$.IsDigit($)||U$.IsDollarSign($)||U$.IsUnderscore($)}function BC($){if(!MC($.charCodeAt(0)))return[];for(let X=1;X<$.length;X++){let Z=$.charCodeAt(X);if(qC(Z))continue;let Q=$.slice(0,X),Y=$.slice(X);return[Q,Y]}return[$,""]}function Mq($){return BC(a8.TrimAll($))}function HC($,X){let Z=$.charCodeAt(X+0),Q=$.charCodeAt(X+1);return U$.IsNonZero(Z)||U$.IsZero(Z)&&!U$.IsDigit(Q)||U$.IsZero(Z)&&U$.IsDot(Q)||U$.IsDot(Z)&&U$.IsDigit(Q)}function UC($){let X=$.charAt(0)==="-",Z=X?1:0;if(!HC($,Z))return[];let Q=X?"-":"",Y=!1;for(let J=Z;J<$.length;J++){let W=$.charCodeAt(J);if(U$.IsDigit(W))continue;if(U$.IsDot(W)){if(Y){let M=$.slice(Z,J),q=$.slice(J);return[`${Q}${M}`,q]}Y=!0;continue}let z=$.slice(Z,J),G=$.slice(J);return[`${Q}${z}`,G]}return[$,""]}function qq($){return UC(a8.TrimAll($))}function DC($,X){let Z=X.charAt(0);if(!$.includes(Z))return[];let Q=Z;for(let Y=1;Y<X.length;Y++)if(X.charAt(Y)===Q){let W=X.slice(1,Y),z=X.slice(Y+1);return[W,z]}return[]}function Bq($,X){return DC($,a8.TrimAll(X))}var YZ=($)=>$,NC=($)=>(X)=>$;function wC(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],$[1],YZ];return{type:"Context",left:X,right:Z,mapping:Q}}function OC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Array",parser:X,mapping:Z}}function AC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Const",value:X,mapping:Z}}function LC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Ref",ref:X,mapping:Z}}function KC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"String",options:X,mapping:Z}}function jC(...$){return{type:"Ident",mapping:$.length===1?$[0]:YZ}}function FC(...$){return{type:"Number",mapping:$.length===1?$[0]:YZ}}function VC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Optional",parser:X,mapping:Z}}function CC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Tuple",parsers:X,mapping:Z}}function PC(...$){let[X,Z]=$.length===2?[$[0],$[1]]:[$[0],YZ];return{type:"Union",parsers:X,mapping:Z}}function SC($,X,Z,Q,Y){let J=F8($,X,Q,Y);return J.length===2?F8($,Z,J[1],J[0]):[]}function IC($,X,Z,Q){let Y=[],J=Z;while(J.length>0){let W=F8($,X,J,Q);if(W.length===0)return[Y,J];Y.push(W[0]),J=W[1]}return[Y,J]}function RC($,X,Z){return Gq($,X)}function EC($,X){return Mq($)}function TC($,X){return qq($)}function _C($,X,Z,Q){let Y=F8($,X,Z,Q);return Y.length===2?[[Y[0]],Y[1]]:[[],Z]}function bC($,X,Z,Q){let Y=$[X];if(!g6(Y))throw Error(`Cannot dereference Parser '${X}'`);return F8($,Y,Z,Q)}function xC($,X,Z){return Bq($,X)}function kC($,X,Z,Q){let Y=[],J=Z;for(let W of X){let z=F8($,W,J,Q);if(z.length===0)return[];Y.push(z[0]),J=z[1]}return[Y,J]}function gC($,X,Z,Q){for(let Y of X){let J=F8($,Y,Z,Q);if(J.length===0)continue;return J}return[]}function F8($,X,Z,Q){let Y=Q2(X)?SC($,X.left,X.right,Z,Q):X2(X)?IC($,X.parser,Z,Q):Z2(X)?RC(X.value,Z,Q):Y2(X)?EC(Z,Q):J2(X)?TC(Z,Q):W2(X)?_C($,X.parser,Z,Q):z2(X)?bC($,X.ref,Z,Q):G2(X)?xC(X.options,Z,Q):M2(X)?kC($,X.parsers,Z,Q):q2(X)?gC($,X.parsers,Z,Q):[];return Y.length===2?[X.mapping(Y[0],Q),Y[1]]:Y}function Hq(...$){let X=typeof $[1]==="string"?!1:!0,[Z,Q,Y,J]=X?[$[0],$[1],$[2],$[3]]:[{},$[0],$[1],$[2]];return F8(Z,Q,Y,J)}var fC=class{constructor($){this.properties=$}Parse(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:$.length===2?[$[0],$[1],void 0]:(()=>{throw Error("Invalid parse arguments")})();return Hq(this.properties,this.properties[X],Z,Q)}};var iJ;function Uq($){return{lang:$?.lang??iJ?.lang,message:$?.message,abortEarly:$?.abortEarly??iJ?.abortEarly,abortPipeEarly:$?.abortPipeEarly??iJ?.abortPipeEarly}}var vC;function yC($){return vC?.get($)}var hC;function mC($){return hC?.get($)}var dC;function cC($,X){return dC?.get($)?.get(X)}function uC($){let X=typeof $;if(X==="string")return`"${$}"`;if(X==="number"||X==="bigint"||X==="boolean")return`${$}`;if(X==="object"||X==="function")return($&&Object.getPrototypeOf($)?.constructor?.name)??"null";return X}function v0($,X,Z,Q,Y){let J=Y&&"input"in Y?Y.input:Z.value,W=Y?.expected??$.expects??null,z=Y?.received??uC(J),G={kind:$.kind,type:$.type,input:J,expected:W,received:z,message:`Invalid ${X}: ${W?`Expected ${W} but r`:"R"}eceived ${z}`,requirement:$.requirement,path:Y?.path,issues:Y?.issues,lang:Q.lang,abortEarly:Q.abortEarly,abortPipeEarly:Q.abortPipeEarly},M=$.kind==="schema",q=Y?.message??$.message??cC($.reference,G.lang)??(M?mC(G.lang):null)??Q.message??yC(G.lang);if(q!==void 0)G.message=typeof q==="function"?q(G):q;if(M)Z.typed=!1;if(Z.issues)Z.issues.push(G);else Z.issues=[G]}function Dq($){return{version:1,vendor:"valibot",validate(X){return $["~run"]({value:X},Uq())}}}var lC=/\D/gu;function pC($){let X=$.replace(lC,""),Z=X.length,Q=1,Y=0;while(Z){let J=+X[--Z];Q^=1,Y+=Q?[0,2,4,6,8,1,3,5,7,9][J]:J}return Y%10===0}var iC=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,nC=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,oC=/^[a-z][\da-z]*$/u,rC=/^[+-]?(?:\d*\.)?\d+$/u,sC=/^\d+$/u,tC=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,aC=new RegExp("^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$","u"),eC=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,$P=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,XP=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,ZP=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,QP=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3]):[0-5]\d$/u,YP=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,JP=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,WP=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,zP=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,GP=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,MP=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,qP=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,BP=/^[\w-]+$/u,HP=/^(?:0o)?[0-7]+$/u,UP=/^[\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u,DP=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function Nq($){return{kind:"validation",type:"base64",reference:Nq,async:!1,expects:null,requirement:iC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"Base64",X,Z);return X}}}function wq($){return{kind:"validation",type:"bic",reference:wq,async:!1,expects:null,requirement:nC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"BIC",X,Z);return X}}}var NP=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,wP=/[- ]/gu,OP=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function Oq($){return{kind:"validation",type:"credit_card",reference:Oq,async:!1,expects:null,requirement(X){let Z;return NP.test(X)&&(Z=X.replace(wP,""))&&OP.some((Q)=>Q.test(Z))&&pC(Z)},message:$,"~run"(X,Z){if(X.typed&&!this.requirement(X.value))v0(this,"credit card",X,Z);return X}}}function Aq($){return{kind:"validation",type:"cuid2",reference:Aq,async:!1,expects:null,requirement:oC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"Cuid2",X,Z);return X}}}function Lq($){return{kind:"validation",type:"decimal",reference:Lq,async:!1,expects:null,requirement:rC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"decimal",X,Z);return X}}}function Kq($){return{kind:"validation",type:"digits",reference:Kq,async:!1,expects:null,requirement:sC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"digits",X,Z);return X}}}function jq($){return{kind:"validation",type:"email",reference:jq,expects:null,async:!1,requirement:tC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"email",X,Z);return X}}}function Fq($){return{kind:"validation",type:"emoji",reference:Fq,async:!1,expects:null,requirement:aC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"emoji",X,Z);return X}}}function Vq($){return{kind:"validation",type:"ip",reference:Vq,async:!1,expects:null,requirement:XP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"IP",X,Z);return X}}}function Cq($){return{kind:"validation",type:"ipv4",reference:Cq,async:!1,expects:null,requirement:eC,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"IPv4",X,Z);return X}}}function Pq($){return{kind:"validation",type:"ipv6",reference:Pq,async:!1,expects:null,requirement:$P,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"IPv6",X,Z);return X}}}function Sq($){return{kind:"validation",type:"iso_date",reference:Sq,async:!1,expects:null,requirement:ZP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"date",X,Z);return X}}}function Iq($){return{kind:"validation",type:"iso_date_time",reference:Iq,async:!1,expects:null,requirement:QP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"date-time",X,Z);return X}}}function Rq($){return{kind:"validation",type:"iso_time",reference:Rq,async:!1,expects:null,requirement:YP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"time",X,Z);return X}}}function Eq($){return{kind:"validation",type:"iso_time_second",reference:Eq,async:!1,expects:null,requirement:JP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"time-second",X,Z);return X}}}function Tq($){return{kind:"validation",type:"iso_timestamp",reference:Tq,async:!1,expects:null,requirement:WP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"timestamp",X,Z);return X}}}function _q($){return{kind:"validation",type:"iso_week",reference:_q,async:!1,expects:null,requirement:zP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"week",X,Z);return X}}}function bq($){return{kind:"validation",type:"mac",reference:bq,async:!1,expects:null,requirement:qP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"MAC",X,Z);return X}}}function xq($){return{kind:"validation",type:"mac48",reference:xq,async:!1,expects:null,requirement:GP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"48-bit MAC",X,Z);return X}}}function kq($){return{kind:"validation",type:"mac64",reference:kq,async:!1,expects:null,requirement:MP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"64-bit MAC",X,Z);return X}}}function gq($){return{kind:"validation",type:"nanoid",reference:gq,async:!1,expects:null,requirement:BP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"Nano ID",X,Z);return X}}}function fq($){return{kind:"validation",type:"octal",reference:fq,async:!1,expects:null,requirement:HP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"octal",X,Z);return X}}}function vq($){return{kind:"validation",type:"ulid",reference:vq,async:!1,expects:null,requirement:UP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"ULID",X,Z);return X}}}function yq($){return{kind:"validation",type:"url",reference:yq,async:!1,expects:null,requirement(X){try{return new URL(X),!0}catch{return!1}},message:$,"~run"(X,Z){if(X.typed&&!this.requirement(X.value))v0(this,"URL",X,Z);return X}}}function hq($){return{kind:"validation",type:"uuid",reference:hq,async:!1,expects:null,requirement:DP,message:$,"~run"(X,Z){if(X.typed&&!this.requirement.test(X.value))v0(this,"UUID",X,Z);return X}}}function y0($){return{kind:"schema",type:"string",reference:y0,expects:"string",async:!1,message:$,get "~standard"(){return Dq(this)},"~run"(X,Z){if(typeof X.value==="string")X.typed=!0;else v0(this,"type",X,Z);return X}}}function i0(...$){return{...$[0],pipe:$,get "~standard"(){return Dq(this)},"~run"(X,Z){for(let Q of $)if(Q.kind!=="metadata"){if(X.issues&&(Q.kind==="schema"||Q.kind==="transformation")){X.typed=!1;break}if(!X.issues||!Z.abortEarly&&!Z.abortPipeEarly)X=Q["~run"](X,Z)}return X}}}function z0($,X,Z){let Q=$["~run"]({value:X},Uq(Z));return{typed:Q.typed,success:!Q.issues,output:Q.value,issues:Q.issues}}t.Set("base64",($)=>z0(i0(y0(),Nq()),$).success);t.Set("bic",($)=>z0(i0(y0(),wq()),$).success);t.Set("credit_card",($)=>z0(i0(y0(),Oq()),$).success);t.Set("cuid2",($)=>z0(i0(y0(),Aq()),$).success);t.Set("decimal",($)=>z0(i0(y0(),Lq()),$).success);t.Set("digits",($)=>z0(i0(y0(),Kq()),$).success);t.Set("email",($)=>z0(i0(y0(),jq()),$).success);t.Set("emoji",($)=>z0(i0(y0(),Fq()),$).success);t.Set("ip",($)=>z0(i0(y0(),Vq()),$).success);t.Set("ipv4",($)=>z0(i0(y0(),Cq()),$).success);t.Set("ipv6",($)=>z0(i0(y0(),Pq()),$).success);t.Set("iso_date",($)=>z0(i0(y0(),Sq()),$).success);t.Set("iso_date_time",($)=>z0(i0(y0(),Iq()),$).success);t.Set("iso_time",($)=>z0(i0(y0(),Rq()),$).success);t.Set("iso_time_second",($)=>z0(i0(y0(),Eq()),$).success);t.Set("iso_timestamp",($)=>z0(i0(y0(),Tq()),$).success);t.Set("iso_week",($)=>z0(i0(y0(),_q()),$).success);t.Set("mac",($)=>z0(i0(y0(),bq()),$).success);t.Set("mac48",($)=>z0(i0(y0(),xq()),$).success);t.Set("mac64",($)=>z0(i0(y0(),kq()),$).success);t.Set("nanoid",($)=>z0(i0(y0(),gq()),$).success);t.Set("octal",($)=>z0(i0(y0(),fq()),$).success);t.Set("ulid",($)=>z0(i0(y0(),vq()),$).success);t.Set("url",($)=>z0(i0(y0(),yq()),$).success);t.Set("uuid",($)=>z0(i0(y0(),hq()),$).success);GX.Set("ValibotBlob",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotCustom",($,X)=>z0($.schema,X).success);GX.Set("ValibotEnum",($,X)=>{return z0($.type,X).success});GX.Set("ValibotFile",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotFunction",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotInstance",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotLooseTuple",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotMap",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotNaN",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotPromise",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotSet",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotTupleWithRest",($,X)=>{return z0($.schema,X).success});GX.Set("ValibotVariant",($,X)=>{return z0($.schema,X).success});var dl=Object.freeze({status:"aborted"});function k($,X,Z){function Q(z,G){var M;Object.defineProperty(z,"_zod",{value:z._zod??{},enumerable:!1}),(M=z._zod).traits??(M.traits=new Set),z._zod.traits.add($),X(z,G);for(let q in W.prototype)if(!(q in z))Object.defineProperty(z,q,{value:W.prototype[q].bind(z)});z._zod.constr=W,z._zod.def=G}let Y=Z?.Parent??Object;class J extends Y{}Object.defineProperty(J,"name",{value:$});function W(z){var G;let M=Z?.Parent?new J:this;Q(M,z),(G=M._zod).deferred??(G.deferred=[]);for(let q of M._zod.deferred)q();return M}return Object.defineProperty(W,"init",{value:Q}),Object.defineProperty(W,Symbol.hasInstance,{value:(z)=>{if(Z?.Parent&&z instanceof Z.Parent)return!0;return z?._zod?.traits?.has($)}}),Object.defineProperty(W,"name",{value:$}),W}var cl=Symbol("zod_brand"),n9=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},mq=class extends Error{constructor($){super(`Encountered unidirectional transform during encode: ${$}`);this.name="ZodEncodeError"}},D4={};function e8($){if($)Object.assign(D4,$);return D4}var $9={};iZ($9,{BIGINT_FORMAT_RANGES:()=>dP,Class:()=>XS,NUMBER_FORMAT_RANGES:()=>mP,aborted:()=>t8,allowsEval:()=>bP,assert:()=>FP,assertEqual:()=>AP,assertIs:()=>KP,assertNever:()=>jP,assertNotEqual:()=>LP,assignProp:()=>C8,base64ToUint8Array:()=>lq,base64urlToUint8Array:()=>tP,cached:()=>dq,captureStackTrace:()=>B2,cleanEnum:()=>sP,cleanRegex:()=>d6,clone:()=>nZ,cloneDef:()=>IP,createTransparentProxy:()=>yP,defineLazy:()=>p0,esc:()=>_P,escapeRegex:()=>c6,extend:()=>lP,finalizeIssue:()=>V8,floatSafeRemainder:()=>PP,getElementAtPath:()=>RP,getEnumValues:()=>VP,getLengthableOrigin:()=>u6,getParsedType:()=>gP,getSizableOrigin:()=>rP,hexToUint8Array:()=>eP,isObject:()=>oJ,isPlainObject:()=>o9,issue:()=>v6,joinValues:()=>CP,jsonStringifyReplacer:()=>f6,merge:()=>iP,mergeDefs:()=>P8,normalizeParams:()=>Q0,nullish:()=>m6,numKeys:()=>kP,objectClone:()=>SP,omit:()=>uP,optionalKeys:()=>hP,partial:()=>nP,pick:()=>cP,prefixIssues:()=>uq,primitiveTypes:()=>vP,promiseAllObject:()=>EP,propertyKeyTypes:()=>fP,randomString:()=>TP,required:()=>oP,safeExtend:()=>pP,shallowClone:()=>xP,stringifyPrimitive:()=>cq,uint8ArrayToBase64:()=>pq,uint8ArrayToBase64url:()=>aP,uint8ArrayToHex:()=>$S,unwrapMessage:()=>QY});function AP($){return $}function LP($){return $}function KP($){}function jP($){throw new Error}function FP($){}function VP($){let X=Object.values($).filter((Q)=>typeof Q==="number");return Object.entries($).filter(([Q,Y])=>X.indexOf(+Q)===-1).map(([Q,Y])=>Y)}function CP($,X="|"){return $.map((Z)=>cq(Z)).join(X)}function f6($,X){if(typeof X==="bigint")return X.toString();return X}function dq($){return{get value(){{let Z=$();return Object.defineProperty(this,"value",{value:Z}),Z}throw new Error("cached value already set")}}}function m6($){return $===null||$===void 0}function d6($){let X=$.startsWith("^")?1:0,Z=$.endsWith("$")?$.length-1:$.length;return $.slice(X,Z)}function PP($,X){let Z=($.toString().split(".")[1]||"").length,Q=X.toString(),Y=(Q.split(".")[1]||"").length;if(Y===0&&/\d?e-\d?/.test(Q)){let G=Q.match(/\d?e-(\d?)/);if(G?.[1])Y=Number.parseInt(G[1])}let J=Z>Y?Z:Y,W=Number.parseInt($.toFixed(J).replace(".","")),z=Number.parseInt(X.toFixed(J).replace(".",""));return W%z/10**J}var N4=Symbol("evaluating");function p0($,X,Z){let Q=void 0;Object.defineProperty($,X,{get(){if(Q===N4)return;if(Q===void 0)Q=N4,Q=Z();return Q},set(Y){Object.defineProperty($,X,{value:Y})},configurable:!0})}function SP($){return Object.create(Object.getPrototypeOf($),Object.getOwnPropertyDescriptors($))}function C8($,X,Z){Object.defineProperty($,X,{value:Z,writable:!0,enumerable:!0,configurable:!0})}function P8(...$){let X={};for(let Z of $){let Q=Object.getOwnPropertyDescriptors(Z);Object.assign(X,Q)}return Object.defineProperties({},X)}function IP($){return P8($._zod.def)}function RP($,X){if(!X)return $;return X.reduce((Z,Q)=>Z?.[Q],$)}function EP($){let X=Object.keys($),Z=X.map((Q)=>$[Q]);return Promise.all(Z).then((Q)=>{let Y={};for(let J=0;J<X.length;J++)Y[X[J]]=Q[J];return Y})}function TP($=10){let Z="";for(let Q=0;Q<$;Q++)Z+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return Z}function _P($){return JSON.stringify($)}var B2="captureStackTrace"in Error?Error.captureStackTrace:(...$)=>{};function oJ($){return typeof $==="object"&&$!==null&&!Array.isArray($)}var bP=dq(()=>{if(typeof navigator!=="undefined"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});function o9($){if(oJ($)===!1)return!1;let X=$.constructor;if(X===void 0)return!0;let Z=X.prototype;if(oJ(Z)===!1)return!1;if(Object.prototype.hasOwnProperty.call(Z,"isPrototypeOf")===!1)return!1;return!0}function xP($){if(o9($))return{...$};if(Array.isArray($))return[...$];return $}function kP($){let X=0;for(let Z in $)if(Object.prototype.hasOwnProperty.call($,Z))X++;return X}var gP=($)=>{let X=typeof $;switch(X){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map!=="undefined"&&$ instanceof Map)return"map";if(typeof Set!=="undefined"&&$ instanceof Set)return"set";if(typeof Date!=="undefined"&&$ instanceof Date)return"date";if(typeof File!=="undefined"&&$ instanceof File)return"file";return"object";default:throw new Error(`Unknown data type: ${X}`)}},fP=new Set(["string","number","symbol"]),vP=new Set(["string","number","bigint","boolean","symbol","undefined"]);function c6($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nZ($,X,Z){let Q=new $._zod.constr(X??$._zod.def);if(!X||Z?.parent)Q._zod.parent=$;return Q}function Q0($){let X=$;if(!X)return{};if(typeof X==="string")return{error:()=>X};if(X?.message!==void 0){if(X?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");X.error=X.message}if(delete X.message,typeof X.error==="string")return{...X,error:()=>X.error};return X}function yP($){let X;return new Proxy({},{get(Z,Q,Y){return X??(X=$()),Reflect.get(X,Q,Y)},set(Z,Q,Y,J){return X??(X=$()),Reflect.set(X,Q,Y,J)},has(Z,Q){return X??(X=$()),Reflect.has(X,Q)},deleteProperty(Z,Q){return X??(X=$()),Reflect.deleteProperty(X,Q)},ownKeys(Z){return X??(X=$()),Reflect.ownKeys(X)},getOwnPropertyDescriptor(Z,Q){return X??(X=$()),Reflect.getOwnPropertyDescriptor(X,Q)},defineProperty(Z,Q,Y){return X??(X=$()),Reflect.defineProperty(X,Q,Y)}})}function cq($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function hP($){return Object.keys($).filter((X)=>{return $[X]._zod.optin==="optional"&&$[X]._zod.optout==="optional"})}var mP={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},dP={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function cP($,X){let Z=$._zod.def,Q=P8($._zod.def,{get shape(){let Y={};for(let J in X){if(!(J in Z.shape))throw new Error(`Unrecognized key: "${J}"`);if(!X[J])continue;Y[J]=Z.shape[J]}return C8(this,"shape",Y),Y},checks:[]});return nZ($,Q)}function uP($,X){let Z=$._zod.def,Q=P8($._zod.def,{get shape(){let Y={...$._zod.def.shape};for(let J in X){if(!(J in Z.shape))throw new Error(`Unrecognized key: "${J}"`);if(!X[J])continue;delete Y[J]}return C8(this,"shape",Y),Y},checks:[]});return nZ($,Q)}function lP($,X){if(!o9(X))throw new Error("Invalid input to extend: expected a plain object");let Z=$._zod.def.checks;if(Z&&Z.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let Y=P8($._zod.def,{get shape(){let J={...$._zod.def.shape,...X};return C8(this,"shape",J),J},checks:[]});return nZ($,Y)}function pP($,X){if(!o9(X))throw new Error("Invalid input to safeExtend: expected a plain object");let Z={...$._zod.def,get shape(){let Q={...$._zod.def.shape,...X};return C8(this,"shape",Q),Q},checks:$._zod.def.checks};return nZ($,Z)}function iP($,X){let Z=P8($._zod.def,{get shape(){let Q={...$._zod.def.shape,...X._zod.def.shape};return C8(this,"shape",Q),Q},get catchall(){return X._zod.def.catchall},checks:[]});return nZ($,Z)}function nP($,X,Z){let Q=P8(X._zod.def,{get shape(){let Y=X._zod.def.shape,J={...Y};if(Z)for(let W in Z){if(!(W in Y))throw new Error(`Unrecognized key: "${W}"`);if(!Z[W])continue;J[W]=$?new $({type:"optional",innerType:Y[W]}):Y[W]}else for(let W in Y)J[W]=$?new $({type:"optional",innerType:Y[W]}):Y[W];return C8(this,"shape",J),J},checks:[]});return nZ(X,Q)}function oP($,X,Z){let Q=P8(X._zod.def,{get shape(){let Y=X._zod.def.shape,J={...Y};if(Z)for(let W in Z){if(!(W in J))throw new Error(`Unrecognized key: "${W}"`);if(!Z[W])continue;J[W]=new $({type:"nonoptional",innerType:Y[W]})}else for(let W in Y)J[W]=new $({type:"nonoptional",innerType:Y[W]});return C8(this,"shape",J),J},checks:[]});return nZ(X,Q)}function t8($,X=0){if($.aborted===!0)return!0;for(let Z=X;Z<$.issues.length;Z++)if($.issues[Z]?.continue!==!0)return!0;return!1}function uq($,X){return X.map((Z)=>{var Q;return(Q=Z).path??(Q.path=[]),Z.path.unshift($),Z})}function QY($){return typeof $==="string"?$:$?.message}function V8($,X,Z){let Q={...$,path:$.path??[]};if(!$.message){let Y=QY($.inst?._zod.def?.error?.($))??QY(X?.error?.($))??QY(Z.customError?.($))??QY(Z.localeError?.($))??"Invalid input";Q.message=Y}if(delete Q.inst,delete Q.continue,!X?.reportInput)delete Q.input;return Q}function rP($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function u6($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function v6(...$){let[X,Z,Q]=$;if(typeof X==="string")return{message:X,code:"custom",input:Z,inst:Q};return{...X}}function sP($){return Object.entries($).filter(([X,Z])=>{return Number.isNaN(Number.parseInt(X,10))}).map((X)=>X[1])}function lq($){let X=atob($),Z=new Uint8Array(X.length);for(let Q=0;Q<X.length;Q++)Z[Q]=X.charCodeAt(Q);return Z}function pq($){let X="";for(let Z=0;Z<$.length;Z++)X+=String.fromCharCode($[Z]);return btoa(X)}function tP($){let X=$.replace(/-/g,"+").replace(/_/g,"/"),Z="=".repeat((4-X.length%4)%4);return lq(X+Z)}function aP($){return pq($).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function eP($){let X=$.replace(/^0x/,"");if(X.length%2!==0)throw new Error("Invalid hex string length");let Z=new Uint8Array(X.length/2);for(let Q=0;Q<X.length;Q+=2)Z[Q/2]=Number.parseInt(X.slice(Q,Q+2),16);return Z}function $S($){return Array.from($).map((X)=>X.toString(16).padStart(2,"0")).join("")}var XS=class{constructor(...$){}},iq=($,X)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:X,enumerable:!1}),$.message=JSON.stringify(X,f6,2),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},nq=k("$ZodError",iq),oq=k("$ZodError",iq,{Parent:Error});function ZS($,X=(Z)=>Z.message){let Z={},Q=[];for(let Y of $.issues)if(Y.path.length>0)Z[Y.path[0]]=Z[Y.path[0]]||[],Z[Y.path[0]].push(X(Y));else Q.push(X(Y));return{formErrors:Q,fieldErrors:Z}}function QS($,X){let Z=X||function(J){return J.message},Q={_errors:[]},Y=(J)=>{for(let W of J.issues)if(W.code==="invalid_union"&&W.errors.length)W.errors.map((z)=>Y({issues:z}));else if(W.code==="invalid_key")Y({issues:W.issues});else if(W.code==="invalid_element")Y({issues:W.issues});else if(W.path.length===0)Q._errors.push(Z(W));else{let z=Q,G=0;while(G<W.path.length){let M=W.path[G];if(G!==W.path.length-1)z[M]=z[M]||{_errors:[]};else z[M]=z[M]||{_errors:[]},z[M]._errors.push(Z(W));z=z[M],G++}}};return Y($),Q}var H2=($)=>(X,Z,Q,Y)=>{let J=Q?Object.assign(Q,{async:!1}):{async:!1},W=X._zod.run({value:Z,issues:[]},J);if(W instanceof Promise)throw new n9;if(W.issues.length){let z=new(Y?.Err??$)(W.issues.map((G)=>V8(G,J,e8())));throw B2(z,Y?.callee),z}return W.value},U2=($)=>async(X,Z,Q,Y)=>{let J=Q?Object.assign(Q,{async:!0}):{async:!0},W=X._zod.run({value:Z,issues:[]},J);if(W instanceof Promise)W=await W;if(W.issues.length){let z=new(Y?.Err??$)(W.issues.map((G)=>V8(G,J,e8())));throw B2(z,Y?.callee),z}return W.value},l6=($)=>(X,Z,Q)=>{let Y=Q?{...Q,async:!1}:{async:!1},J=X._zod.run({value:Z,issues:[]},Y);if(J instanceof Promise)throw new n9;return J.issues.length?{success:!1,error:new($??nq)(J.issues.map((W)=>V8(W,Y,e8())))}:{success:!0,data:J.value}},YS=l6(oq),p6=($)=>async(X,Z,Q)=>{let Y=Q?Object.assign(Q,{async:!0}):{async:!0},J=X._zod.run({value:Z,issues:[]},Y);if(J instanceof Promise)J=await J;return J.issues.length?{success:!1,error:new $(J.issues.map((W)=>V8(W,Y,e8())))}:{success:!0,data:J.value}},JS=p6(oq),WS=($)=>(X,Z,Q)=>{let Y=Q?Object.assign(Q,{direction:"backward"}):{direction:"backward"};return H2($)(X,Z,Y)},zS=($)=>(X,Z,Q)=>{return H2($)(X,Z,Q)},GS=($)=>async(X,Z,Q)=>{let Y=Q?Object.assign(Q,{direction:"backward"}):{direction:"backward"};return U2($)(X,Z,Y)},MS=($)=>async(X,Z,Q)=>{return U2($)(X,Z,Q)},qS=($)=>(X,Z,Q)=>{let Y=Q?Object.assign(Q,{direction:"backward"}):{direction:"backward"};return l6($)(X,Z,Y)},BS=($)=>(X,Z,Q)=>{return l6($)(X,Z,Q)},HS=($)=>async(X,Z,Q)=>{let Y=Q?Object.assign(Q,{direction:"backward"}):{direction:"backward"};return p6($)(X,Z,Y)},US=($)=>async(X,Z,Q)=>{return p6($)(X,Z,Q)},DS=/^[cC][^\s-]{8,}$/,NS=/^[0-9a-z]+$/,wS=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,OS=/^[0-9a-vA-V]{20}$/,AS=/^[A-Za-z0-9]{27}$/,LS=/^[a-zA-Z0-9_-]{21}$/,KS=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,jS=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,w4=($)=>{if(!$)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${$}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},FS=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,VS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function CS(){return new RegExp(VS,"u")}var PS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,IS=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,RS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ES=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rq=/^[A-Za-z0-9_-]*$/,TS=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,_S=/^\+(?:[0-9]){6,14}[0-9]$/,sq="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bS=new RegExp(`^${sq}$`);function tq($){return typeof $.precision==="number"?$.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":$.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${$.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function xS($){return new RegExp(`^${tq($)}$`)}function kS($){let X=tq({precision:$.precision}),Z=["Z"];if($.local)Z.push("");if($.offset)Z.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let Q=`${X}(?:${Z.join("|")})`;return new RegExp(`^${sq}T(?:${Q})$`)}var gS=($)=>{let X=$?`[\\s\\S]{${$?.minimum??0},${$?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${X}$`)};var fS=/^[^A-Z]*$/,vS=/^[^a-z]*$/,AZ=k("$ZodCheck",($,X)=>{var Z;$._zod??($._zod={}),$._zod.def=X,(Z=$._zod).onattach??(Z.onattach=[])});var yS=k("$ZodCheckMaxLength",($,X)=>{var Z;AZ.init($,X),(Z=$._zod.def).when??(Z.when=(Q)=>{let Y=Q.value;return!m6(Y)&&Y.length!==void 0}),$._zod.onattach.push((Q)=>{let Y=Q._zod.bag.maximum??Number.POSITIVE_INFINITY;if(X.maximum<Y)Q._zod.bag.maximum=X.maximum}),$._zod.check=(Q)=>{let Y=Q.value;if(Y.length<=X.maximum)return;let W=u6(Y);Q.issues.push({origin:W,code:"too_big",maximum:X.maximum,inclusive:!0,input:Y,inst:$,continue:!X.abort})}}),hS=k("$ZodCheckMinLength",($,X)=>{var Z;AZ.init($,X),(Z=$._zod.def).when??(Z.when=(Q)=>{let Y=Q.value;return!m6(Y)&&Y.length!==void 0}),$._zod.onattach.push((Q)=>{let Y=Q._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(X.minimum>Y)Q._zod.bag.minimum=X.minimum}),$._zod.check=(Q)=>{let Y=Q.value;if(Y.length>=X.minimum)return;let W=u6(Y);Q.issues.push({origin:W,code:"too_small",minimum:X.minimum,inclusive:!0,input:Y,inst:$,continue:!X.abort})}}),mS=k("$ZodCheckLengthEquals",($,X)=>{var Z;AZ.init($,X),(Z=$._zod.def).when??(Z.when=(Q)=>{let Y=Q.value;return!m6(Y)&&Y.length!==void 0}),$._zod.onattach.push((Q)=>{let Y=Q._zod.bag;Y.minimum=X.length,Y.maximum=X.length,Y.length=X.length}),$._zod.check=(Q)=>{let Y=Q.value,J=Y.length;if(J===X.length)return;let W=u6(Y),z=J>X.length;Q.issues.push({origin:W,...z?{code:"too_big",maximum:X.length}:{code:"too_small",minimum:X.length},inclusive:!0,exact:!0,input:Q.value,inst:$,continue:!X.abort})}}),i6=k("$ZodCheckStringFormat",($,X)=>{var Z,Q;if(AZ.init($,X),$._zod.onattach.push((Y)=>{let J=Y._zod.bag;if(J.format=X.format,X.pattern)J.patterns??(J.patterns=new Set),J.patterns.add(X.pattern)}),X.pattern)(Z=$._zod).check??(Z.check=(Y)=>{if(X.pattern.lastIndex=0,X.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:X.format,input:Y.value,...X.pattern?{pattern:X.pattern.toString()}:{},inst:$,continue:!X.abort})});else(Q=$._zod).check??(Q.check=()=>{})}),dS=k("$ZodCheckRegex",($,X)=>{i6.init($,X),$._zod.check=(Z)=>{if(X.pattern.lastIndex=0,X.pattern.test(Z.value))return;Z.issues.push({origin:"string",code:"invalid_format",format:"regex",input:Z.value,pattern:X.pattern.toString(),inst:$,continue:!X.abort})}}),cS=k("$ZodCheckLowerCase",($,X)=>{X.pattern??(X.pattern=fS),i6.init($,X)}),uS=k("$ZodCheckUpperCase",($,X)=>{X.pattern??(X.pattern=vS),i6.init($,X)}),lS=k("$ZodCheckIncludes",($,X)=>{AZ.init($,X);let Z=c6(X.includes),Q=new RegExp(typeof X.position==="number"?`^.{${X.position}}${Z}`:Z);X.pattern=Q,$._zod.onattach.push((Y)=>{let J=Y._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add(Q)}),$._zod.check=(Y)=>{if(Y.value.includes(X.includes,X.position))return;Y.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:X.includes,input:Y.value,inst:$,continue:!X.abort})}}),pS=k("$ZodCheckStartsWith",($,X)=>{AZ.init($,X);let Z=new RegExp(`^${c6(X.prefix)}.*`);X.pattern??(X.pattern=Z),$._zod.onattach.push((Q)=>{let Y=Q._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(Z)}),$._zod.check=(Q)=>{if(Q.value.startsWith(X.prefix))return;Q.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:X.prefix,input:Q.value,inst:$,continue:!X.abort})}}),iS=k("$ZodCheckEndsWith",($,X)=>{AZ.init($,X);let Z=new RegExp(`.*${c6(X.suffix)}$`);X.pattern??(X.pattern=Z),$._zod.onattach.push((Q)=>{let Y=Q._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(Z)}),$._zod.check=(Q)=>{if(Q.value.endsWith(X.suffix))return;Q.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:X.suffix,input:Q.value,inst:$,continue:!X.abort})}}),nS=k("$ZodCheckOverwrite",($,X)=>{AZ.init($,X),$._zod.check=(Z)=>{Z.value=X.tx(Z.value)}});var oS={major:4,minor:1,patch:8},t$=k("$ZodType",($,X)=>{var Z;$??($={}),$._zod.def=X,$._zod.bag=$._zod.bag||{},$._zod.version=oS;let Q=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))Q.unshift($);for(let Y of Q)for(let J of Y._zod.onattach)J($);if(Q.length===0)(Z=$._zod).deferred??(Z.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let Y=(W,z,G)=>{let M=t8(W),q;for(let B of z){if(B._zod.def.when){if(!B._zod.def.when(W))continue}else if(M)continue;let w=W.issues.length,H=B._zod.check(W);if(H instanceof Promise&&G?.async===!1)throw new n9;if(q||H instanceof Promise)q=(q??Promise.resolve()).then(async()=>{if(await H,W.issues.length===w)return;if(!M)M=t8(W,w)});else{if(W.issues.length===w)continue;if(!M)M=t8(W,w)}}if(q)return q.then(()=>{return W});return W},J=(W,z,G)=>{if(t8(W))return W.aborted=!0,W;let M=Y(z,Q,G);if(M instanceof Promise){if(G.async===!1)throw new n9;return M.then((q)=>$._zod.parse(q,G))}return $._zod.parse(M,G)};$._zod.run=(W,z)=>{if(z.skipChecks)return $._zod.parse(W,z);if(z.direction==="backward"){let M=$._zod.parse({value:W.value,issues:[]},{...z,skipChecks:!0});if(M instanceof Promise)return M.then((q)=>{return J(q,W,z)});return J(M,W,z)}let G=$._zod.parse(W,z);if(G instanceof Promise){if(z.async===!1)throw new n9;return G.then((M)=>Y(M,Q,z))}return Y(G,Q,z)}}$["~standard"]={validate:(Y)=>{try{let J=YS($,Y);return J.success?{value:J.data}:{issues:J.error?.issues}}catch(J){return JS($,Y).then((W)=>W.success?{value:W.data}:{issues:W.error?.issues})}},vendor:"zod",version:1}}),D2=k("$ZodString",($,X)=>{t$.init($,X),$._zod.pattern=[...$?._zod.bag?.patterns??[]].pop()??gS($._zod.bag),$._zod.parse=(Z,Q)=>{if(X.coerce)try{Z.value=String(Z.value)}catch(Y){}if(typeof Z.value==="string")return Z;return Z.issues.push({expected:"string",code:"invalid_type",input:Z.value,inst:$}),Z}}),s0=k("$ZodStringFormat",($,X)=>{i6.init($,X),D2.init($,X)}),rS=k("$ZodGUID",($,X)=>{X.pattern??(X.pattern=jS),s0.init($,X)}),sS=k("$ZodUUID",($,X)=>{if(X.version){let Q={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[X.version];if(Q===void 0)throw new Error(`Invalid UUID version: "${X.version}"`);X.pattern??(X.pattern=w4(Q))}else X.pattern??(X.pattern=w4());s0.init($,X)}),tS=k("$ZodEmail",($,X)=>{X.pattern??(X.pattern=FS),s0.init($,X)}),aS=k("$ZodURL",($,X)=>{s0.init($,X),$._zod.check=(Z)=>{try{let Q=Z.value.trim(),Y=new URL(Q);if(X.hostname){if(X.hostname.lastIndex=0,!X.hostname.test(Y.hostname))Z.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:TS.source,input:Z.value,inst:$,continue:!X.abort})}if(X.protocol){if(X.protocol.lastIndex=0,!X.protocol.test(Y.protocol.endsWith(":")?Y.protocol.slice(0,-1):Y.protocol))Z.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:X.protocol.source,input:Z.value,inst:$,continue:!X.abort})}if(X.normalize)Z.value=Y.href;else Z.value=Q;return}catch(Q){Z.issues.push({code:"invalid_format",format:"url",input:Z.value,inst:$,continue:!X.abort})}}}),eS=k("$ZodEmoji",($,X)=>{X.pattern??(X.pattern=CS()),s0.init($,X)}),$I=k("$ZodNanoID",($,X)=>{X.pattern??(X.pattern=LS),s0.init($,X)}),XI=k("$ZodCUID",($,X)=>{X.pattern??(X.pattern=DS),s0.init($,X)}),ZI=k("$ZodCUID2",($,X)=>{X.pattern??(X.pattern=NS),s0.init($,X)}),QI=k("$ZodULID",($,X)=>{X.pattern??(X.pattern=wS),s0.init($,X)}),YI=k("$ZodXID",($,X)=>{X.pattern??(X.pattern=OS),s0.init($,X)}),JI=k("$ZodKSUID",($,X)=>{X.pattern??(X.pattern=AS),s0.init($,X)}),WI=k("$ZodISODateTime",($,X)=>{X.pattern??(X.pattern=kS(X)),s0.init($,X)}),zI=k("$ZodISODate",($,X)=>{X.pattern??(X.pattern=bS),s0.init($,X)}),GI=k("$ZodISOTime",($,X)=>{X.pattern??(X.pattern=xS(X)),s0.init($,X)}),MI=k("$ZodISODuration",($,X)=>{X.pattern??(X.pattern=KS),s0.init($,X)}),qI=k("$ZodIPv4",($,X)=>{X.pattern??(X.pattern=PS),s0.init($,X),$._zod.onattach.push((Z)=>{let Q=Z._zod.bag;Q.format="ipv4"})}),BI=k("$ZodIPv6",($,X)=>{X.pattern??(X.pattern=SS),s0.init($,X),$._zod.onattach.push((Z)=>{let Q=Z._zod.bag;Q.format="ipv6"}),$._zod.check=(Z)=>{try{new URL(`http://[${Z.value}]`)}catch{Z.issues.push({code:"invalid_format",format:"ipv6",input:Z.value,inst:$,continue:!X.abort})}}}),HI=k("$ZodCIDRv4",($,X)=>{X.pattern??(X.pattern=IS),s0.init($,X)}),UI=k("$ZodCIDRv6",($,X)=>{X.pattern??(X.pattern=RS),s0.init($,X),$._zod.check=(Z)=>{let Q=Z.value.split("/");try{if(Q.length!==2)throw new Error;let[Y,J]=Q;if(!J)throw new Error;let W=Number(J);if(`${W}`!==J)throw new Error;if(W<0||W>128)throw new Error;new URL(`http://[${Y}]`)}catch{Z.issues.push({code:"invalid_format",format:"cidrv6",input:Z.value,inst:$,continue:!X.abort})}}});function aq($){if($==="")return!0;if($.length%4!==0)return!1;try{return atob($),!0}catch{return!1}}var DI=k("$ZodBase64",($,X)=>{X.pattern??(X.pattern=ES),s0.init($,X),$._zod.onattach.push((Z)=>{Z._zod.bag.contentEncoding="base64"}),$._zod.check=(Z)=>{if(aq(Z.value))return;Z.issues.push({code:"invalid_format",format:"base64",input:Z.value,inst:$,continue:!X.abort})}});function NI($){if(!rq.test($))return!1;let X=$.replace(/[-_]/g,(Q)=>Q==="-"?"+":"/"),Z=X.padEnd(Math.ceil(X.length/4)*4,"=");return aq(Z)}var wI=k("$ZodBase64URL",($,X)=>{X.pattern??(X.pattern=rq),s0.init($,X),$._zod.onattach.push((Z)=>{Z._zod.bag.contentEncoding="base64url"}),$._zod.check=(Z)=>{if(NI(Z.value))return;Z.issues.push({code:"invalid_format",format:"base64url",input:Z.value,inst:$,continue:!X.abort})}}),OI=k("$ZodE164",($,X)=>{X.pattern??(X.pattern=_S),s0.init($,X)});function AI($,X=null){try{let Z=$.split(".");if(Z.length!==3)return!1;let[Q]=Z;if(!Q)return!1;let Y=JSON.parse(atob(Q));if("typ"in Y&&Y?.typ!=="JWT")return!1;if(!Y.alg)return!1;if(X&&(!("alg"in Y)||Y.alg!==X))return!1;return!0}catch{return!1}}var LI=k("$ZodJWT",($,X)=>{s0.init($,X),$._zod.check=(Z)=>{if(AI(Z.value,X.alg))return;Z.issues.push({code:"invalid_format",format:"jwt",input:Z.value,inst:$,continue:!X.abort})}});function O4($,X,Z){if($.issues.length)X.issues.push(...uq(Z,$.issues));X.value[Z]=$.value}var KI=k("$ZodArray",($,X)=>{t$.init($,X),$._zod.parse=(Z,Q)=>{let Y=Z.value;if(!Array.isArray(Y))return Z.issues.push({expected:"array",code:"invalid_type",input:Y,inst:$}),Z;Z.value=Array(Y.length);let J=[];for(let W=0;W<Y.length;W++){let z=Y[W],G=X.element._zod.run({value:z,issues:[]},Q);if(G instanceof Promise)J.push(G.then((M)=>O4(M,Z,W)));else O4(G,Z,W)}if(J.length)return Promise.all(J).then(()=>Z);return Z}});function A4($,X,Z,Q){for(let J of $)if(J.issues.length===0)return X.value=J.value,X;let Y=$.filter((J)=>!t8(J));if(Y.length===1)return X.value=Y[0].value,Y[0];return X.issues.push({code:"invalid_union",input:X.value,inst:Z,errors:$.map((J)=>J.issues.map((W)=>V8(W,Q,e8())))}),X}var jI=k("$ZodUnion",($,X)=>{t$.init($,X),p0($._zod,"optin",()=>X.options.some((Y)=>Y._zod.optin==="optional")?"optional":void 0),p0($._zod,"optout",()=>X.options.some((Y)=>Y._zod.optout==="optional")?"optional":void 0),p0($._zod,"values",()=>{if(X.options.every((Y)=>Y._zod.values))return new Set(X.options.flatMap((Y)=>Array.from(Y._zod.values)));return}),p0($._zod,"pattern",()=>{if(X.options.every((Y)=>Y._zod.pattern)){let Y=X.options.map((J)=>J._zod.pattern);return new RegExp(`^(${Y.map((J)=>d6(J.source)).join("|")})$`)}return});let Z=X.options.length===1,Q=X.options[0]._zod.run;$._zod.parse=(Y,J)=>{if(Z)return Q(Y,J);let W=!1,z=[];for(let G of X.options){let M=G._zod.run({value:Y.value,issues:[]},J);if(M instanceof Promise)z.push(M),W=!0;else{if(M.issues.length===0)return M;z.push(M)}}if(!W)return A4(z,Y,$,J);return Promise.all(z).then((G)=>{return A4(G,Y,$,J)})}});var FI=k("$ZodIntersection",($,X)=>{t$.init($,X),$._zod.parse=(Z,Q)=>{let Y=Z.value,J=X.left._zod.run({value:Y,issues:[]},Q),W=X.right._zod.run({value:Y,issues:[]},Q);if(J instanceof Promise||W instanceof Promise)return Promise.all([J,W]).then(([G,M])=>{return L4(Z,G,M)});return L4(Z,J,W)}});function rJ($,X){if($===X)return{valid:!0,data:$};if($ instanceof Date&&X instanceof Date&&+$===+X)return{valid:!0,data:$};if(o9($)&&o9(X)){let Z=Object.keys(X),Q=Object.keys($).filter((J)=>Z.indexOf(J)!==-1),Y={...$,...X};for(let J of Q){let W=rJ($[J],X[J]);if(!W.valid)return{valid:!1,mergeErrorPath:[J,...W.mergeErrorPath]};Y[J]=W.data}return{valid:!0,data:Y}}if(Array.isArray($)&&Array.isArray(X)){if($.length!==X.length)return{valid:!1,mergeErrorPath:[]};let Z=[];for(let Q=0;Q<$.length;Q++){let Y=$[Q],J=X[Q],W=rJ(Y,J);if(!W.valid)return{valid:!1,mergeErrorPath:[Q,...W.mergeErrorPath]};Z.push(W.data)}return{valid:!0,data:Z}}return{valid:!1,mergeErrorPath:[]}}function L4($,X,Z){if(X.issues.length)$.issues.push(...X.issues);if(Z.issues.length)$.issues.push(...Z.issues);if(t8($))return $;let Q=rJ(X.value,Z.value);if(!Q.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(Q.mergeErrorPath)}`);return $.value=Q.data,$}var VI=k("$ZodTransform",($,X)=>{t$.init($,X),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")throw new mq($.constructor.name);let Y=X.transform(Z.value,Z);if(Q.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then((W)=>{return Z.value=W,Z});if(Y instanceof Promise)throw new n9;return Z.value=Y,Z}});function K4($,X){if($.issues.length&&X===void 0)return{issues:[],value:void 0};return $}var CI=k("$ZodOptional",($,X)=>{t$.init($,X),$._zod.optin="optional",$._zod.optout="optional",p0($._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,void 0]):void 0}),p0($._zod,"pattern",()=>{let Z=X.innerType._zod.pattern;return Z?new RegExp(`^(${d6(Z.source)})?$`):void 0}),$._zod.parse=(Z,Q)=>{if(X.innerType._zod.optin==="optional"){let Y=X.innerType._zod.run(Z,Q);if(Y instanceof Promise)return Y.then((J)=>K4(J,Z.value));return K4(Y,Z.value)}if(Z.value===void 0)return Z;return X.innerType._zod.run(Z,Q)}}),PI=k("$ZodNullable",($,X)=>{t$.init($,X),p0($._zod,"optin",()=>X.innerType._zod.optin),p0($._zod,"optout",()=>X.innerType._zod.optout),p0($._zod,"pattern",()=>{let Z=X.innerType._zod.pattern;return Z?new RegExp(`^(${d6(Z.source)}|null)$`):void 0}),p0($._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,null]):void 0}),$._zod.parse=(Z,Q)=>{if(Z.value===null)return Z;return X.innerType._zod.run(Z,Q)}}),SI=k("$ZodDefault",($,X)=>{t$.init($,X),$._zod.optin="optional",p0($._zod,"values",()=>X.innerType._zod.values),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")return X.innerType._zod.run(Z,Q);if(Z.value===void 0)return Z.value=X.defaultValue,Z;let Y=X.innerType._zod.run(Z,Q);if(Y instanceof Promise)return Y.then((J)=>j4(J,X));return j4(Y,X)}});function j4($,X){if($.value===void 0)$.value=X.defaultValue;return $}var II=k("$ZodPrefault",($,X)=>{t$.init($,X),$._zod.optin="optional",p0($._zod,"values",()=>X.innerType._zod.values),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")return X.innerType._zod.run(Z,Q);if(Z.value===void 0)Z.value=X.defaultValue;return X.innerType._zod.run(Z,Q)}}),RI=k("$ZodNonOptional",($,X)=>{t$.init($,X),p0($._zod,"values",()=>{let Z=X.innerType._zod.values;return Z?new Set([...Z].filter((Q)=>Q!==void 0)):void 0}),$._zod.parse=(Z,Q)=>{let Y=X.innerType._zod.run(Z,Q);if(Y instanceof Promise)return Y.then((J)=>F4(J,$));return F4(Y,$)}});function F4($,X){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:X});return $}var EI=k("$ZodCatch",($,X)=>{t$.init($,X),p0($._zod,"optin",()=>X.innerType._zod.optin),p0($._zod,"optout",()=>X.innerType._zod.optout),p0($._zod,"values",()=>X.innerType._zod.values),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")return X.innerType._zod.run(Z,Q);let Y=X.innerType._zod.run(Z,Q);if(Y instanceof Promise)return Y.then((J)=>{if(Z.value=J.value,J.issues.length)Z.value=X.catchValue({...Z,error:{issues:J.issues.map((W)=>V8(W,Q,e8()))},input:Z.value}),Z.issues=[];return Z});if(Z.value=Y.value,Y.issues.length)Z.value=X.catchValue({...Z,error:{issues:Y.issues.map((J)=>V8(J,Q,e8()))},input:Z.value}),Z.issues=[];return Z}}),TI=k("$ZodPipe",($,X)=>{t$.init($,X),p0($._zod,"values",()=>X.in._zod.values),p0($._zod,"optin",()=>X.in._zod.optin),p0($._zod,"optout",()=>X.out._zod.optout),p0($._zod,"propValues",()=>X.in._zod.propValues),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward"){let J=X.out._zod.run(Z,Q);if(J instanceof Promise)return J.then((W)=>_6(W,X.in,Q));return _6(J,X.in,Q)}let Y=X.in._zod.run(Z,Q);if(Y instanceof Promise)return Y.then((J)=>_6(J,X.out,Q));return _6(Y,X.out,Q)}});function _6($,X,Z){if($.issues.length)return $.aborted=!0,$;return X._zod.run({value:$.value,issues:$.issues},Z)}var _I=k("$ZodReadonly",($,X)=>{t$.init($,X),p0($._zod,"propValues",()=>X.innerType._zod.propValues),p0($._zod,"values",()=>X.innerType._zod.values),p0($._zod,"optin",()=>X.innerType._zod.optin),p0($._zod,"optout",()=>X.innerType._zod.optout),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")return X.innerType._zod.run(Z,Q);let Y=X.innerType._zod.run(Z,Q);if(Y instanceof Promise)return Y.then(V4);return V4(Y)}});function V4($){return $.value=Object.freeze($.value),$}var bI=k("$ZodCustom",($,X)=>{AZ.init($,X),t$.init($,X),$._zod.parse=(Z,Q)=>{return Z},$._zod.check=(Z)=>{let Q=Z.value,Y=X.fn(Q);if(Y instanceof Promise)return Y.then((J)=>C4(J,Z,Q,$));C4(Y,Z,Q,$);return}});function C4($,X,Z,Q){if(!$){let Y={code:"custom",input:Z,inst:Q,path:[...Q._zod.def.path??[]],continue:!Q._zod.def.abort};if(Q._zod.def.params)Y.params=Q._zod.def.params;X.issues.push(v6(Y))}}var ul=Symbol("ZodOutput"),ll=Symbol("ZodInput"),xI=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add($,...X){let Z=X[0];if(this._map.set($,Z),Z&&typeof Z==="object"&&"id"in Z){if(this._idmap.has(Z.id))throw new Error(`ID ${Z.id} already exists in the registry`);this._idmap.set(Z.id,$)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove($){let X=this._map.get($);if(X&&typeof X==="object"&&"id"in X)this._idmap.delete(X.id);return this._map.delete($),this}get($){let X=$._zod.parent;if(X){let Z={...this.get(X)??{}};delete Z.id;let Q={...Z,...this._map.get($)};return Object.keys(Q).length?Q:void 0}return this._map.get($)}has($){return this._map.has($)}};function kI(){return new xI}var b6=kI();function gI($,X){return new $({type:"string",...Q0(X)})}function fI($,X){return new $({type:"string",format:"email",check:"string_format",abort:!1,...Q0(X)})}function P4($,X){return new $({type:"string",format:"guid",check:"string_format",abort:!1,...Q0(X)})}function vI($,X){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,...Q0(X)})}function yI($,X){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Q0(X)})}function hI($,X){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Q0(X)})}function mI($,X){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Q0(X)})}function dI($,X){return new $({type:"string",format:"url",check:"string_format",abort:!1,...Q0(X)})}function cI($,X){return new $({type:"string",format:"emoji",check:"string_format",abort:!1,...Q0(X)})}function uI($,X){return new $({type:"string",format:"nanoid",check:"string_format",abort:!1,...Q0(X)})}function lI($,X){return new $({type:"string",format:"cuid",check:"string_format",abort:!1,...Q0(X)})}function pI($,X){return new $({type:"string",format:"cuid2",check:"string_format",abort:!1,...Q0(X)})}function iI($,X){return new $({type:"string",format:"ulid",check:"string_format",abort:!1,...Q0(X)})}function nI($,X){return new $({type:"string",format:"xid",check:"string_format",abort:!1,...Q0(X)})}function oI($,X){return new $({type:"string",format:"ksuid",check:"string_format",abort:!1,...Q0(X)})}function rI($,X){return new $({type:"string",format:"ipv4",check:"string_format",abort:!1,...Q0(X)})}function sI($,X){return new $({type:"string",format:"ipv6",check:"string_format",abort:!1,...Q0(X)})}function tI($,X){return new $({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Q0(X)})}function aI($,X){return new $({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Q0(X)})}function eI($,X){return new $({type:"string",format:"base64",check:"string_format",abort:!1,...Q0(X)})}function $R($,X){return new $({type:"string",format:"base64url",check:"string_format",abort:!1,...Q0(X)})}function XR($,X){return new $({type:"string",format:"e164",check:"string_format",abort:!1,...Q0(X)})}function ZR($,X){return new $({type:"string",format:"jwt",check:"string_format",abort:!1,...Q0(X)})}function QR($,X){return new $({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Q0(X)})}function YR($,X){return new $({type:"string",format:"date",check:"string_format",...Q0(X)})}function JR($,X){return new $({type:"string",format:"time",check:"string_format",precision:null,...Q0(X)})}function WR($,X){return new $({type:"string",format:"duration",check:"string_format",...Q0(X)})}function eq($,X){return new yS({check:"max_length",...Q0(X),maximum:$})}function y6($,X){return new hS({check:"min_length",...Q0(X),minimum:$})}function $B($,X){return new mS({check:"length_equals",...Q0(X),length:$})}function zR($,X){return new dS({check:"string_format",format:"regex",...Q0(X),pattern:$})}function GR($){return new cS({check:"string_format",format:"lowercase",...Q0($)})}function MR($){return new uS({check:"string_format",format:"uppercase",...Q0($)})}function qR($,X){return new lS({check:"string_format",format:"includes",...Q0(X),includes:$})}function BR($,X){return new pS({check:"string_format",format:"starts_with",...Q0(X),prefix:$})}function HR($,X){return new iS({check:"string_format",format:"ends_with",...Q0(X),suffix:$})}function WY($){return new nS({check:"overwrite",tx:$})}function UR($){return WY((X)=>X.normalize($))}function DR(){return WY(($)=>$.trim())}function NR(){return WY(($)=>$.toLowerCase())}function wR(){return WY(($)=>$.toUpperCase())}function OR($,X,Z){return new $({type:"array",element:X,...Q0(Z)})}function AR($,X,Z){return new $({type:"custom",check:"custom",fn:X,...Q0(Z)})}function LR($){let X=KR((Z)=>{return Z.addIssue=(Q)=>{if(typeof Q==="string")Z.issues.push(v6(Q,Z.value,X._zod.def));else{let Y=Q;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=Z.value),Y.inst??(Y.inst=X),Y.continue??(Y.continue=!X._zod.def.abort),Z.issues.push(v6(Y))}},$(Z.value,Z)});return X}function KR($,X){let Z=new AZ({check:"custom",...Q0(X)});return Z._zod.check=$,Z}var jR=k("ZodISODateTime",($,X)=>{WI.init($,X),J$.init($,X)});function FR($){return QR(jR,$)}var VR=k("ZodISODate",($,X)=>{zI.init($,X),J$.init($,X)});function CR($){return YR(VR,$)}var PR=k("ZodISOTime",($,X)=>{GI.init($,X),J$.init($,X)});function SR($){return JR(PR,$)}var IR=k("ZodISODuration",($,X)=>{MI.init($,X),J$.init($,X)});function RR($){return WR(IR,$)}var XB=($,X)=>{nq.init($,X),$.name="ZodError",Object.defineProperties($,{format:{value:(Z)=>QS($,Z)},flatten:{value:(Z)=>ZS($,Z)},addIssue:{value:(Z)=>{$.issues.push(Z),$.message=JSON.stringify($.issues,f6,2)}},addIssues:{value:(Z)=>{$.issues.push(...Z),$.message=JSON.stringify($.issues,f6,2)}},isEmpty:{get(){return $.issues.length===0}}})},pl=k("ZodError",XB),xX=k("ZodError",XB,{Parent:Error}),ER=H2(xX),TR=U2(xX),_R=l6(xX),bR=p6(xX),xR=WS(xX),kR=zS(xX),gR=GS(xX),fR=MS(xX),vR=qS(xX),yR=BS(xX),hR=HS(xX),mR=US(xX),MX=k("ZodType",($,X)=>{return t$.init($,X),$.def=X,$.type=X.type,Object.defineProperty($,"_def",{value:X}),$.check=(...Z)=>{return $.clone({...X,checks:[...X.checks??[],...Z.map((Q)=>typeof Q==="function"?{_zod:{check:Q,def:{check:"custom"},onattach:[]}}:Q)]})},$.clone=(Z,Q)=>nZ($,Z,Q),$.brand=()=>$,$.register=(Z,Q)=>{return Z.add($,Q),$},$.parse=(Z,Q)=>ER($,Z,Q,{callee:$.parse}),$.safeParse=(Z,Q)=>_R($,Z,Q),$.parseAsync=async(Z,Q)=>TR($,Z,Q,{callee:$.parseAsync}),$.safeParseAsync=async(Z,Q)=>bR($,Z,Q),$.spa=$.safeParseAsync,$.encode=(Z,Q)=>xR($,Z,Q),$.decode=(Z,Q)=>kR($,Z,Q),$.encodeAsync=async(Z,Q)=>gR($,Z,Q),$.decodeAsync=async(Z,Q)=>fR($,Z,Q),$.safeEncode=(Z,Q)=>vR($,Z,Q),$.safeDecode=(Z,Q)=>yR($,Z,Q),$.safeEncodeAsync=async(Z,Q)=>hR($,Z,Q),$.safeDecodeAsync=async(Z,Q)=>mR($,Z,Q),$.refine=(Z,Q)=>$.check(IE(Z,Q)),$.superRefine=(Z)=>$.check(RE(Z)),$.overwrite=(Z)=>$.check(WY(Z)),$.optional=()=>I4($),$.nullable=()=>R4($),$.nullish=()=>I4(R4($)),$.nonoptional=(Z)=>KE($,Z),$.array=()=>WE($),$.or=(Z)=>GE([$,Z]),$.and=(Z)=>qE($,Z),$.transform=(Z)=>E4($,HE(Z)),$.default=(Z)=>wE($,Z),$.prefault=(Z)=>AE($,Z),$.catch=(Z)=>FE($,Z),$.pipe=(Z)=>E4($,Z),$.readonly=()=>PE($),$.describe=(Z)=>{let Q=$.clone();return b6.add(Q,{description:Z}),Q},Object.defineProperty($,"description",{get(){return b6.get($)?.description},configurable:!0}),$.meta=(...Z)=>{if(Z.length===0)return b6.get($);let Q=$.clone();return b6.add(Q,Z[0]),Q},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$}),ZB=k("_ZodString",($,X)=>{D2.init($,X),MX.init($,X);let Z=$._zod.bag;$.format=Z.format??null,$.minLength=Z.minimum??null,$.maxLength=Z.maximum??null,$.regex=(...Q)=>$.check(zR(...Q)),$.includes=(...Q)=>$.check(qR(...Q)),$.startsWith=(...Q)=>$.check(BR(...Q)),$.endsWith=(...Q)=>$.check(HR(...Q)),$.min=(...Q)=>$.check(y6(...Q)),$.max=(...Q)=>$.check(eq(...Q)),$.length=(...Q)=>$.check($B(...Q)),$.nonempty=(...Q)=>$.check(y6(1,...Q)),$.lowercase=(Q)=>$.check(GR(Q)),$.uppercase=(Q)=>$.check(MR(Q)),$.trim=()=>$.check(DR()),$.normalize=(...Q)=>$.check(UR(...Q)),$.toLowerCase=()=>$.check(NR()),$.toUpperCase=()=>$.check(wR())}),dR=k("ZodString",($,X)=>{D2.init($,X),ZB.init($,X),$.email=(Z)=>$.check(fI(cR,Z)),$.url=(Z)=>$.check(dI(uR,Z)),$.jwt=(Z)=>$.check(ZR(YE,Z)),$.emoji=(Z)=>$.check(cI(lR,Z)),$.guid=(Z)=>$.check(P4(S4,Z)),$.uuid=(Z)=>$.check(vI(x6,Z)),$.uuidv4=(Z)=>$.check(yI(x6,Z)),$.uuidv6=(Z)=>$.check(hI(x6,Z)),$.uuidv7=(Z)=>$.check(mI(x6,Z)),$.nanoid=(Z)=>$.check(uI(pR,Z)),$.guid=(Z)=>$.check(P4(S4,Z)),$.cuid=(Z)=>$.check(lI(iR,Z)),$.cuid2=(Z)=>$.check(pI(nR,Z)),$.ulid=(Z)=>$.check(iI(oR,Z)),$.base64=(Z)=>$.check(eI(XE,Z)),$.base64url=(Z)=>$.check($R(ZE,Z)),$.xid=(Z)=>$.check(nI(rR,Z)),$.ksuid=(Z)=>$.check(oI(sR,Z)),$.ipv4=(Z)=>$.check(rI(tR,Z)),$.ipv6=(Z)=>$.check(sI(aR,Z)),$.cidrv4=(Z)=>$.check(tI(eR,Z)),$.cidrv6=(Z)=>$.check(aI($E,Z)),$.e164=(Z)=>$.check(XR(QE,Z)),$.datetime=(Z)=>$.check(FR(Z)),$.date=(Z)=>$.check(CR(Z)),$.time=(Z)=>$.check(SR(Z)),$.duration=(Z)=>$.check(RR(Z))});function D$($){return gI(dR,$)}var J$=k("ZodStringFormat",($,X)=>{s0.init($,X),ZB.init($,X)}),cR=k("ZodEmail",($,X)=>{tS.init($,X),J$.init($,X)}),S4=k("ZodGUID",($,X)=>{rS.init($,X),J$.init($,X)}),x6=k("ZodUUID",($,X)=>{sS.init($,X),J$.init($,X)}),uR=k("ZodURL",($,X)=>{aS.init($,X),J$.init($,X)}),lR=k("ZodEmoji",($,X)=>{eS.init($,X),J$.init($,X)}),pR=k("ZodNanoID",($,X)=>{$I.init($,X),J$.init($,X)}),iR=k("ZodCUID",($,X)=>{XI.init($,X),J$.init($,X)}),nR=k("ZodCUID2",($,X)=>{ZI.init($,X),J$.init($,X)}),oR=k("ZodULID",($,X)=>{QI.init($,X),J$.init($,X)}),rR=k("ZodXID",($,X)=>{YI.init($,X),J$.init($,X)}),sR=k("ZodKSUID",($,X)=>{JI.init($,X),J$.init($,X)}),tR=k("ZodIPv4",($,X)=>{qI.init($,X),J$.init($,X)}),aR=k("ZodIPv6",($,X)=>{BI.init($,X),J$.init($,X)}),eR=k("ZodCIDRv4",($,X)=>{HI.init($,X),J$.init($,X)}),$E=k("ZodCIDRv6",($,X)=>{UI.init($,X),J$.init($,X)}),XE=k("ZodBase64",($,X)=>{DI.init($,X),J$.init($,X)}),ZE=k("ZodBase64URL",($,X)=>{wI.init($,X),J$.init($,X)}),QE=k("ZodE164",($,X)=>{OI.init($,X),J$.init($,X)}),YE=k("ZodJWT",($,X)=>{LI.init($,X),J$.init($,X)});var JE=k("ZodArray",($,X)=>{KI.init($,X),MX.init($,X),$.element=X.element,$.min=(Z,Q)=>$.check(y6(Z,Q)),$.nonempty=(Z)=>$.check(y6(1,Z)),$.max=(Z,Q)=>$.check(eq(Z,Q)),$.length=(Z,Q)=>$.check($B(Z,Q)),$.unwrap=()=>$.element});function WE($,X){return OR(JE,$,X)}var zE=k("ZodUnion",($,X)=>{jI.init($,X),MX.init($,X),$.options=X.options});function GE($,X){return new zE({type:"union",options:$,...$9.normalizeParams(X)})}var ME=k("ZodIntersection",($,X)=>{FI.init($,X),MX.init($,X)});function qE($,X){return new ME({type:"intersection",left:$,right:X})}var BE=k("ZodTransform",($,X)=>{VI.init($,X),MX.init($,X),$._zod.parse=(Z,Q)=>{if(Q.direction==="backward")throw new mq($.constructor.name);Z.addIssue=(J)=>{if(typeof J==="string")Z.issues.push($9.issue(J,Z.value,X));else{let W=J;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=Z.value),W.inst??(W.inst=$),Z.issues.push($9.issue(W))}};let Y=X.transform(Z.value,Z);if(Y instanceof Promise)return Y.then((J)=>{return Z.value=J,Z});return Z.value=Y,Z}});function HE($){return new BE({type:"transform",transform:$})}var UE=k("ZodOptional",($,X)=>{CI.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType});function I4($){return new UE({type:"optional",innerType:$})}var DE=k("ZodNullable",($,X)=>{PI.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType});function R4($){return new DE({type:"nullable",innerType:$})}var NE=k("ZodDefault",($,X)=>{SI.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});function wE($,X){return new NE({type:"default",innerType:$,get defaultValue(){return typeof X==="function"?X():$9.shallowClone(X)}})}var OE=k("ZodPrefault",($,X)=>{II.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType});function AE($,X){return new OE({type:"prefault",innerType:$,get defaultValue(){return typeof X==="function"?X():$9.shallowClone(X)}})}var LE=k("ZodNonOptional",($,X)=>{RI.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType});function KE($,X){return new LE({type:"nonoptional",innerType:$,...$9.normalizeParams(X)})}var jE=k("ZodCatch",($,X)=>{EI.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});function FE($,X){return new jE({type:"catch",innerType:$,catchValue:typeof X==="function"?X:()=>X})}var VE=k("ZodPipe",($,X)=>{TI.init($,X),MX.init($,X),$.in=X.in,$.out=X.out});function E4($,X){return new VE({type:"pipe",in:$,out:X})}var CE=k("ZodReadonly",($,X)=>{_I.init($,X),MX.init($,X),$.unwrap=()=>$._zod.def.innerType});function PE($){return new CE({type:"readonly",innerType:$})}var SE=k("ZodCustom",($,X)=>{bI.init($,X),MX.init($,X)});function IE($,X={}){return AR(SE,$,X)}function RE($){return LR($)}var N$=($,X)=>$.safeParse(X).success;t.Set("base64",($)=>N$(D$().base64(),$));t.Set("base64url",($)=>N$(D$().base64url(),$));t.Set("cidrv4",($)=>N$(D$().cidr({version:"v4"}),$));t.Set("cidrv6",($)=>N$(D$().cidr({version:"v6"}),$));t.Set("cidr",($)=>N$(D$().cidr(),$));t.Set("cuid",($)=>N$(D$().cuid(),$));t.Set("cuid2",($)=>N$(D$().cuid2(),$));t.Set("date",($)=>N$(D$().date(),$));t.Set("datetime",($)=>N$(D$().datetime({offset:!0}),$));t.Set("duration",($)=>N$(D$().duration(),$));t.Set("email",($)=>N$(D$().email(),$));t.Set("emoji",($)=>N$(D$().emoji(),$));t.Set("ipv4",($)=>N$(D$().ip({version:"v4"}),$));t.Set("ipv6",($)=>N$(D$().ip({version:"v6"}),$));t.Set("ip",($)=>N$(D$().ip(),$));t.Set("jwt",($)=>N$(D$().jwt(),$));t.Set("nanoid",($)=>N$(D$().nanoid(),$));t.Set("time",($)=>N$(D$().time(),$));t.Set("ulid",($)=>N$(D$().ulid(),$));t.Set("url",($)=>N$(D$().url(),$));t.Set("uuid",($)=>N$(D$().uuid(),$));function EE(){try{if(typeof caches!=="undefined"&&typeof caches.default!=="undefined")return!0;if(typeof WebSocketPair!=="undefined")return!0}catch($){return!1}return!1}var QB=({enabled:$=!0,path:X="/openapi",provider:Z="scalar",specPath:Q=`${X}/json`,documentation:Y={},exclude:J,swagger:W,scalar:z,references:G,mapJsonSchema:M,embedSpec:q}={})=>{if(!$)return new QZ({name:"@elysiajs/openapi"});let B={title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...Y.info},w=Q.startsWith("/")?Q.slice(1):Q,H=0,U,O=({paths:A,components:{schemas:N}})=>{return U={openapi:"3.0.3",...Y,tags:!J?.tags?Y.tags:Y.tags?.filter((R)=>!J.tags?.includes(R.name)),info:{title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...Y.info},paths:{...A,...Y.paths},components:{...Y.components,schemas:{...N,...Y.components?.schemas}}}},F=new QZ({name:"@elysiajs/openapi"}).use((A)=>{if(Z===null)return A;let N=()=>new Response(Z==="swagger-ui"?ZV(B,{url:w,dom_id:"#swagger-ui",version:"latest",autoDarkMode:!0,...W}):YV(B,{url:w,version:"latest",cdn:`https://cdn.jsdelivr.net/npm/@scalar/api-reference@${z?.version??"latest"}/dist/browser/standalone.min.js`,...z,_integration:"elysiajs"},q?JSON.stringify(H===A.routes.length?U:O(U4(A,J,G,M))):void 0),{headers:{"content-type":"text/html; charset=utf8"}});return A.get(X,q||EE()?N:N(),{detail:{hide:!0}})}).get(Q,function A(){if(H===F.routes.length&&U)return U;return H=F.routes.length,O(U4(F,J,G,M))},{error({error:A}){console.log("[@elysiajs/openapi] error at specPath"),console.warn(A)},detail:{hide:!0}});return F};var YB=($)=>{let X;if($)X=$;else if(typeof fetch==="undefined")X=(...Z)=>Promise.resolve().then(() => (S8(),X9)).then(({default:Q})=>Q(...Z));else X=fetch;return(...Z)=>X(...Z)};class o6 extends Error{constructor($,X="FunctionsError",Z){super($);this.name=X,this.context=Z}}class r6 extends o6{constructor($){super("Failed to send a request to the Edge Function","FunctionsFetchError",$)}}class s6 extends o6{constructor($){super("Relay Error invoking the Edge Function","FunctionsRelayError",$)}}class t6 extends o6{constructor($){super("Edge Function returned a non-2xx status code","FunctionsHttpError",$)}}var n6;(function($){$.Any="any",$.ApNortheast1="ap-northeast-1",$.ApNortheast2="ap-northeast-2",$.ApSouth1="ap-south-1",$.ApSoutheast1="ap-southeast-1",$.ApSoutheast2="ap-southeast-2",$.CaCentral1="ca-central-1",$.EuCentral1="eu-central-1",$.EuWest1="eu-west-1",$.EuWest2="eu-west-2",$.EuWest3="eu-west-3",$.SaEast1="sa-east-1",$.UsEast1="us-east-1",$.UsWest1="us-west-1",$.UsWest2="us-west-2"})(n6||(n6={}));var kE=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};class a6{constructor($,{headers:X={},customFetch:Z,region:Q=n6.Any}={}){this.url=$,this.headers=X,this.region=Q,this.fetch=YB(Z)}setAuth($){this.headers.Authorization=`Bearer ${$}`}invoke($){return kE(this,arguments,void 0,function*(X,Z={}){var Q;try{let{headers:Y,method:J,body:W,signal:z}=Z,G={},{region:M}=Z;if(!M)M=this.region;let q=new URL(`${this.url}/${X}`);if(M&&M!=="any")G["x-region"]=M,q.searchParams.set("forceFunctionRegion",M);let B;if(W&&(Y&&!Object.prototype.hasOwnProperty.call(Y,"Content-Type")||!Y))if(typeof Blob!=="undefined"&&W instanceof Blob||W instanceof ArrayBuffer)G["Content-Type"]="application/octet-stream",B=W;else if(typeof W==="string")G["Content-Type"]="text/plain",B=W;else if(typeof FormData!=="undefined"&&W instanceof FormData)B=W;else G["Content-Type"]="application/json",B=JSON.stringify(W);let w=yield this.fetch(q.toString(),{method:J||"POST",headers:Object.assign(Object.assign(Object.assign({},G),this.headers),Y),body:B,signal:z}).catch((F)=>{if(F.name==="AbortError")throw F;throw new r6(F)}),H=w.headers.get("x-relay-error");if(H&&H==="true")throw new s6(w);if(!w.ok)throw new t6(w);let U=((Q=w.headers.get("Content-Type"))!==null&&Q!==void 0?Q:"text/plain").split(";")[0].trim(),O;if(U==="application/json")O=yield w.json();else if(U==="application/octet-stream")O=yield w.blob();else if(U==="text/event-stream")O=w;else if(U==="multipart/form-data")O=yield w.formData();else O=yield w.text();return{data:O,error:null,response:w}}catch(Y){if(Y instanceof Error&&Y.name==="AbortError")return{data:null,error:new r6(Y)};return{data:null,error:Y,response:Y instanceof t6||Y instanceof s6?Y.context:void 0}}})}}var jB=x8(KB(),1),{PostgrestClient:FB,PostgrestQueryBuilder:Dp,PostgrestFilterBuilder:Np,PostgrestTransformBuilder:wp,PostgrestBuilder:Op,PostgrestError:pE}=jB.default;class VB{static detectEnvironment(){var $;if(typeof WebSocket!=="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!=="undefined"&&typeof globalThis.WebSocket!=="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!=="undefined"&&typeof global.WebSocket!=="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!=="undefined"&&typeof globalThis.WebSocketPair!=="undefined"&&typeof globalThis.WebSocket==="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!=="undefined"&&globalThis.EdgeRuntime||typeof navigator!=="undefined"&&(($=navigator.userAgent)===null||$===void 0?void 0:$.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!=="undefined"){let X=process.versions;if(X&&X.node){let Z=X.node,Q=parseInt(Z.replace(/^v/,"").split(".")[0]);if(Q>=22){if(typeof globalThis.WebSocket!=="undefined")return{type:"native",constructor:globalThis.WebSocket};return{type:"unsupported",error:`Node.js ${Q} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}}return{type:"unsupported",error:`Node.js ${Q} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let $=this.detectEnvironment();if($.constructor)return $.constructor;let X=$.error||"WebSocket not supported in this environment.";if($.workaround)X+=`

Suggested solution: ${$.workaround}`;throw new Error(X)}static createWebSocket($,X){return new(this.getWebSocketConstructor())($,X)}static isWebSocketSupported(){try{let $=this.detectEnvironment();return $.type==="native"||$.type==="ws"}catch($){return!1}}}var F2=VB;var CB="2.75.0";var PB=`realtime-js/${CB}`,SB="1.0.0";var UY=1e4,IB=1000,RB=100,$Q;(function($){$[$.connecting=0]="connecting",$[$.open=1]="open",$[$.closing=2]="closing",$[$.closed=3]="closed"})($Q||($Q={}));var L$;(function($){$.closed="closed",$.errored="errored",$.joined="joined",$.joining="joining",$.leaving="leaving"})(L$||(L$={}));var jX;(function($){$.close="phx_close",$.error="phx_error",$.join="phx_join",$.reply="phx_reply",$.leave="phx_leave",$.access_token="access_token"})(jX||(jX={}));var $7;(function($){$.websocket="websocket"})($7||($7={}));var I8;(function($){$.Connecting="connecting",$.Open="open",$.Closing="closing",$.Closed="closed"})(I8||(I8={}));class X7{constructor(){this.HEADER_LENGTH=1}decode($,X){if($.constructor===ArrayBuffer)return X(this._binaryDecode($));if(typeof $==="string")return X(JSON.parse($));return X({})}_binaryDecode($){let X=new DataView($),Z=new TextDecoder;return this._decodeBroadcast($,X,Z)}_decodeBroadcast($,X,Z){let Q=X.getUint8(1),Y=X.getUint8(2),J=this.HEADER_LENGTH+2,W=Z.decode($.slice(J,J+Q));J=J+Q;let z=Z.decode($.slice(J,J+Y));J=J+Y;let G=JSON.parse(Z.decode($.slice(J,$.byteLength)));return{ref:null,topic:W,event:z,payload:G}}}class XQ{constructor($,X){this.callback=$,this.timerCalc=X,this.timer=void 0,this.tries=0,this.callback=$,this.timerCalc=X}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var h0;(function($){$.abstime="abstime",$.bool="bool",$.date="date",$.daterange="daterange",$.float4="float4",$.float8="float8",$.int2="int2",$.int4="int4",$.int4range="int4range",$.int8="int8",$.int8range="int8range",$.json="json",$.jsonb="jsonb",$.money="money",$.numeric="numeric",$.oid="oid",$.reltime="reltime",$.text="text",$.time="time",$.timestamp="timestamp",$.timestamptz="timestamptz",$.timetz="timetz",$.tsrange="tsrange",$.tstzrange="tstzrange"})(h0||(h0={}));var C2=($,X,Z={})=>{var Q;let Y=(Q=Z.skipTypes)!==null&&Q!==void 0?Q:[];if(!X)return{};return Object.keys(X).reduce((J,W)=>{return J[W]=iE(W,$,X,Y),J},{})},iE=($,X,Z,Q)=>{let Y=X.find((z)=>z.name===$),J=Y===null||Y===void 0?void 0:Y.type,W=Z[$];if(J&&!Q.includes(J))return EB(J,W);return V2(W)},EB=($,X)=>{if($.charAt(0)==="_"){let Z=$.slice(1,$.length);return sE(X,Z)}switch($){case h0.bool:return nE(X);case h0.float4:case h0.float8:case h0.int2:case h0.int4:case h0.int8:case h0.numeric:case h0.oid:return oE(X);case h0.json:case h0.jsonb:return rE(X);case h0.timestamp:return tE(X);case h0.abstime:case h0.date:case h0.daterange:case h0.int4range:case h0.int8range:case h0.money:case h0.reltime:case h0.text:case h0.time:case h0.timestamptz:case h0.timetz:case h0.tsrange:case h0.tstzrange:return V2(X);default:return V2(X)}},V2=($)=>{return $},nE=($)=>{switch($){case"t":return!0;case"f":return!1;default:return $}},oE=($)=>{if(typeof $==="string"){let X=parseFloat($);if(!Number.isNaN(X))return X}return $},rE=($)=>{if(typeof $==="string")try{return JSON.parse($)}catch(X){return console.log(`JSON parse error: ${X}`),$}return $},sE=($,X)=>{if(typeof $!=="string")return $;let Z=$.length-1,Q=$[Z];if($[0]==="{"&&Q==="}"){let J,W=$.slice(1,Z);try{J=JSON.parse("["+W+"]")}catch(z){J=W?W.split(","):[]}return J.map((z)=>EB(X,z))}return $},tE=($)=>{if(typeof $==="string")return $.replace(" ","T");return $},Z7=($)=>{let X=$;return X=X.replace(/^ws/i,"http"),X=X.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),X.replace(/\/+$/,"")+"/api/broadcast"};class ZQ{constructor($,X,Z={},Q=UY){this.channel=$,this.event=X,this.payload=Z,this.timeout=Q,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend($){this.timeout=$,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})}updatePayload($){this.payload=Object.assign(Object.assign({},this.payload),$)}receive($,X){var Z;if(this._hasReceived($))X((Z=this.receivedResp)===null||Z===void 0?void 0:Z.response);return this.recHooks.push({status:$,callback:X}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let $=(X)=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=X,this._matchReceive(X)};this.channel._on(this.refEvent,{},$),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger($,X){if(this.refEvent)this.channel._trigger(this.refEvent,{status:$,response:X})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){if(!this.refEvent)return;this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:$,response:X}){this.recHooks.filter((Z)=>Z.status===$).forEach((Z)=>Z.callback(X))}_hasReceived($){return this.receivedResp&&this.receivedResp.status===$}}var P2;(function($){$.SYNC="sync",$.JOIN="join",$.LEAVE="leave"})(P2||(P2={}));class R8{constructor($,X){this.channel=$,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let Z=(X===null||X===void 0?void 0:X.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(Z.state,{},(Q)=>{let{onJoin:Y,onLeave:J,onSync:W}=this.caller;this.joinRef=this.channel._joinRef(),this.state=R8.syncState(this.state,Q,Y,J),this.pendingDiffs.forEach((z)=>{this.state=R8.syncDiff(this.state,z,Y,J)}),this.pendingDiffs=[],W()}),this.channel._on(Z.diff,{},(Q)=>{let{onJoin:Y,onLeave:J,onSync:W}=this.caller;if(this.inPendingSyncState())this.pendingDiffs.push(Q);else this.state=R8.syncDiff(this.state,Q,Y,J),W()}),this.onJoin((Q,Y,J)=>{this.channel._trigger("presence",{event:"join",key:Q,currentPresences:Y,newPresences:J})}),this.onLeave((Q,Y,J)=>{this.channel._trigger("presence",{event:"leave",key:Q,currentPresences:Y,leftPresences:J})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState($,X,Z,Q){let Y=this.cloneDeep($),J=this.transformState(X),W={},z={};return this.map(Y,(G,M)=>{if(!J[G])z[G]=M}),this.map(J,(G,M)=>{let q=Y[G];if(q){let B=M.map((O)=>O.presence_ref),w=q.map((O)=>O.presence_ref),H=M.filter((O)=>w.indexOf(O.presence_ref)<0),U=q.filter((O)=>B.indexOf(O.presence_ref)<0);if(H.length>0)W[G]=H;if(U.length>0)z[G]=U}else W[G]=M}),this.syncDiff(Y,{joins:W,leaves:z},Z,Q)}static syncDiff($,X,Z,Q){let{joins:Y,leaves:J}={joins:this.transformState(X.joins),leaves:this.transformState(X.leaves)};if(!Z)Z=()=>{};if(!Q)Q=()=>{};return this.map(Y,(W,z)=>{var G;let M=(G=$[W])!==null&&G!==void 0?G:[];if($[W]=this.cloneDeep(z),M.length>0){let q=$[W].map((w)=>w.presence_ref),B=M.filter((w)=>q.indexOf(w.presence_ref)<0);$[W].unshift(...B)}Z(W,M,z)}),this.map(J,(W,z)=>{let G=$[W];if(!G)return;let M=z.map((q)=>q.presence_ref);if(G=G.filter((q)=>M.indexOf(q.presence_ref)<0),$[W]=G,Q(W,G,z),G.length===0)delete $[W]}),$}static map($,X){return Object.getOwnPropertyNames($).map((Z)=>X(Z,$[Z]))}static transformState($){return $=this.cloneDeep($),Object.getOwnPropertyNames($).reduce((X,Z)=>{let Q=$[Z];if("metas"in Q)X[Z]=Q.metas.map((Y)=>{return Y.presence_ref=Y.phx_ref,delete Y.phx_ref,delete Y.phx_ref_prev,Y});else X[Z]=Q;return X},{})}static cloneDeep($){return JSON.parse(JSON.stringify($))}onJoin($){this.caller.onJoin=$}onLeave($){this.caller.onLeave=$}onSync($){this.caller.onSync=$}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var S2;(function($){$.ALL="*",$.INSERT="INSERT",$.UPDATE="UPDATE",$.DELETE="DELETE"})(S2||(S2={}));var QQ;(function($){$.BROADCAST="broadcast",$.PRESENCE="presence",$.POSTGRES_CHANGES="postgres_changes",$.SYSTEM="system"})(QQ||(QQ={}));var LZ;(function($){$.SUBSCRIBED="SUBSCRIBED",$.TIMED_OUT="TIMED_OUT",$.CLOSED="CLOSED",$.CHANNEL_ERROR="CHANNEL_ERROR"})(LZ||(LZ={}));class YQ{constructor($,X={config:{}},Z){var Q,Y;if(this.topic=$,this.params=X,this.socket=Z,this.bindings={},this.state=L$.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=$.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},X.config),this.timeout=this.socket.timeout,this.joinPush=new ZQ(this,jX.join,this.params,this.timeout),this.rejoinTimer=new XQ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=L$.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((J)=>J.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=L$.closed,this.socket._remove(this)}),this._onError((J)=>{if(this._isLeaving()||this._isClosed())return;this.socket.log("channel",`error ${this.topic}`,J),this.state=L$.errored,this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{if(!this._isJoining())return;this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=L$.errored,this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("error",(J)=>{if(this._isLeaving()||this._isClosed())return;this.socket.log("channel",`error ${this.topic}`,J),this.state=L$.errored,this.rejoinTimer.scheduleTimeout()}),this._on(jX.reply,{},(J,W)=>{this._trigger(this._replyEventName(W),J)}),this.presence=new R8(this),this.broadcastEndpointURL=Z7(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&((Y=(Q=this.params.config)===null||Q===void 0?void 0:Q.broadcast)===null||Y===void 0?void 0:Y.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe($,X=this.timeout){var Z,Q,Y;if(!this.socket.isConnected())this.socket.connect();if(this.state==L$.closed){let{config:{broadcast:J,presence:W,private:z}}=this.params,G=(Q=(Z=this.bindings.postgres_changes)===null||Z===void 0?void 0:Z.map((w)=>w.filter))!==null&&Q!==void 0?Q:[],M=!!this.bindings[QQ.PRESENCE]&&this.bindings[QQ.PRESENCE].length>0||((Y=this.params.config.presence)===null||Y===void 0?void 0:Y.enabled)===!0,q={},B={broadcast:J,presence:Object.assign(Object.assign({},W),{enabled:M}),postgres_changes:G,private:z};if(this.socket.accessTokenValue)q.access_token=this.socket.accessTokenValue;this._onError((w)=>$===null||$===void 0?void 0:$(LZ.CHANNEL_ERROR,w)),this._onClose(()=>$===null||$===void 0?void 0:$(LZ.CLOSED)),this.updateJoinPayload(Object.assign({config:B},q)),this.joinedOnce=!0,this._rejoin(X),this.joinPush.receive("ok",async({postgres_changes:w})=>{var H;if(this.socket.setAuth(),w===void 0){$===null||$===void 0||$(LZ.SUBSCRIBED);return}else{let U=this.bindings.postgres_changes,O=(H=U===null||U===void 0?void 0:U.length)!==null&&H!==void 0?H:0,F=[];for(let A=0;A<O;A++){let N=U[A],{filter:{event:R,schema:u,table:y,filter:b}}=N,_=w&&w[A];if(_&&_.event===R&&_.schema===u&&_.table===y&&_.filter===b)F.push(Object.assign(Object.assign({},N),{id:_.id}));else{this.unsubscribe(),this.state=L$.errored,$===null||$===void 0||$(LZ.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=F,$&&$(LZ.SUBSCRIBED);return}}).receive("error",(w)=>{this.state=L$.errored,$===null||$===void 0||$(LZ.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")));return}).receive("timeout",()=>{$===null||$===void 0||$(LZ.TIMED_OUT);return})}return this}presenceState(){return this.presence.state}async track($,X={}){return await this.send({type:"presence",event:"track",payload:$},X.timeout||this.timeout)}async untrack($={}){return await this.send({type:"presence",event:"untrack"},$)}on($,X,Z){if(this.state===L$.joined&&$===QQ.PRESENCE)this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe());return this._on($,X,Z)}async send($,X={}){var Z,Q;if(!this._canPush()&&$.type==="broadcast"){let{event:Y,payload:J}=$,z={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:Y,payload:J,private:this.private}]})};try{let G=await this._fetchWithTimeout(this.broadcastEndpointURL,z,(Z=X.timeout)!==null&&Z!==void 0?Z:this.timeout);return await((Q=G.body)===null||Q===void 0?void 0:Q.cancel()),G.ok?"ok":"error"}catch(G){if(G.name==="AbortError")return"timed out";else return"error"}}else return new Promise((Y)=>{var J,W,z;let G=this._push($.type,$,X.timeout||this.timeout);if($.type==="broadcast"&&!((z=(W=(J=this.params)===null||J===void 0?void 0:J.config)===null||W===void 0?void 0:W.broadcast)===null||z===void 0?void 0:z.ack))Y("ok");G.receive("ok",()=>Y("ok")),G.receive("error",()=>Y("error")),G.receive("timeout",()=>Y("timed out"))})}updateJoinPayload($){this.joinPush.updatePayload($)}unsubscribe($=this.timeout){this.state=L$.leaving;let X=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jX.close,"leave",this._joinRef())};this.joinPush.destroy();let Z=null;return new Promise((Q)=>{if(Z=new ZQ(this,jX.leave,{},$),Z.receive("ok",()=>{X(),Q("ok")}).receive("timeout",()=>{X(),Q("timed out")}).receive("error",()=>{Q("error")}),Z.send(),!this._canPush())Z.trigger("ok",{})}).finally(()=>{Z===null||Z===void 0||Z.destroy()})}teardown(){this.pushBuffer.forEach(($)=>$.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=L$.closed,this.bindings={}}async _fetchWithTimeout($,X,Z){let Q=new AbortController,Y=setTimeout(()=>Q.abort(),Z),J=await this.socket.fetch($,Object.assign(Object.assign({},X),{signal:Q.signal}));return clearTimeout(Y),J}_push($,X,Z=this.timeout){if(!this.joinedOnce)throw`tried to push '${$}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let Q=new ZQ(this,$,X,Z);if(this._canPush())Q.send();else this._addToPushBuffer(Q);return Q}_addToPushBuffer($){if($.startTimeout(),this.pushBuffer.push($),this.pushBuffer.length>RB){let X=this.pushBuffer.shift();if(X)X.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${X.event}`,X.payload)}}_onMessage($,X,Z){return X}_isMember($){return this.topic===$}_joinRef(){return this.joinPush.ref}_trigger($,X,Z){var Q,Y;let J=$.toLocaleLowerCase(),{close:W,error:z,leave:G,join:M}=jX;if(Z&&[W,z,G,M].indexOf(J)>=0&&Z!==this._joinRef())return;let B=this._onMessage(J,X,Z);if(X&&!B)throw"channel onMessage callbacks must return the payload, modified or unmodified";if(["insert","update","delete"].includes(J))(Q=this.bindings.postgres_changes)===null||Q===void 0||Q.filter((w)=>{var H,U,O;return((H=w.filter)===null||H===void 0?void 0:H.event)==="*"||((O=(U=w.filter)===null||U===void 0?void 0:U.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===J}).map((w)=>w.callback(B,Z));else(Y=this.bindings[J])===null||Y===void 0||Y.filter((w)=>{var H,U,O,F,A,N;if(["broadcast","presence","postgres_changes"].includes(J))if("id"in w){let R=w.id,u=(H=w.filter)===null||H===void 0?void 0:H.event;return R&&((U=X.ids)===null||U===void 0?void 0:U.includes(R))&&(u==="*"||(u===null||u===void 0?void 0:u.toLocaleLowerCase())===((O=X.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{let R=(A=(F=w===null||w===void 0?void 0:w.filter)===null||F===void 0?void 0:F.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return R==="*"||R===((N=X===null||X===void 0?void 0:X.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===J}).map((w)=>{if(typeof B==="object"&&"ids"in B){let H=B.data,{schema:U,table:O,commit_timestamp:F,type:A,errors:N}=H;B=Object.assign(Object.assign({},{schema:U,table:O,commit_timestamp:F,eventType:A,new:{},old:{},errors:N}),this._getPayloadRecords(H))}w.callback(B,Z)})}_isClosed(){return this.state===L$.closed}_isJoined(){return this.state===L$.joined}_isJoining(){return this.state===L$.joining}_isLeaving(){return this.state===L$.leaving}_replyEventName($){return`chan_reply_${$}`}_on($,X,Z){let Q=$.toLocaleLowerCase(),Y={type:Q,filter:X,callback:Z};if(this.bindings[Q])this.bindings[Q].push(Y);else this.bindings[Q]=[Y];return this}_off($,X){let Z=$.toLocaleLowerCase();if(this.bindings[Z])this.bindings[Z]=this.bindings[Z].filter((Q)=>{var Y;return!(((Y=Q.type)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===Z&&YQ.isEqual(Q.filter,X))});return this}static isEqual($,X){if(Object.keys($).length!==Object.keys(X).length)return!1;for(let Z in $)if($[Z]!==X[Z])return!1;return!0}_rejoinUntilConnected(){if(this.rejoinTimer.scheduleTimeout(),this.socket.isConnected())this._rejoin()}_onClose($){this._on(jX.close,{},$)}_onError($){this._on(jX.error,{},(X)=>$(X))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin($=this.timeout){if(this._isLeaving())return;this.socket._leaveOpenTopic(this.topic),this.state=L$.joining,this.joinPush.resend($)}_getPayloadRecords($){let X={new:{},old:{}};if($.type==="INSERT"||$.type==="UPDATE")X.new=C2($.columns,$.record);if($.type==="UPDATE"||$.type==="DELETE")X.old=C2($.columns,$.old_record);return X}}var I2=()=>{},Q7={HEARTBEAT_INTERVAL:25000,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eE=[1000,2000,5000,1e4],$T=1e4,XT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DY{constructor($,X){var Z;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=UY,this.transport=null,this.heartbeatIntervalMs=Q7.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=I2,this.ref=0,this.reconnectTimer=null,this.logger=I2,this.conn=null,this.sendBuffer=[],this.serializer=new X7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=(Q)=>{let Y;if(Q)Y=Q;else if(typeof fetch==="undefined")Y=(...J)=>Promise.resolve().then(() => (S8(),X9)).then(({default:W})=>W(...J)).catch((W)=>{throw new Error(`Failed to load @supabase/node-fetch: ${W.message}. This is required for HTTP requests in Node.js environments without native fetch.`)});else Y=fetch;return(...J)=>Y(...J)},!((Z=X===null||X===void 0?void 0:X.params)===null||Z===void 0?void 0:Z.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=X.params.apikey,this.endPoint=`${$}/${$7.websocket}`,this.httpEndpoint=Z7($),this._initializeOptions(X),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(X===null||X===void 0?void 0:X.fetch)}connect(){if(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())return;if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=F2.createWebSocket(this.endpointURL())}catch($){this._setConnectionState("disconnected");let X=$.message;if(X.includes("Node.js"))throw new Error(`${X}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw new Error(`WebSocket not available: ${X}`)}this._setupConnectionHandlers()}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:SB}))}disconnect($,X){if(this.isDisconnecting())return;if(this._setConnectionState("disconnecting",!0),this.conn){let Z=setTimeout(()=>{this._setConnectionState("disconnected")},100);if(this.conn.onclose=()=>{clearTimeout(Z),this._setConnectionState("disconnected")},$)this.conn.close($,X!==null&&X!==void 0?X:"");else this.conn.close();this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel($){let X=await $.unsubscribe();if(this.channels.length===0)this.disconnect();return X}async removeAllChannels(){let $=await Promise.all(this.channels.map((X)=>X.unsubscribe()));return this.channels=[],this.disconnect(),$}log($,X,Z){this.logger($,X,Z)}connectionState(){switch(this.conn&&this.conn.readyState){case $Q.connecting:return I8.Connecting;case $Q.open:return I8.Open;case $Q.closing:return I8.Closing;default:return I8.Closed}}isConnected(){return this.connectionState()===I8.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel($,X={config:{}}){let Z=`realtime:${$}`,Q=this.getChannels().find((Y)=>Y.topic===Z);if(!Q){let Y=new YQ(`realtime:${$}`,X,this);return this.channels.push(Y),Y}else return Q}push($){let{topic:X,event:Z,payload:Q,ref:Y}=$,J=()=>{this.encode($,(W)=>{var z;(z=this.conn)===null||z===void 0||z.send(W)})};if(this.log("push",`${X} ${Z} (${Y})`,Q),this.isConnected())J();else this.sendBuffer.push(J)}async setAuth($=null){this._authPromise=this._performAuth($);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var $;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(X){this.log("error","error in heartbeat callback",X)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(X){this.log("error","error in heartbeat callback",X)}this._wasManualDisconnect=!1,($=this.conn)===null||$===void 0||$.close(IB,"heartbeat timeout"),setTimeout(()=>{var X;if(!this.isConnected())(X=this.reconnectTimer)===null||X===void 0||X.scheduleTimeout()},Q7.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(X){this.log("error","error in heartbeat callback",X)}this._setAuthSafely("heartbeat")}onHeartbeat($){this.heartbeatCallback=$}flushSendBuffer(){if(this.isConnected()&&this.sendBuffer.length>0)this.sendBuffer.forEach(($)=>$()),this.sendBuffer=[]}_makeRef(){let $=this.ref+1;if($===this.ref)this.ref=0;else this.ref=$;return this.ref.toString()}_leaveOpenTopic($){let X=this.channels.find((Z)=>Z.topic===$&&(Z._isJoined()||Z._isJoining()));if(X)this.log("transport",`leaving duplicate topic "${$}"`),X.unsubscribe()}_remove($){this.channels=this.channels.filter((X)=>X.topic!==$.topic)}_onConnMessage($){this.decode($.data,(X)=>{if(X.topic==="phoenix"&&X.event==="phx_reply")try{this.heartbeatCallback(X.payload.status==="ok"?"ok":"error")}catch(G){this.log("error","error in heartbeat callback",G)}if(X.ref&&X.ref===this.pendingHeartbeatRef)this.pendingHeartbeatRef=null;let{topic:Z,event:Q,payload:Y,ref:J}=X,W=J?`(${J})`:"",z=Y.status||"";this.log("receive",`${z} ${Z} ${Q} ${W}`.trim(),Y),this.channels.filter((G)=>G._isMember(Z)).forEach((G)=>G._trigger(Q,Y,J)),this._triggerStateCallbacks("message",X)})}_clearTimer($){var X;if($==="heartbeat"&&this.heartbeatTimer)clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0;else if($==="reconnect")(X=this.reconnectTimer)===null||X===void 0||X.reset()}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){if(!this.conn)return;if("binaryType"in this.conn)this.conn.binaryType="arraybuffer";this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=($)=>this._onConnError($),this.conn.onmessage=($)=>this._onConnMessage($),this.conn.onclose=($)=>this._onConnClose($)}_teardownConnection(){if(this.conn)this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null;this._clearAllTimers(),this.channels.forEach(($)=>$.teardown())}_onConnOpen(){if(this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),!this.worker)this._startHeartbeat();else if(!this.workerRef)this._startWorkerHeartbeat();this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){if(this.workerUrl)this.log("worker",`starting worker for from ${this.workerUrl}`);else this.log("worker","starting default worker");let $=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker($),this.workerRef.onerror=(X)=>{this.log("worker","worker error",X.message),this.workerRef.terminate()},this.workerRef.onmessage=(X)=>{if(X.data.event==="keepAlive")this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose($){var X;if(this._setConnectionState("disconnected"),this.log("transport","close",$),this._triggerChanError(),this._clearTimer("heartbeat"),!this._wasManualDisconnect)(X=this.reconnectTimer)===null||X===void 0||X.scheduleTimeout();this._triggerStateCallbacks("close",$)}_onConnError($){this._setConnectionState("disconnected"),this.log("transport",`${$}`),this._triggerChanError(),this._triggerStateCallbacks("error",$)}_triggerChanError(){this.channels.forEach(($)=>$._trigger(jX.error))}_appendParams($,X){if(Object.keys(X).length===0)return $;let Z=$.match(/\?/)?"&":"?",Q=new URLSearchParams(X);return`${$}${Z}${Q}`}_workerObjectUrl($){let X;if($)X=$;else{let Z=new Blob([XT],{type:"application/javascript"});X=URL.createObjectURL(Z)}return X}_setConnectionState($,X=!1){if(this._connectionState=$,$==="connecting")this._wasManualDisconnect=!1;else if($==="disconnecting")this._wasManualDisconnect=X}async _performAuth($=null){let X;if($)X=$;else if(this.accessToken)X=await this.accessToken();else X=this.accessTokenValue;if(this.accessTokenValue!=X)this.accessTokenValue=X,this.channels.forEach((Z)=>{let Q={access_token:X,version:PB};if(X&&Z.updateJoinPayload(Q),Z.joinedOnce&&Z._isJoined())Z._push(jX.access_token,{access_token:X})})}async _waitForAuthIfNeeded(){if(this._authPromise)await this._authPromise}_setAuthSafely($="general"){this.setAuth().catch((X)=>{this.log("error",`error setting auth in ${$}`,X)})}_triggerStateCallbacks($,X){try{this.stateChangeCallbacks[$].forEach((Z)=>{try{Z(X)}catch(Q){this.log("error",`error in ${$} callback`,Q)}})}catch(Z){this.log("error",`error triggering ${$} callbacks`,Z)}}_setupReconnectionTimer(){this.reconnectTimer=new XQ(async()=>{setTimeout(async()=>{if(await this._waitForAuthIfNeeded(),!this.isConnected())this.connect()},Q7.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions($){var X,Z,Q,Y,J,W,z,G,M;if(this.transport=(X=$===null||$===void 0?void 0:$.transport)!==null&&X!==void 0?X:null,this.timeout=(Z=$===null||$===void 0?void 0:$.timeout)!==null&&Z!==void 0?Z:UY,this.heartbeatIntervalMs=(Q=$===null||$===void 0?void 0:$.heartbeatIntervalMs)!==null&&Q!==void 0?Q:Q7.HEARTBEAT_INTERVAL,this.worker=(Y=$===null||$===void 0?void 0:$.worker)!==null&&Y!==void 0?Y:!1,this.accessToken=(J=$===null||$===void 0?void 0:$.accessToken)!==null&&J!==void 0?J:null,this.heartbeatCallback=(W=$===null||$===void 0?void 0:$.heartbeatCallback)!==null&&W!==void 0?W:I2,$===null||$===void 0?void 0:$.params)this.params=$.params;if($===null||$===void 0?void 0:$.logger)this.logger=$.logger;if(($===null||$===void 0?void 0:$.logLevel)||($===null||$===void 0?void 0:$.log_level))this.logLevel=$.logLevel||$.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel});if(this.reconnectAfterMs=(z=$===null||$===void 0?void 0:$.reconnectAfterMs)!==null&&z!==void 0?z:(q)=>{return eE[q-1]||$T},this.encode=(G=$===null||$===void 0?void 0:$.encode)!==null&&G!==void 0?G:(q,B)=>{return B(JSON.stringify(q))},this.decode=(M=$===null||$===void 0?void 0:$.decode)!==null&&M!==void 0?M:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window!=="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=$===null||$===void 0?void 0:$.workerUrl}}}class NY extends Error{constructor($){super($);this.__isStorageError=!0,this.name="StorageError"}}function t0($){return typeof $==="object"&&$!==null&&"__isStorageError"in $}class R2 extends NY{constructor($,X,Z){super($);this.name="StorageApiError",this.status=X,this.statusCode=Z}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class JQ extends NY{constructor($,X){super($);this.name="StorageUnknownError",this.originalError=X}}var ZT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})},J7=($)=>{let X;if($)X=$;else if(typeof fetch==="undefined")X=(...Z)=>Promise.resolve().then(() => (S8(),X9)).then(({default:Q})=>Q(...Z));else X=fetch;return(...Z)=>X(...Z)},TB=()=>ZT(void 0,void 0,void 0,function*(){if(typeof Response==="undefined")return(yield Promise.resolve().then(() => (S8(),X9))).Response;return Response}),Y7=($)=>{if(Array.isArray($))return $.map((Z)=>Y7(Z));else if(typeof $==="function"||$!==Object($))return $;let X={};return Object.entries($).forEach(([Z,Q])=>{let Y=Z.replace(/([-_][a-z])/gi,(J)=>J.toUpperCase().replace(/[-_]/g,""));X[Y]=Y7(Q)}),X},_B=($)=>{if(typeof $!=="object"||$===null)return!1;let X=Object.getPrototypeOf($);return(X===null||X===Object.prototype||Object.getPrototypeOf(X)===null)&&!(Symbol.toStringTag in $)&&!(Symbol.iterator in $)};var Z9=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})},E2=($)=>$.msg||$.message||$.error_description||$.error||JSON.stringify($),QT=($,X,Z)=>Z9(void 0,void 0,void 0,function*(){let Q=yield TB();if($ instanceof Q&&!(Z===null||Z===void 0?void 0:Z.noResolveJson))$.json().then((Y)=>{let J=$.status||500,W=(Y===null||Y===void 0?void 0:Y.statusCode)||J+"";X(new R2(E2(Y),J,W))}).catch((Y)=>{X(new JQ(E2(Y),Y))});else X(new JQ(E2($),$))}),YT=($,X,Z,Q)=>{let Y={method:$,headers:(X===null||X===void 0?void 0:X.headers)||{}};if($==="GET"||!Q)return Y;if(_B(Q))Y.headers=Object.assign({"Content-Type":"application/json"},X===null||X===void 0?void 0:X.headers),Y.body=JSON.stringify(Q);else Y.body=Q;if(X===null||X===void 0?void 0:X.duplex)Y.duplex=X.duplex;return Object.assign(Object.assign({},Y),Z)};function wY($,X,Z,Q,Y,J){return Z9(this,void 0,void 0,function*(){return new Promise((W,z)=>{$(Z,YT(X,Q,Y,J)).then((G)=>{if(!G.ok)throw G;if(Q===null||Q===void 0?void 0:Q.noResolveJson)return G;return G.json()}).then((G)=>W(G)).catch((G)=>QT(G,z,Q))})})}function WQ($,X,Z,Q){return Z9(this,void 0,void 0,function*(){return wY($,"GET",X,Z,Q)})}function kX($,X,Z,Q,Y){return Z9(this,void 0,void 0,function*(){return wY($,"POST",X,Q,Y,Z)})}function OY($,X,Z,Q,Y){return Z9(this,void 0,void 0,function*(){return wY($,"PUT",X,Q,Y,Z)})}function bB($,X,Z,Q){return Z9(this,void 0,void 0,function*(){return wY($,"HEAD",X,Object.assign(Object.assign({},Z),{noResolveJson:!0}),Q)})}function W7($,X,Z,Q,Y){return Z9(this,void 0,void 0,function*(){return wY($,"DELETE",X,Q,Y,Z)})}var JT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};class z7{constructor($,X){this.downloadFn=$,this.shouldThrowOnError=X}then($,X){return this.execute().then($,X)}execute(){return JT(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch($){if(this.shouldThrowOnError)throw $;if(t0($))return{data:null,error:$};throw $}})}}var WT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};class G7{constructor($,X){this.downloadFn=$,this.shouldThrowOnError=X}asStream(){return new z7(this.downloadFn,this.shouldThrowOnError)}then($,X){return this.execute().then($,X)}execute(){return WT(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch($){if(this.shouldThrowOnError)throw $;if(t0($))return{data:null,error:$};throw $}})}}var qX=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})},zT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M7{constructor($,X={},Z,Q){this.shouldThrowOnError=!1,this.url=$,this.headers=X,this.bucketId=Z,this.fetch=J7(Q)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate($,X,Z,Q){return qX(this,void 0,void 0,function*(){try{let Y,J=Object.assign(Object.assign({},xB),Q),W=Object.assign(Object.assign({},this.headers),$==="POST"&&{"x-upsert":String(J.upsert)}),z=J.metadata;if(typeof Blob!=="undefined"&&Z instanceof Blob){if(Y=new FormData,Y.append("cacheControl",J.cacheControl),z)Y.append("metadata",this.encodeMetadata(z));Y.append("",Z)}else if(typeof FormData!=="undefined"&&Z instanceof FormData){if(Y=Z,Y.append("cacheControl",J.cacheControl),z)Y.append("metadata",this.encodeMetadata(z))}else if(Y=Z,W["cache-control"]=`max-age=${J.cacheControl}`,W["content-type"]=J.contentType,z)W["x-metadata"]=this.toBase64(this.encodeMetadata(z));if(Q===null||Q===void 0?void 0:Q.headers)W=Object.assign(Object.assign({},W),Q.headers);let G=this._removeEmptyFolders(X),M=this._getFinalPath(G),q=yield($=="PUT"?OY:kX)(this.fetch,`${this.url}/object/${M}`,Y,Object.assign({headers:W},(J===null||J===void 0?void 0:J.duplex)?{duplex:J.duplex}:{}));return{data:{path:G,id:q.Id,fullPath:q.Key},error:null}}catch(Y){if(this.shouldThrowOnError)throw Y;if(t0(Y))return{data:null,error:Y};throw Y}})}upload($,X,Z){return qX(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",$,X,Z)})}uploadToSignedUrl($,X,Z,Q){return qX(this,void 0,void 0,function*(){let Y=this._removeEmptyFolders($),J=this._getFinalPath(Y),W=new URL(this.url+`/object/upload/sign/${J}`);W.searchParams.set("token",X);try{let z,G=Object.assign({upsert:xB.upsert},Q),M=Object.assign(Object.assign({},this.headers),{"x-upsert":String(G.upsert)});if(typeof Blob!=="undefined"&&Z instanceof Blob)z=new FormData,z.append("cacheControl",G.cacheControl),z.append("",Z);else if(typeof FormData!=="undefined"&&Z instanceof FormData)z=Z,z.append("cacheControl",G.cacheControl);else z=Z,M["cache-control"]=`max-age=${G.cacheControl}`,M["content-type"]=G.contentType;let q=yield OY(this.fetch,W.toString(),z,{headers:M});return{data:{path:Y,fullPath:q.Key},error:null}}catch(z){if(this.shouldThrowOnError)throw z;if(t0(z))return{data:null,error:z};throw z}})}createSignedUploadUrl($,X){return qX(this,void 0,void 0,function*(){try{let Z=this._getFinalPath($),Q=Object.assign({},this.headers);if(X===null||X===void 0?void 0:X.upsert)Q["x-upsert"]="true";let Y=yield kX(this.fetch,`${this.url}/object/upload/sign/${Z}`,{},{headers:Q}),J=new URL(this.url+Y.url),W=J.searchParams.get("token");if(!W)throw new NY("No token returned by API");return{data:{signedUrl:J.toString(),path:$,token:W},error:null}}catch(Z){if(this.shouldThrowOnError)throw Z;if(t0(Z))return{data:null,error:Z};throw Z}})}update($,X,Z){return qX(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",$,X,Z)})}move($,X,Z){return qX(this,void 0,void 0,function*(){try{return{data:yield kX(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:$,destinationKey:X,destinationBucket:Z===null||Z===void 0?void 0:Z.destinationBucket},{headers:this.headers}),error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}copy($,X,Z){return qX(this,void 0,void 0,function*(){try{return{data:{path:(yield kX(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:$,destinationKey:X,destinationBucket:Z===null||Z===void 0?void 0:Z.destinationBucket},{headers:this.headers})).Key},error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}createSignedUrl($,X,Z){return qX(this,void 0,void 0,function*(){try{let Q=this._getFinalPath($),Y=yield kX(this.fetch,`${this.url}/object/sign/${Q}`,Object.assign({expiresIn:X},(Z===null||Z===void 0?void 0:Z.transform)?{transform:Z.transform}:{}),{headers:this.headers}),J=(Z===null||Z===void 0?void 0:Z.download)?`&download=${Z.download===!0?"":Z.download}`:"";return Y={signedUrl:encodeURI(`${this.url}${Y.signedURL}${J}`)},{data:Y,error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}createSignedUrls($,X,Z){return qX(this,void 0,void 0,function*(){try{let Q=yield kX(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:X,paths:$},{headers:this.headers}),Y=(Z===null||Z===void 0?void 0:Z.download)?`&download=${Z.download===!0?"":Z.download}`:"";return{data:Q.map((J)=>Object.assign(Object.assign({},J),{signedUrl:J.signedURL?encodeURI(`${this.url}${J.signedURL}${Y}`):null})),error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}download($,X){let Q=typeof(X===null||X===void 0?void 0:X.transform)!=="undefined"?"render/image/authenticated":"object",Y=this.transformOptsToQueryString((X===null||X===void 0?void 0:X.transform)||{}),J=Y?`?${Y}`:"",W=this._getFinalPath($);return new G7(()=>WQ(this.fetch,`${this.url}/${Q}/${W}${J}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info($){return qX(this,void 0,void 0,function*(){let X=this._getFinalPath($);try{let Z=yield WQ(this.fetch,`${this.url}/object/info/${X}`,{headers:this.headers});return{data:Y7(Z),error:null}}catch(Z){if(this.shouldThrowOnError)throw Z;if(t0(Z))return{data:null,error:Z};throw Z}})}exists($){return qX(this,void 0,void 0,function*(){let X=this._getFinalPath($);try{return yield bB(this.fetch,`${this.url}/object/${X}`,{headers:this.headers}),{data:!0,error:null}}catch(Z){if(this.shouldThrowOnError)throw Z;if(t0(Z)&&Z instanceof JQ){let Q=Z.originalError;if([400,404].includes(Q===null||Q===void 0?void 0:Q.status))return{data:!1,error:Z}}throw Z}})}getPublicUrl($,X){let Z=this._getFinalPath($),Q=[],Y=(X===null||X===void 0?void 0:X.download)?`download=${X.download===!0?"":X.download}`:"";if(Y!=="")Q.push(Y);let W=typeof(X===null||X===void 0?void 0:X.transform)!=="undefined"?"render/image":"object",z=this.transformOptsToQueryString((X===null||X===void 0?void 0:X.transform)||{});if(z!=="")Q.push(z);let G=Q.join("&");if(G!=="")G=`?${G}`;return{data:{publicUrl:encodeURI(`${this.url}/${W}/public/${Z}${G}`)}}}remove($){return qX(this,void 0,void 0,function*(){try{return{data:yield W7(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:$},{headers:this.headers}),error:null}}catch(X){if(this.shouldThrowOnError)throw X;if(t0(X))return{data:null,error:X};throw X}})}list($,X,Z){return qX(this,void 0,void 0,function*(){try{let Q=Object.assign(Object.assign(Object.assign({},zT),X),{prefix:$||""});return{data:yield kX(this.fetch,`${this.url}/object/list/${this.bucketId}`,Q,{headers:this.headers},Z),error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}listV2($,X){return qX(this,void 0,void 0,function*(){try{let Z=Object.assign({},$);return{data:yield kX(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,Z,{headers:this.headers},X),error:null}}catch(Z){if(this.shouldThrowOnError)throw Z;if(t0(Z))return{data:null,error:Z};throw Z}})}encodeMetadata($){return JSON.stringify($)}toBase64($){if(typeof Buffer!=="undefined")return Buffer.from($).toString("base64");return btoa($)}_getFinalPath($){return`${this.bucketId}/${$.replace(/^\/+/,"")}`}_removeEmptyFolders($){return $.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString($){let X=[];if($.width)X.push(`width=${$.width}`);if($.height)X.push(`height=${$.height}`);if($.resize)X.push(`resize=${$.resize}`);if($.format)X.push(`format=${$.format}`);if($.quality)X.push(`quality=${$.quality}`);return X.join("&")}}var kB="2.75.0";var gB={"X-Client-Info":`storage-js/${kB}`};var zQ=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};class q7{constructor($,X={},Z,Q){this.shouldThrowOnError=!1;let Y=new URL($);if(Q===null||Q===void 0?void 0:Q.useNewHostname){if(/supabase\.(co|in|red)$/.test(Y.hostname)&&!Y.hostname.includes("storage.supabase."))Y.hostname=Y.hostname.replace("supabase.","storage.supabase.")}this.url=Y.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gB),X),this.fetch=J7(Z)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return zQ(this,void 0,void 0,function*(){try{return{data:yield WQ(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch($){if(this.shouldThrowOnError)throw $;if(t0($))return{data:null,error:$};throw $}})}getBucket($){return zQ(this,void 0,void 0,function*(){try{return{data:yield WQ(this.fetch,`${this.url}/bucket/${$}`,{headers:this.headers}),error:null}}catch(X){if(this.shouldThrowOnError)throw X;if(t0(X))return{data:null,error:X};throw X}})}createBucket($){return zQ(this,arguments,void 0,function*(X,Z={public:!1}){try{return{data:yield kX(this.fetch,`${this.url}/bucket`,{id:X,name:X,type:Z.type,public:Z.public,file_size_limit:Z.fileSizeLimit,allowed_mime_types:Z.allowedMimeTypes},{headers:this.headers}),error:null}}catch(Q){if(this.shouldThrowOnError)throw Q;if(t0(Q))return{data:null,error:Q};throw Q}})}updateBucket($,X){return zQ(this,void 0,void 0,function*(){try{return{data:yield OY(this.fetch,`${this.url}/bucket/${$}`,{id:$,name:$,public:X.public,file_size_limit:X.fileSizeLimit,allowed_mime_types:X.allowedMimeTypes},{headers:this.headers}),error:null}}catch(Z){if(this.shouldThrowOnError)throw Z;if(t0(Z))return{data:null,error:Z};throw Z}})}emptyBucket($){return zQ(this,void 0,void 0,function*(){try{return{data:yield kX(this.fetch,`${this.url}/bucket/${$}/empty`,{},{headers:this.headers}),error:null}}catch(X){if(this.shouldThrowOnError)throw X;if(t0(X))return{data:null,error:X};throw X}})}deleteBucket($){return zQ(this,void 0,void 0,function*(){try{return{data:yield W7(this.fetch,`${this.url}/bucket/${$}`,{},{headers:this.headers}),error:null}}catch(X){if(this.shouldThrowOnError)throw X;if(t0(X))return{data:null,error:X};throw X}})}}class B7 extends q7{constructor($,X={},Z,Q){super($,X,Z,Q)}from($){return new M7(this.url,this.headers,$,this.fetch)}}var fB="2.75.0";var AY="";if(typeof Deno!=="undefined")AY="deno";else if(typeof document!=="undefined")AY="web";else if(typeof navigator!=="undefined"&&navigator.product==="ReactNative")AY="react-native";else AY="node";var GT={"X-Client-Info":`supabase-js-${AY}/${fB}`},vB={headers:GT},yB={schema:"public"},hB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mB={};S8();var MT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})},qT=($)=>{let X;if($)X=$;else if(typeof fetch==="undefined")X=N2;else X=fetch;return(...Z)=>X(...Z)},BT=()=>{if(typeof Headers==="undefined")return w2;return Headers},dB=($,X,Z)=>{let Q=qT(Z),Y=BT();return(J,W)=>MT(void 0,void 0,void 0,function*(){var z;let G=(z=yield X())!==null&&z!==void 0?z:$,M=new Y(W===null||W===void 0?void 0:W.headers);if(!M.has("apikey"))M.set("apikey",$);if(!M.has("Authorization"))M.set("Authorization",`Bearer ${G}`);return Q(J,Object.assign(Object.assign({},W),{headers:M}))})};var HT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};function UT($){return $.endsWith("/")?$:$+"/"}function cB($,X){var Z,Q;let{db:Y,auth:J,realtime:W,global:z}=$,{db:G,auth:M,realtime:q,global:B}=X,w={db:Object.assign(Object.assign({},G),Y),auth:Object.assign(Object.assign({},M),J),realtime:Object.assign(Object.assign({},q),W),storage:{},global:Object.assign(Object.assign(Object.assign({},B),z),{headers:Object.assign(Object.assign({},(Z=B===null||B===void 0?void 0:B.headers)!==null&&Z!==void 0?Z:{}),(Q=z===null||z===void 0?void 0:z.headers)!==null&&Q!==void 0?Q:{})}),accessToken:()=>HT(this,void 0,void 0,function*(){return""})};if($.accessToken)w.accessToken=$.accessToken;else delete w.accessToken;return w}function uB($){let X=$===null||$===void 0?void 0:$.trim();if(!X)throw new Error("supabaseUrl is required.");if(!X.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(UT(X))}catch(Z){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var H7="2.75.0";var Q9=30000,U7=3,D7=U7*Q9,lB="http://localhost:9999",pB="supabase.auth.token";var iB={"X-Client-Info":`gotrue-js/${H7}`};var LY="X-Supabase-Api-Version",T2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oB=600000;class Y9 extends Error{constructor($,X,Z){super($);this.__isAuthError=!0,this.name="AuthError",this.status=X,this.code=Z}}function n($){return typeof $==="object"&&$!==null&&"__isAuthError"in $}class _2 extends Y9{constructor($,X,Z){super($,X,Z);this.name="AuthApiError",this.status=X,this.code=Z}}function rB($){return n($)&&$.name==="AuthApiError"}class JZ extends Y9{constructor($,X){super($);this.name="AuthUnknownError",this.originalError=X}}class oZ extends Y9{constructor($,X,Z,Q){super($,Z,Q);this.name=X,this.status=Z}}class WZ extends oZ{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sB($){return n($)&&$.name==="AuthSessionMissingError"}class E8 extends oZ{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class GQ extends oZ{constructor($){super($,"AuthInvalidCredentialsError",400,void 0)}}class MQ extends oZ{constructor($,X=null){super($,"AuthImplicitGrantRedirectError",500,void 0);this.details=null,this.details=X}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tB($){return n($)&&$.name==="AuthImplicitGrantRedirectError"}class N7 extends oZ{constructor($,X=null){super($,"AuthPKCEGrantCodeExchangeError",500,void 0);this.details=null,this.details=X}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class KY extends oZ{constructor($,X){super($,"AuthRetryableFetchError",X,void 0)}}function w7($){return n($)&&$.name==="AuthRetryableFetchError"}class O7 extends oZ{constructor($,X,Z){super($,"AuthWeakPasswordError",X,"weak_password");this.reasons=Z}}class qQ extends oZ{constructor($){super($,"AuthInvalidJwtError",400,"invalid_jwt")}}var A7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aB=` 	
\r=`.split(""),DT=(()=>{let $=new Array(128);for(let X=0;X<$.length;X+=1)$[X]=-1;for(let X=0;X<aB.length;X+=1)$[aB[X].charCodeAt(0)]=-2;for(let X=0;X<A7.length;X+=1)$[A7[X].charCodeAt(0)]=X;return $})();function eB($,X,Z){if($!==null){X.queue=X.queue<<8|$,X.queuedBits+=8;while(X.queuedBits>=6){let Q=X.queue>>X.queuedBits-6&63;Z(A7[Q]),X.queuedBits-=6}}else if(X.queuedBits>0){X.queue=X.queue<<6-X.queuedBits,X.queuedBits=6;while(X.queuedBits>=6){let Q=X.queue>>X.queuedBits-6&63;Z(A7[Q]),X.queuedBits-=6}}}function $1($,X,Z){let Q=DT[$];if(Q>-1){X.queue=X.queue<<6|Q,X.queuedBits+=6;while(X.queuedBits>=8)Z(X.queue>>X.queuedBits-8&255),X.queuedBits-=8}else if(Q===-2)return;else throw new Error(`Invalid Base64-URL character "${String.fromCharCode($)}"`)}function b2($){let X=[],Z=(W)=>{X.push(String.fromCodePoint(W))},Q={utf8seq:0,codepoint:0},Y={queue:0,queuedBits:0},J=(W)=>{OT(W,Q,Z)};for(let W=0;W<$.length;W+=1)$1($.charCodeAt(W),Y,J);return X.join("")}function NT($,X){if($<=127){X($);return}else if($<=2047){X(192|$>>6),X(128|$&63);return}else if($<=65535){X(224|$>>12),X(128|$>>6&63),X(128|$&63);return}else if($<=1114111){X(240|$>>18),X(128|$>>12&63),X(128|$>>6&63),X(128|$&63);return}throw new Error(`Unrecognized Unicode codepoint: ${$.toString(16)}`)}function wT($,X){for(let Z=0;Z<$.length;Z+=1){let Q=$.charCodeAt(Z);if(Q>55295&&Q<=56319){let Y=(Q-55296)*1024&65535;Q=($.charCodeAt(Z+1)-56320&65535|Y)+65536,Z+=1}NT(Q,X)}}function OT($,X,Z){if(X.utf8seq===0){if($<=127){Z($);return}for(let Q=1;Q<6;Q+=1)if(($>>7-Q&1)===0){X.utf8seq=Q;break}if(X.utf8seq===2)X.codepoint=$&31;else if(X.utf8seq===3)X.codepoint=$&15;else if(X.utf8seq===4)X.codepoint=$&7;else throw new Error("Invalid UTF-8 sequence");X.utf8seq-=1}else if(X.utf8seq>0){if($<=127)throw new Error("Invalid UTF-8 sequence");if(X.codepoint=X.codepoint<<6|$&63,X.utf8seq-=1,X.utf8seq===0)Z(X.codepoint)}}function T8($){let X=[],Z={queue:0,queuedBits:0},Q=(Y)=>{X.push(Y)};for(let Y=0;Y<$.length;Y+=1)$1($.charCodeAt(Y),Z,Q);return new Uint8Array(X)}function X1($){let X=[];return wT($,(Z)=>X.push(Z)),new Uint8Array(X)}function rZ($){let X=[],Z={queue:0,queuedBits:0},Q=(Y)=>{X.push(Y)};return $.forEach((Y)=>eB(Y,Z,Q)),eB(null,Z,Q),X.join("")}function Z1($){return Math.round(Date.now()/1000)+$}function Q1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function($){let X=Math.random()*16|0;return($=="x"?X:X&3|8).toString(16)})}var a$=()=>typeof window!=="undefined"&&typeof document!=="undefined",J9={tested:!1,writable:!1},L7=()=>{if(!a$())return!1;try{if(typeof globalThis.localStorage!=="object")return!1}catch(X){return!1}if(J9.tested)return J9.writable;let $=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem($,$),globalThis.localStorage.removeItem($),J9.tested=!0,J9.writable=!0}catch(X){J9.tested=!0,J9.writable=!1}return J9.writable};function Y1($){let X={},Z=new URL($);if(Z.hash&&Z.hash[0]==="#")try{new URLSearchParams(Z.hash.substring(1)).forEach((Y,J)=>{X[J]=Y})}catch(Q){}return Z.searchParams.forEach((Q,Y)=>{X[Y]=Q}),X}var K7=($)=>{let X;if($)X=$;else if(typeof fetch==="undefined")X=(...Z)=>Promise.resolve().then(() => (S8(),X9)).then(({default:Q})=>Q(...Z));else X=fetch;return(...Z)=>X(...Z)},J1=($)=>{return typeof $==="object"&&$!==null&&"status"in $&&"ok"in $&&"json"in $&&typeof $.json==="function"},W9=async($,X,Z)=>{await $.setItem(X,JSON.stringify(Z))},_8=async($,X)=>{let Z=await $.getItem(X);if(!Z)return null;try{return JSON.parse(Z)}catch(Q){return Z}},sZ=async($,X)=>{await $.removeItem(X)};class jY{constructor(){this.promise=new jY.promiseConstructor(($,X)=>{this.resolve=$,this.reject=X})}}jY.promiseConstructor=Promise;function j7($){let X=$.split(".");if(X.length!==3)throw new qQ("Invalid JWT structure");for(let Q=0;Q<X.length;Q++)if(!nB.test(X[Q]))throw new qQ("JWT not in base64url format");return{header:JSON.parse(b2(X[0])),payload:JSON.parse(b2(X[1])),signature:T8(X[2]),raw:{header:X[0],payload:X[1]}}}async function W1($){return await new Promise((X)=>{setTimeout(()=>X(null),$)})}function z1($,X){return new Promise((Q,Y)=>{(async()=>{for(let J=0;J<1/0;J++)try{let W=await $(J);if(!X(J,null,W)){Q(W);return}}catch(W){if(!X(J,W)){Y(W);return}}})()})}function AT($){return("0"+$.toString(16)).substr(-2)}function LT(){let X=new Uint32Array(56);if(typeof crypto==="undefined"){let Y="";for(let J=0;J<56;J++)Y+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".charAt(Math.floor(Math.random()*66));return Y}return crypto.getRandomValues(X),Array.from(X,AT).join("")}async function KT($){let Z=new TextEncoder().encode($),Q=await crypto.subtle.digest("SHA-256",Z),Y=new Uint8Array(Q);return Array.from(Y).map((J)=>String.fromCharCode(J)).join("")}async function jT($){if(!(typeof crypto!=="undefined"&&typeof crypto.subtle!=="undefined"&&typeof TextEncoder!=="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),$;let Z=await KT($);return btoa(Z).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function z9($,X,Z=!1){let Q=LT(),Y=Q;if(Z)Y+="/PASSWORD_RECOVERY";await W9($,`${X}-code-verifier`,Y);let J=await jT(Q);return[J,Q===J?"plain":"s256"]}var FT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function G1($){let X=$.headers.get(LY);if(!X)return null;if(!X.match(FT))return null;try{return new Date(`${X}T00:00:00.0Z`)}catch(Z){return null}}function M1($){if(!$)throw new Error("Missing exp claim");let X=Math.floor(Date.now()/1000);if($<=X)throw new Error("JWT has expired")}function q1($){switch($){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var VT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function G9($){if(!VT.test($))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function F7(){return new Proxy({},{get:(X,Z)=>{if(Z==="__isUserNotAvailableProxy")return!0;if(typeof Z==="symbol"){let Q=Z.toString();if(Q==="Symbol(Symbol.toPrimitive)"||Q==="Symbol(Symbol.toStringTag)"||Q==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${Z}" property of the session object is not supported. Please use getUser() instead.`)},set:(X,Z)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${Z}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(X,Z)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${Z}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function x2($){return JSON.parse(JSON.stringify($))}var CT=function($,X){var Z={};for(var Q in $)if(Object.prototype.hasOwnProperty.call($,Q)&&X.indexOf(Q)<0)Z[Q]=$[Q];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Y=0,Q=Object.getOwnPropertySymbols($);Y<Q.length;Y++)if(X.indexOf(Q[Y])<0&&Object.prototype.propertyIsEnumerable.call($,Q[Y]))Z[Q[Y]]=$[Q[Y]]}return Z},M9=($)=>$.msg||$.message||$.error_description||$.error||JSON.stringify($),PT=[502,503,504];async function B1($){var X;if(!J1($))throw new KY(M9($),0);if(PT.includes($.status))throw new KY(M9($),$.status);let Z;try{Z=await $.json()}catch(J){throw new JZ(M9(J),J)}let Q=void 0,Y=G1($);if(Y&&Y.getTime()>=T2["2024-01-01"].timestamp&&typeof Z==="object"&&Z&&typeof Z.code==="string")Q=Z.code;else if(typeof Z==="object"&&Z&&typeof Z.error_code==="string")Q=Z.error_code;if(!Q){if(typeof Z==="object"&&Z&&typeof Z.weak_password==="object"&&Z.weak_password&&Array.isArray(Z.weak_password.reasons)&&Z.weak_password.reasons.length&&Z.weak_password.reasons.reduce((J,W)=>J&&typeof W==="string",!0))throw new O7(M9(Z),$.status,Z.weak_password.reasons)}else if(Q==="weak_password")throw new O7(M9(Z),$.status,((X=Z.weak_password)===null||X===void 0?void 0:X.reasons)||[]);else if(Q==="session_not_found")throw new WZ;throw new _2(M9(Z),$.status||500,Q)}var ST=($,X,Z,Q)=>{let Y={method:$,headers:(X===null||X===void 0?void 0:X.headers)||{}};if($==="GET")return Y;return Y.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},X===null||X===void 0?void 0:X.headers),Y.body=JSON.stringify(Q),Object.assign(Object.assign({},Y),Z)};async function a($,X,Z,Q){var Y;let J=Object.assign({},Q===null||Q===void 0?void 0:Q.headers);if(!J[LY])J[LY]=T2["2024-01-01"].name;if(Q===null||Q===void 0?void 0:Q.jwt)J.Authorization=`Bearer ${Q.jwt}`;let W=(Y=Q===null||Q===void 0?void 0:Q.query)!==null&&Y!==void 0?Y:{};if(Q===null||Q===void 0?void 0:Q.redirectTo)W.redirect_to=Q.redirectTo;let z=Object.keys(W).length?"?"+new URLSearchParams(W).toString():"",G=await IT($,X,Z+z,{headers:J,noResolveJson:Q===null||Q===void 0?void 0:Q.noResolveJson},{},Q===null||Q===void 0?void 0:Q.body);return(Q===null||Q===void 0?void 0:Q.xform)?Q===null||Q===void 0?void 0:Q.xform(G):{data:Object.assign({},G),error:null}}async function IT($,X,Z,Q,Y,J){let W=ST(X,Q,Y,J),z;try{z=await $(Z,Object.assign({},W))}catch(G){throw console.error(G),new KY(M9(G),0)}if(!z.ok)await B1(z);if(Q===null||Q===void 0?void 0:Q.noResolveJson)return z;try{return await z.json()}catch(G){await B1(G)}}function gX($){var X;let Z=null;if(RT($)){if(Z=Object.assign({},$),!$.expires_at)Z.expires_at=Z1($.expires_in)}let Q=(X=$.user)!==null&&X!==void 0?X:$;return{data:{session:Z,user:Q},error:null}}function k2($){let X=gX($);if(!X.error&&$.weak_password&&typeof $.weak_password==="object"&&Array.isArray($.weak_password.reasons)&&$.weak_password.reasons.length&&$.weak_password.message&&typeof $.weak_password.message==="string"&&$.weak_password.reasons.reduce((Z,Q)=>Z&&typeof Q==="string",!0))X.data.weak_password=$.weak_password;return X}function KZ($){var X;return{data:{user:(X=$.user)!==null&&X!==void 0?X:$},error:null}}function H1($){return{data:$,error:null}}function U1($){let{action_link:X,email_otp:Z,hashed_token:Q,redirect_to:Y,verification_type:J}=$,W=CT($,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),z={action_link:X,email_otp:Z,hashed_token:Q,redirect_to:Y,verification_type:J},G=Object.assign({},W);return{data:{properties:z,user:G},error:null}}function g2($){return $}function RT($){return $.access_token&&$.refresh_token&&$.expires_in}var V7=["global","local","others"];var ET=function($,X){var Z={};for(var Q in $)if(Object.prototype.hasOwnProperty.call($,Q)&&X.indexOf(Q)<0)Z[Q]=$[Q];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Y=0,Q=Object.getOwnPropertySymbols($);Y<Q.length;Y++)if(X.indexOf(Q[Y])<0&&Object.prototype.propertyIsEnumerable.call($,Q[Y]))Z[Q[Y]]=$[Q[Y]]}return Z};class BQ{constructor({url:$="",headers:X={},fetch:Z}){this.url=$,this.headers=X,this.fetch=K7(Z),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut($,X=V7[0]){if(V7.indexOf(X)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${V7.join(", ")}`);try{return await a(this.fetch,"POST",`${this.url}/logout?scope=${X}`,{headers:this.headers,jwt:$,noResolveJson:!0}),{data:null,error:null}}catch(Z){if(n(Z))return{data:null,error:Z};throw Z}}async inviteUserByEmail($,X={}){try{return await a(this.fetch,"POST",`${this.url}/invite`,{body:{email:$,data:X.data},headers:this.headers,redirectTo:X.redirectTo,xform:KZ})}catch(Z){if(n(Z))return{data:{user:null},error:Z};throw Z}}async generateLink($){try{let{options:X}=$,Z=ET($,["options"]),Q=Object.assign(Object.assign({},Z),X);if("newEmail"in Z)Q.new_email=Z===null||Z===void 0?void 0:Z.newEmail,delete Q.newEmail;return await a(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:Q,headers:this.headers,xform:U1,redirectTo:X===null||X===void 0?void 0:X.redirectTo})}catch(X){if(n(X))return{data:{properties:null,user:null},error:X};throw X}}async createUser($){try{return await a(this.fetch,"POST",`${this.url}/admin/users`,{body:$,headers:this.headers,xform:KZ})}catch(X){if(n(X))return{data:{user:null},error:X};throw X}}async listUsers($){var X,Z,Q,Y,J,W,z;try{let G={nextPage:null,lastPage:0,total:0},M=await a(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(Z=(X=$===null||$===void 0?void 0:$.page)===null||X===void 0?void 0:X.toString())!==null&&Z!==void 0?Z:"",per_page:(Y=(Q=$===null||$===void 0?void 0:$.perPage)===null||Q===void 0?void 0:Q.toString())!==null&&Y!==void 0?Y:""},xform:g2});if(M.error)throw M.error;let q=await M.json(),B=(J=M.headers.get("x-total-count"))!==null&&J!==void 0?J:0,w=(z=(W=M.headers.get("link"))===null||W===void 0?void 0:W.split(","))!==null&&z!==void 0?z:[];if(w.length>0)w.forEach((H)=>{let U=parseInt(H.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(H.split(";")[1].split("=")[1]);G[`${O}Page`]=U}),G.total=parseInt(B);return{data:Object.assign(Object.assign({},q),G),error:null}}catch(G){if(n(G))return{data:{users:[]},error:G};throw G}}async getUserById($){G9($);try{return await a(this.fetch,"GET",`${this.url}/admin/users/${$}`,{headers:this.headers,xform:KZ})}catch(X){if(n(X))return{data:{user:null},error:X};throw X}}async updateUserById($,X){G9($);try{return await a(this.fetch,"PUT",`${this.url}/admin/users/${$}`,{body:X,headers:this.headers,xform:KZ})}catch(Z){if(n(Z))return{data:{user:null},error:Z};throw Z}}async deleteUser($,X=!1){G9($);try{return await a(this.fetch,"DELETE",`${this.url}/admin/users/${$}`,{headers:this.headers,body:{should_soft_delete:X},xform:KZ})}catch(Z){if(n(Z))return{data:{user:null},error:Z};throw Z}}async _listFactors($){G9($.userId);try{let{data:X,error:Z}=await a(this.fetch,"GET",`${this.url}/admin/users/${$.userId}/factors`,{headers:this.headers,xform:(Q)=>{return{data:{factors:Q},error:null}}});return{data:X,error:Z}}catch(X){if(n(X))return{data:null,error:X};throw X}}async _deleteFactor($){G9($.userId),G9($.id);try{return{data:await a(this.fetch,"DELETE",`${this.url}/admin/users/${$.userId}/factors/${$.id}`,{headers:this.headers}),error:null}}catch(X){if(n(X))return{data:null,error:X};throw X}}async _listOAuthClients($){var X,Z,Q,Y,J,W,z;try{let G={nextPage:null,lastPage:0,total:0},M=await a(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(Z=(X=$===null||$===void 0?void 0:$.page)===null||X===void 0?void 0:X.toString())!==null&&Z!==void 0?Z:"",per_page:(Y=(Q=$===null||$===void 0?void 0:$.perPage)===null||Q===void 0?void 0:Q.toString())!==null&&Y!==void 0?Y:""},xform:g2});if(M.error)throw M.error;let q=await M.json(),B=(J=M.headers.get("x-total-count"))!==null&&J!==void 0?J:0,w=(z=(W=M.headers.get("link"))===null||W===void 0?void 0:W.split(","))!==null&&z!==void 0?z:[];if(w.length>0)w.forEach((H)=>{let U=parseInt(H.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(H.split(";")[1].split("=")[1]);G[`${O}Page`]=U}),G.total=parseInt(B);return{data:Object.assign(Object.assign({},q),G),error:null}}catch(G){if(n(G))return{data:{clients:[]},error:G};throw G}}async _createOAuthClient($){try{return await a(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:$,headers:this.headers,xform:(X)=>{return{data:X,error:null}}})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _getOAuthClient($){try{return await a(this.fetch,"GET",`${this.url}/admin/oauth/clients/${$}`,{headers:this.headers,xform:(X)=>{return{data:X,error:null}}})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _deleteOAuthClient($){try{return await a(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${$}`,{headers:this.headers,xform:(X)=>{return{data:X,error:null}}})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _regenerateOAuthClientSecret($){try{return await a(this.fetch,"POST",`${this.url}/admin/oauth/clients/${$}/regenerate_secret`,{headers:this.headers,xform:(X)=>{return{data:X,error:null}}})}catch(X){if(n(X))return{data:null,error:X};throw X}}}function f2($={}){return{getItem:(X)=>{return $[X]||null},setItem:(X,Z)=>{$[X]=Z},removeItem:(X)=>{delete $[X]}}}var q9={debug:!!(globalThis&&L7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class C7 extends Error{constructor($){super($);this.isAcquireTimeout=!0}}class v2 extends C7{}async function y2($,X,Z){if(q9.debug)console.log("@supabase/gotrue-js: navigatorLock: acquire lock",$,X);let Q=new globalThis.AbortController;if(X>0)setTimeout(()=>{if(Q.abort(),q9.debug)console.log("@supabase/gotrue-js: navigatorLock acquire timed out",$)},X);return await Promise.resolve().then(()=>globalThis.navigator.locks.request($,X===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:Q.signal},async(Y)=>{if(Y){if(q9.debug)console.log("@supabase/gotrue-js: navigatorLock: acquired",$,Y.name);try{return await Z()}finally{if(q9.debug)console.log("@supabase/gotrue-js: navigatorLock: released",$,Y.name)}}else if(X===0){if(q9.debug)console.log("@supabase/gotrue-js: navigatorLock: not immediately available",$);throw new v2(`Acquiring an exclusive Navigator LockManager lock "${$}" immediately failed`)}else{if(q9.debug)try{let J=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(J,null,"  "))}catch(J){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",J)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await Z()}}))}function D1(){if(typeof globalThis==="object")return;try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch($){if(typeof self!=="undefined")self.globalThis=self}}function h2($){if(!/^0x[a-fA-F0-9]{40}$/.test($))throw new Error(`@supabase/auth-js: Address "${$}" is invalid.`);return $.toLowerCase()}function N1($){return parseInt($,16)}function w1($){let X=new TextEncoder().encode($);return"0x"+Array.from(X,(Q)=>Q.toString(16).padStart(2,"0")).join("")}function O1($){var X;let{chainId:Z,domain:Q,expirationTime:Y,issuedAt:J=new Date,nonce:W,notBefore:z,requestId:G,resources:M,scheme:q,uri:B,version:w}=$;{if(!Number.isInteger(Z))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${Z}`);if(!Q)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(W&&W.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${W}`);if(!B)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if((X=$.statement)===null||X===void 0?void 0:X.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${$.statement}`)}let H=h2($.address),U=q?`${q}://${Q}`:Q,O=$.statement?`${$.statement}
`:"",F=`${U} wants you to sign in with your Ethereum account:
${H}

${O}`,A=`URI: ${B}
Version: ${w}
Chain ID: ${Z}${W?`
Nonce: ${W}`:""}
Issued At: ${J.toISOString()}`;if(Y)A+=`
Expiration Time: ${Y.toISOString()}`;if(z)A+=`
Not Before: ${z.toISOString()}`;if(G)A+=`
Request ID: ${G}`;if(M){let N=`
Resources:`;for(let R of M){if(!R||typeof R!=="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);N+=`
- ${R}`}A+=N}return`${F}
${A}`}class z$ extends Error{constructor({message:$,code:X,cause:Z,name:Q}){var Y;super($,{cause:Z});this.__isWebAuthnError=!0,this.name=(Y=Q!==null&&Q!==void 0?Q:Z instanceof Error?Z.name:void 0)!==null&&Y!==void 0?Y:"Unknown Error",this.code=X}}class HQ extends z${constructor($,X){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:X,message:$});this.name="WebAuthnUnknownError",this.originalError=X}}function A1({error:$,options:X}){var Z,Q,Y;let{publicKey:J}=X;if(!J)throw Error("options was missing required publicKey property");if($.name==="AbortError"){if(X.signal instanceof AbortSignal)return new z$({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:$})}else if($.name==="ConstraintError"){if(((Z=J.authenticatorSelection)===null||Z===void 0?void 0:Z.requireResidentKey)===!0)return new z$({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:$});else if(X.mediation==="conditional"&&((Q=J.authenticatorSelection)===null||Q===void 0?void 0:Q.userVerification)==="required")return new z$({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:$});else if(((Y=J.authenticatorSelection)===null||Y===void 0?void 0:Y.userVerification)==="required")return new z$({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:$})}else if($.name==="InvalidStateError")return new z$({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:$});else if($.name==="NotAllowedError")return new z$({message:$.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:$});else if($.name==="NotSupportedError"){if(J.pubKeyCredParams.filter((z)=>z.type==="public-key").length===0)return new z$({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:$});return new z$({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:$})}else if($.name==="SecurityError"){let W=window.location.hostname;if(!m2(W))return new z$({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:$});else if(J.rp.id!==W)return new z$({message:`The RP ID "${J.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:$})}else if($.name==="TypeError"){if(J.user.id.byteLength<1||J.user.id.byteLength>64)return new z$({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:$})}else if($.name==="UnknownError")return new z$({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:$});return new z$({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:$})}function L1({error:$,options:X}){let{publicKey:Z}=X;if(!Z)throw Error("options was missing required publicKey property");if($.name==="AbortError"){if(X.signal instanceof AbortSignal)return new z$({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:$})}else if($.name==="NotAllowedError")return new z$({message:$.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:$});else if($.name==="SecurityError"){let Q=window.location.hostname;if(!m2(Q))return new z$({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:$});else if(Z.rpId!==Q)return new z$({message:`The RP ID "${Z.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:$})}else if($.name==="UnknownError")return new z$({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:$});return new z$({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:$})}var j1=function($,X){var Z={};for(var Q in $)if(Object.prototype.hasOwnProperty.call($,Q)&&X.indexOf(Q)<0)Z[Q]=$[Q];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Y=0,Q=Object.getOwnPropertySymbols($);Y<Q.length;Y++)if(X.indexOf(Q[Y])<0&&Object.prototype.propertyIsEnumerable.call($,Q[Y]))Z[Q[Y]]=$[Q[Y]]}return Z};class F1{createNewAbortSignal(){if(this.controller){let X=new Error("Cancelling existing WebAuthn API call for new one");X.name="AbortError",this.controller.abort(X)}let $=new AbortController;return this.controller=$,$.signal}cancelCeremony(){if(this.controller){let $=new Error("Manually cancelling existing WebAuthn API call");$.name="AbortError",this.controller.abort($),this.controller=void 0}}}var TT=new F1;function V1($){if(!$)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!=="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON==="function")return PublicKeyCredential.parseCreationOptionsFromJSON($);let{challenge:X,user:Z,excludeCredentials:Q}=$,Y=j1($,["challenge","user","excludeCredentials"]),J=T8(X).buffer,W=Object.assign(Object.assign({},Z),{id:T8(Z.id).buffer}),z=Object.assign(Object.assign({},Y),{challenge:J,user:W});if(Q&&Q.length>0){z.excludeCredentials=new Array(Q.length);for(let G=0;G<Q.length;G++){let M=Q[G];z.excludeCredentials[G]=Object.assign(Object.assign({},M),{id:T8(M.id).buffer,type:M.type||"public-key",transports:M.transports})}}return z}function C1($){if(!$)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!=="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON==="function")return PublicKeyCredential.parseRequestOptionsFromJSON($);let{challenge:X,allowCredentials:Z}=$,Q=j1($,["challenge","allowCredentials"]),Y=T8(X).buffer,J=Object.assign(Object.assign({},Q),{challenge:Y});if(Z&&Z.length>0){J.allowCredentials=new Array(Z.length);for(let W=0;W<Z.length;W++){let z=Z[W];J.allowCredentials[W]=Object.assign(Object.assign({},z),{id:T8(z.id).buffer,type:z.type||"public-key",transports:z.transports})}}return J}function P1($){var X;if("toJSON"in $&&typeof $.toJSON==="function")return $.toJSON();let Z=$;return{id:$.id,rawId:$.id,response:{attestationObject:rZ(new Uint8Array($.response.attestationObject)),clientDataJSON:rZ(new Uint8Array($.response.clientDataJSON))},type:"public-key",clientExtensionResults:$.getClientExtensionResults(),authenticatorAttachment:(X=Z.authenticatorAttachment)!==null&&X!==void 0?X:void 0}}function S1($){var X;if("toJSON"in $&&typeof $.toJSON==="function")return $.toJSON();let Z=$,Q=$.getClientExtensionResults(),Y=$.response;return{id:$.id,rawId:$.id,response:{authenticatorData:rZ(new Uint8Array(Y.authenticatorData)),clientDataJSON:rZ(new Uint8Array(Y.clientDataJSON)),signature:rZ(new Uint8Array(Y.signature)),userHandle:Y.userHandle?rZ(new Uint8Array(Y.userHandle)):void 0},type:"public-key",clientExtensionResults:Q,authenticatorAttachment:(X=Z.authenticatorAttachment)!==null&&X!==void 0?X:void 0}}function m2($){return $==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test($)}function K1(){var $,X;return!!(a$()&&("PublicKeyCredential"in window)&&window.PublicKeyCredential&&("credentials"in navigator)&&typeof(($=navigator===null||navigator===void 0?void 0:navigator.credentials)===null||$===void 0?void 0:$.create)==="function"&&typeof((X=navigator===null||navigator===void 0?void 0:navigator.credentials)===null||X===void 0?void 0:X.get)==="function")}async function _T($){try{let X=await navigator.credentials.create($);if(!X)return{data:null,error:new HQ("Empty credential response",X)};if(!(X instanceof PublicKeyCredential))return{data:null,error:new HQ("Browser returned unexpected credential type",X)};return{data:X,error:null}}catch(X){return{data:null,error:A1({error:X,options:$})}}}async function bT($){try{let X=await navigator.credentials.get($);if(!X)return{data:null,error:new HQ("Empty credential response",X)};if(!(X instanceof PublicKeyCredential))return{data:null,error:new HQ("Browser returned unexpected credential type",X)};return{data:X,error:null}}catch(X){return{data:null,error:L1({error:X,options:$})}}}var xT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},kT={userVerification:"preferred",hints:["security-key"]};function P7(...$){let X=(Y)=>Y!==null&&typeof Y==="object"&&!Array.isArray(Y),Z=(Y)=>Y instanceof ArrayBuffer||ArrayBuffer.isView(Y),Q={};for(let Y of $){if(!Y)continue;for(let J in Y){let W=Y[J];if(W===void 0)continue;if(Array.isArray(W))Q[J]=W;else if(Z(W))Q[J]=W;else if(X(W)){let z=Q[J];if(X(z))Q[J]=P7(z,W);else Q[J]=P7(W)}else Q[J]=W}}return Q}function gT($,X){return P7(xT,$,X||{})}function fT($,X){return P7(kT,$,X||{})}class d2{constructor($){this.client=$,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll($){return this.client.mfa.enroll(Object.assign(Object.assign({},$),{factorType:"webauthn"}))}async _challenge({factorId:$,webauthn:X,friendlyName:Z,signal:Q},Y){try{let{data:J,error:W}=await this.client.mfa.challenge({factorId:$,webauthn:X});if(!J)return{data:null,error:W};let z=Q!==null&&Q!==void 0?Q:TT.createNewAbortSignal();if(J.webauthn.type==="create"){let{user:G}=J.webauthn.credential_options.publicKey;if(!G.name)G.name=`${G.id}:${Z}`;if(!G.displayName)G.displayName=G.name}switch(J.webauthn.type){case"create":{let G=gT(J.webauthn.credential_options.publicKey,Y===null||Y===void 0?void 0:Y.create),{data:M,error:q}=await _T({publicKey:G,signal:z});if(M)return{data:{factorId:$,challengeId:J.id,webauthn:{type:J.webauthn.type,credential_response:M}},error:null};return{data:null,error:q}}case"request":{let G=fT(J.webauthn.credential_options.publicKey,Y===null||Y===void 0?void 0:Y.request),{data:M,error:q}=await bT(Object.assign(Object.assign({},J.webauthn.credential_options),{publicKey:G,signal:z}));if(M)return{data:{factorId:$,challengeId:J.id,webauthn:{type:J.webauthn.type,credential_response:M}},error:null};return{data:null,error:q}}}}catch(J){if(n(J))return{data:null,error:J};return{data:null,error:new JZ("Unexpected error in challenge",J)}}}async _verify({challengeId:$,factorId:X,webauthn:Z}){return this.client.mfa.verify({factorId:X,challengeId:$,webauthn:Z})}async _authenticate({factorId:$,webauthn:{rpId:X=typeof window!=="undefined"?window.location.hostname:void 0,rpOrigins:Z=typeof window!=="undefined"?[window.location.origin]:void 0,signal:Q}},Y){if(!X)return{data:null,error:new Y9("rpId is required for WebAuthn authentication")};try{if(!K1())return{data:null,error:new JZ("Browser does not support WebAuthn",null)};let{data:J,error:W}=await this.challenge({factorId:$,webauthn:{rpId:X,rpOrigins:Z},signal:Q},{request:Y});if(!J)return{data:null,error:W};let{webauthn:z}=J;return this._verify({factorId:$,challengeId:J.challengeId,webauthn:{type:z.type,rpId:X,rpOrigins:Z,credential_response:z.credential_response}})}catch(J){if(n(J))return{data:null,error:J};return{data:null,error:new JZ("Unexpected error in authenticate",J)}}}async _register({friendlyName:$,rpId:X=typeof window!=="undefined"?window.location.hostname:void 0,rpOrigins:Z=typeof window!=="undefined"?[window.location.origin]:void 0,signal:Q},Y){if(!X)return{data:null,error:new Y9("rpId is required for WebAuthn registration")};try{if(!K1())return{data:null,error:new JZ("Browser does not support WebAuthn",null)};let{data:J,error:W}=await this._enroll({friendlyName:$});if(!J)return await this.client.mfa.listFactors().then((M)=>{var q;return(q=M.data)===null||q===void 0?void 0:q.all.find((B)=>B.factor_type==="webauthn"&&B.friendly_name===$&&B.status!=="unverified")}).then((M)=>M?this.client.mfa.unenroll({factorId:M===null||M===void 0?void 0:M.id}):void 0),{data:null,error:W};let{data:z,error:G}=await this._challenge({factorId:J.id,friendlyName:J.friendly_name,webauthn:{rpId:X,rpOrigins:Z},signal:Q},{create:Y});if(!z)return{data:null,error:G};return this._verify({factorId:J.id,challengeId:z.challengeId,webauthn:{rpId:X,rpOrigins:Z,type:z.webauthn.type,credential_response:z.webauthn.credential_response}})}catch(J){if(n(J))return{data:null,error:J};return{data:null,error:new JZ("Unexpected error in register",J)}}}}D1();var vT={url:lB,storageKey:pB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function I1($,X,Z){return await Z()}var UQ={};class FY{get jwks(){var $,X;return(X=($=UQ[this.storageKey])===null||$===void 0?void 0:$.jwks)!==null&&X!==void 0?X:{keys:[]}}set jwks($){UQ[this.storageKey]=Object.assign(Object.assign({},UQ[this.storageKey]),{jwks:$})}get jwks_cached_at(){var $,X;return(X=($=UQ[this.storageKey])===null||$===void 0?void 0:$.cachedAt)!==null&&X!==void 0?X:Number.MIN_SAFE_INTEGER}set jwks_cached_at($){UQ[this.storageKey]=Object.assign(Object.assign({},UQ[this.storageKey]),{cachedAt:$})}constructor($){var X,Z;if(this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=FY.nextInstanceID,FY.nextInstanceID+=1,this.instanceID>0&&a$())console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let Q=Object.assign(Object.assign({},vT),$);if(this.logDebugMessages=!!Q.debug,typeof Q.debug==="function")this.logger=Q.debug;if(this.persistSession=Q.persistSession,this.storageKey=Q.storageKey,this.autoRefreshToken=Q.autoRefreshToken,this.admin=new BQ({url:Q.url,headers:Q.headers,fetch:Q.fetch}),this.url=Q.url,this.headers=Q.headers,this.fetch=K7(Q.fetch),this.lock=Q.lock||I1,this.detectSessionInUrl=Q.detectSessionInUrl,this.flowType=Q.flowType,this.hasCustomAuthorizationHeader=Q.hasCustomAuthorizationHeader,Q.lock)this.lock=Q.lock;else if(a$()&&((X=globalThis===null||globalThis===void 0?void 0:globalThis.navigator)===null||X===void 0?void 0:X.locks))this.lock=y2;else this.lock=I1;if(!this.jwks)this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER;if(this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new d2(this)},this.persistSession){if(Q.storage)this.storage=Q.storage;else if(L7())this.storage=globalThis.localStorage;else this.memoryStorage={},this.storage=f2(this.memoryStorage);if(Q.userStorage)this.userStorage=Q.userStorage}else this.memoryStorage={},this.storage=f2(this.memoryStorage);if(a$()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Y){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Y)}(Z=this.broadcastChannel)===null||Z===void 0||Z.addEventListener("message",async(Y)=>{this._debug("received broadcast notification from other tab or client",Y),await this._notifyAllSubscribers(Y.data.event,Y.data.session,!1)})}this.initialize()}_debug(...$){if(this.logDebugMessages)this.logger(`GoTrueClient@${this.instanceID} (${H7}) ${new Date().toISOString()}`,...$);return this}async initialize(){if(this.initializePromise)return await this.initializePromise;return this.initializePromise=(async()=>{return await this._acquireLock(-1,async()=>{return await this._initialize()})})(),await this.initializePromise}async _initialize(){var $;try{let X=Y1(window.location.href),Z="none";if(this._isImplicitGrantCallback(X))Z="implicit";else if(await this._isPKCECallback(X))Z="pkce";if(a$()&&this.detectSessionInUrl&&Z!=="none"){let{data:Q,error:Y}=await this._getSessionFromURL(X,Z);if(Y){if(this._debug("#_initialize()","error detecting session from URL",Y),tB(Y)){let z=($=Y.details)===null||$===void 0?void 0:$.code;if(z==="identity_already_exists"||z==="identity_not_found"||z==="single_identity_not_deletable")return{error:Y}}return await this._removeSession(),{error:Y}}let{session:J,redirectType:W}=Q;return this._debug("#_initialize()","detected session in URL",J,"redirect type",W),await this._saveSession(J),setTimeout(async()=>{if(W==="recovery")await this._notifyAllSubscribers("PASSWORD_RECOVERY",J);else await this._notifyAllSubscribers("SIGNED_IN",J)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(X){if(n(X))return{error:X};return{error:new JZ("Unexpected error during initialization",X)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously($){var X,Z,Q;try{let Y=await a(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(Z=(X=$===null||$===void 0?void 0:$.options)===null||X===void 0?void 0:X.data)!==null&&Z!==void 0?Z:{},gotrue_meta_security:{captcha_token:(Q=$===null||$===void 0?void 0:$.options)===null||Q===void 0?void 0:Q.captchaToken}},xform:gX}),{data:J,error:W}=Y;if(W||!J)return{data:{user:null,session:null},error:W};let{session:z,user:G}=J;if(J.session)await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",z);return{data:{user:G,session:z},error:null}}catch(Y){if(n(Y))return{data:{user:null,session:null},error:Y};throw Y}}async signUp($){var X,Z,Q;try{let Y;if("email"in $){let{email:M,password:q,options:B}=$,w=null,H=null;if(this.flowType==="pkce")[w,H]=await z9(this.storage,this.storageKey);Y=await a(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:B===null||B===void 0?void 0:B.emailRedirectTo,body:{email:M,password:q,data:(X=B===null||B===void 0?void 0:B.data)!==null&&X!==void 0?X:{},gotrue_meta_security:{captcha_token:B===null||B===void 0?void 0:B.captchaToken},code_challenge:w,code_challenge_method:H},xform:gX})}else if("phone"in $){let{phone:M,password:q,options:B}=$;Y=await a(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:M,password:q,data:(Z=B===null||B===void 0?void 0:B.data)!==null&&Z!==void 0?Z:{},channel:(Q=B===null||B===void 0?void 0:B.channel)!==null&&Q!==void 0?Q:"sms",gotrue_meta_security:{captcha_token:B===null||B===void 0?void 0:B.captchaToken}},xform:gX})}else throw new GQ("You must provide either an email or phone number and a password");let{data:J,error:W}=Y;if(W||!J)return{data:{user:null,session:null},error:W};let{session:z,user:G}=J;if(J.session)await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",z);return{data:{user:G,session:z},error:null}}catch(Y){if(n(Y))return{data:{user:null,session:null},error:Y};throw Y}}async signInWithPassword($){try{let X;if("email"in $){let{email:Y,password:J,options:W}=$;X=await a(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:Y,password:J,gotrue_meta_security:{captcha_token:W===null||W===void 0?void 0:W.captchaToken}},xform:k2})}else if("phone"in $){let{phone:Y,password:J,options:W}=$;X=await a(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:Y,password:J,gotrue_meta_security:{captcha_token:W===null||W===void 0?void 0:W.captchaToken}},xform:k2})}else throw new GQ("You must provide either an email or phone number and a password");let{data:Z,error:Q}=X;if(Q)return{data:{user:null,session:null},error:Q};else if(!Z||!Z.session||!Z.user)return{data:{user:null,session:null},error:new E8};if(Z.session)await this._saveSession(Z.session),await this._notifyAllSubscribers("SIGNED_IN",Z.session);return{data:Object.assign({user:Z.user,session:Z.session},Z.weak_password?{weakPassword:Z.weak_password}:null),error:Q}}catch(X){if(n(X))return{data:{user:null,session:null},error:X};throw X}}async signInWithOAuth($){var X,Z,Q,Y;return await this._handleProviderSignIn($.provider,{redirectTo:(X=$.options)===null||X===void 0?void 0:X.redirectTo,scopes:(Z=$.options)===null||Z===void 0?void 0:Z.scopes,queryParams:(Q=$.options)===null||Q===void 0?void 0:Q.queryParams,skipBrowserRedirect:(Y=$.options)===null||Y===void 0?void 0:Y.skipBrowserRedirect})}async exchangeCodeForSession($){return await this.initializePromise,this._acquireLock(-1,async()=>{return this._exchangeCodeForSession($)})}async signInWithWeb3($){let{chain:X}=$;switch(X){case"ethereum":return await this.signInWithEthereum($);case"solana":return await this.signInWithSolana($);default:throw new Error(`@supabase/auth-js: Unsupported chain "${X}"`)}}async signInWithEthereum($){var X,Z,Q,Y,J,W,z,G,M,q,B;let w,H;if("message"in $)w=$.message,H=$.signature;else{let{chain:U,wallet:O,statement:F,options:A}=$,N;if(!a$()){if(typeof O!=="object"||!(A===null||A===void 0?void 0:A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=O}else if(typeof O==="object")N=O;else{let v=window;if("ethereum"in v&&typeof v.ethereum==="object"&&"request"in v.ethereum&&typeof v.ethereum.request==="function")N=v.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}let R=new URL((X=A===null||A===void 0?void 0:A.url)!==null&&X!==void 0?X:window.location.href),u=await N.request({method:"eth_requestAccounts"}).then((v)=>v).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!u||u.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let y=h2(u[0]),b=(Z=A===null||A===void 0?void 0:A.signInWithEthereum)===null||Z===void 0?void 0:Z.chainId;if(!b){let v=await N.request({method:"eth_chainId"});b=N1(v)}let _={domain:R.host,address:y,statement:F,uri:R.href,version:"1",chainId:b,nonce:(Q=A===null||A===void 0?void 0:A.signInWithEthereum)===null||Q===void 0?void 0:Q.nonce,issuedAt:(J=(Y=A===null||A===void 0?void 0:A.signInWithEthereum)===null||Y===void 0?void 0:Y.issuedAt)!==null&&J!==void 0?J:new Date,expirationTime:(W=A===null||A===void 0?void 0:A.signInWithEthereum)===null||W===void 0?void 0:W.expirationTime,notBefore:(z=A===null||A===void 0?void 0:A.signInWithEthereum)===null||z===void 0?void 0:z.notBefore,requestId:(G=A===null||A===void 0?void 0:A.signInWithEthereum)===null||G===void 0?void 0:G.requestId,resources:(M=A===null||A===void 0?void 0:A.signInWithEthereum)===null||M===void 0?void 0:M.resources};w=O1(_),H=await N.request({method:"personal_sign",params:[w1(w),y]})}try{let{data:U,error:O}=await a(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:H},((q=$.options)===null||q===void 0?void 0:q.captchaToken)?{gotrue_meta_security:{captcha_token:(B=$.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:gX});if(O)throw O;if(!U||!U.session||!U.user)return{data:{user:null,session:null},error:new E8};if(U.session)await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session);return{data:Object.assign({},U),error:O}}catch(U){if(n(U))return{data:{user:null,session:null},error:U};throw U}}async signInWithSolana($){var X,Z,Q,Y,J,W,z,G,M,q,B,w;let H,U;if("message"in $)H=$.message,U=$.signature;else{let{chain:O,wallet:F,statement:A,options:N}=$,R;if(!a$()){if(typeof F!=="object"||!(N===null||N===void 0?void 0:N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=F}else if(typeof F==="object")R=F;else{let y=window;if("solana"in y&&typeof y.solana==="object"&&(("signIn"in y.solana)&&typeof y.solana.signIn==="function"||("signMessage"in y.solana)&&typeof y.solana.signMessage==="function"))R=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}let u=new URL((X=N===null||N===void 0?void 0:N.url)!==null&&X!==void 0?X:window.location.href);if("signIn"in R&&R.signIn){let y=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N===null||N===void 0?void 0:N.signInWithSolana),{version:"1",domain:u.host,uri:u.href}),A?{statement:A}:null)),b;if(Array.isArray(y)&&y[0]&&typeof y[0]==="object")b=y[0];else if(y&&typeof y==="object"&&"signedMessage"in y&&"signature"in y)b=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage==="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)H=typeof b.signedMessage==="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),U=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!=="function"||!("publicKey"in R)||typeof R!=="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!=="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");H=[`${u.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${u.href}`,`Issued At: ${(Q=(Z=N===null||N===void 0?void 0:N.signInWithSolana)===null||Z===void 0?void 0:Z.issuedAt)!==null&&Q!==void 0?Q:new Date().toISOString()}`,...((Y=N===null||N===void 0?void 0:N.signInWithSolana)===null||Y===void 0?void 0:Y.notBefore)?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...((J=N===null||N===void 0?void 0:N.signInWithSolana)===null||J===void 0?void 0:J.expirationTime)?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...((W=N===null||N===void 0?void 0:N.signInWithSolana)===null||W===void 0?void 0:W.chainId)?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...((z=N===null||N===void 0?void 0:N.signInWithSolana)===null||z===void 0?void 0:z.nonce)?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...((G=N===null||N===void 0?void 0:N.signInWithSolana)===null||G===void 0?void 0:G.requestId)?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...((q=(M=N===null||N===void 0?void 0:N.signInWithSolana)===null||M===void 0?void 0:M.resources)===null||q===void 0?void 0:q.length)?["Resources",...N.signInWithSolana.resources.map((b)=>`- ${b}`)]:[]].join(`
`);let y=await R.signMessage(new TextEncoder().encode(H),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=y}}try{let{data:O,error:F}=await a(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:H,signature:rZ(U)},((B=$.options)===null||B===void 0?void 0:B.captchaToken)?{gotrue_meta_security:{captcha_token:(w=$.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:gX});if(F)throw F;if(!O||!O.session||!O.user)return{data:{user:null,session:null},error:new E8};if(O.session)await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session);return{data:Object.assign({},O),error:F}}catch(O){if(n(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession($){let X=await _8(this.storage,`${this.storageKey}-code-verifier`),[Z,Q]=(X!==null&&X!==void 0?X:"").split("/");try{let{data:Y,error:J}=await a(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:$,code_verifier:Z},xform:gX});if(await sZ(this.storage,`${this.storageKey}-code-verifier`),J)throw J;if(!Y||!Y.session||!Y.user)return{data:{user:null,session:null,redirectType:null},error:new E8};if(Y.session)await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session);return{data:Object.assign(Object.assign({},Y),{redirectType:Q!==null&&Q!==void 0?Q:null}),error:J}}catch(Y){if(n(Y))return{data:{user:null,session:null,redirectType:null},error:Y};throw Y}}async signInWithIdToken($){try{let{options:X,provider:Z,token:Q,access_token:Y,nonce:J}=$,W=await a(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:Z,id_token:Q,access_token:Y,nonce:J,gotrue_meta_security:{captcha_token:X===null||X===void 0?void 0:X.captchaToken}},xform:gX}),{data:z,error:G}=W;if(G)return{data:{user:null,session:null},error:G};else if(!z||!z.session||!z.user)return{data:{user:null,session:null},error:new E8};if(z.session)await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session);return{data:z,error:G}}catch(X){if(n(X))return{data:{user:null,session:null},error:X};throw X}}async signInWithOtp($){var X,Z,Q,Y,J;try{if("email"in $){let{email:W,options:z}=$,G=null,M=null;if(this.flowType==="pkce")[G,M]=await z9(this.storage,this.storageKey);let{error:q}=await a(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:W,data:(X=z===null||z===void 0?void 0:z.data)!==null&&X!==void 0?X:{},create_user:(Z=z===null||z===void 0?void 0:z.shouldCreateUser)!==null&&Z!==void 0?Z:!0,gotrue_meta_security:{captcha_token:z===null||z===void 0?void 0:z.captchaToken},code_challenge:G,code_challenge_method:M},redirectTo:z===null||z===void 0?void 0:z.emailRedirectTo});return{data:{user:null,session:null},error:q}}if("phone"in $){let{phone:W,options:z}=$,{data:G,error:M}=await a(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:W,data:(Q=z===null||z===void 0?void 0:z.data)!==null&&Q!==void 0?Q:{},create_user:(Y=z===null||z===void 0?void 0:z.shouldCreateUser)!==null&&Y!==void 0?Y:!0,gotrue_meta_security:{captcha_token:z===null||z===void 0?void 0:z.captchaToken},channel:(J=z===null||z===void 0?void 0:z.channel)!==null&&J!==void 0?J:"sms"}});return{data:{user:null,session:null,messageId:G===null||G===void 0?void 0:G.message_id},error:M}}throw new GQ("You must provide either an email or phone number.")}catch(W){if(n(W))return{data:{user:null,session:null},error:W};throw W}}async verifyOtp($){var X,Z;try{let Q=void 0,Y=void 0;if("options"in $)Q=(X=$.options)===null||X===void 0?void 0:X.redirectTo,Y=(Z=$.options)===null||Z===void 0?void 0:Z.captchaToken;let{data:J,error:W}=await a(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},$),{gotrue_meta_security:{captcha_token:Y}}),redirectTo:Q,xform:gX});if(W)throw W;if(!J)throw new Error("An error occurred on token verification.");let{session:z,user:G}=J;if(z===null||z===void 0?void 0:z.access_token)await this._saveSession(z),await this._notifyAllSubscribers($.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",z);return{data:{user:G,session:z},error:null}}catch(Q){if(n(Q))return{data:{user:null,session:null},error:Q};throw Q}}async signInWithSSO($){var X,Z,Q;try{let Y=null,J=null;if(this.flowType==="pkce")[Y,J]=await z9(this.storage,this.storageKey);return await a(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in $?{provider_id:$.providerId}:null),"domain"in $?{domain:$.domain}:null),{redirect_to:(Z=(X=$.options)===null||X===void 0?void 0:X.redirectTo)!==null&&Z!==void 0?Z:void 0}),((Q=$===null||$===void 0?void 0:$.options)===null||Q===void 0?void 0:Q.captchaToken)?{gotrue_meta_security:{captcha_token:$.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:Y,code_challenge_method:J}),headers:this.headers,xform:H1})}catch(Y){if(n(Y))return{data:null,error:Y};throw Y}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._reauthenticate()})}async _reauthenticate(){try{return await this._useSession(async($)=>{let{data:{session:X},error:Z}=$;if(Z)throw Z;if(!X)throw new WZ;let{error:Q}=await a(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:X.access_token});return{data:{user:null,session:null},error:Q}})}catch($){if(n($))return{data:{user:null,session:null},error:$};throw $}}async resend($){try{let X=`${this.url}/resend`;if("email"in $){let{email:Z,type:Q,options:Y}=$,{error:J}=await a(this.fetch,"POST",X,{headers:this.headers,body:{email:Z,type:Q,gotrue_meta_security:{captcha_token:Y===null||Y===void 0?void 0:Y.captchaToken}},redirectTo:Y===null||Y===void 0?void 0:Y.emailRedirectTo});return{data:{user:null,session:null},error:J}}else if("phone"in $){let{phone:Z,type:Q,options:Y}=$,{data:J,error:W}=await a(this.fetch,"POST",X,{headers:this.headers,body:{phone:Z,type:Q,gotrue_meta_security:{captcha_token:Y===null||Y===void 0?void 0:Y.captchaToken}}});return{data:{user:null,session:null,messageId:J===null||J===void 0?void 0:J.message_id},error:W}}throw new GQ("You must provide either an email or phone number and a type")}catch(X){if(n(X))return{data:{user:null,session:null},error:X};throw X}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>{return this._useSession(async(X)=>{return X})})}async _acquireLock($,X){this._debug("#_acquireLock","begin",$);try{if(this.lockAcquired){let Z=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),Q=(async()=>{return await Z,await X()})();return this.pendingInLock.push((async()=>{try{await Q}catch(Y){}})()),Q}return await this.lock(`lock:${this.storageKey}`,$,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let Z=X();this.pendingInLock.push((async()=>{try{await Z}catch(Q){}})()),await Z;while(this.pendingInLock.length){let Q=[...this.pendingInLock];await Promise.all(Q),this.pendingInLock.splice(0,Q.length)}return await Z}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession($){this._debug("#_useSession","begin");try{let X=await this.__loadSession();return await $(X)}finally{this._debug("#_useSession","end")}}async __loadSession(){if(this._debug("#__loadSession()","begin"),!this.lockAcquired)this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let $=null,X=await _8(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",X),X!==null)if(this._isValidSession(X))$=X;else this._debug("#getSession()","session from storage is not valid"),await this._removeSession();if(!$)return{data:{session:null},error:null};let Z=$.expires_at?$.expires_at*1000-Date.now()<D7:!1;if(this._debug("#__loadSession()",`session has${Z?"":" not"} expired`,"expires_at",$.expires_at),!Z){if(this.userStorage){let J=await _8(this.userStorage,this.storageKey+"-user");if(J===null||J===void 0?void 0:J.user)$.user=J.user;else $.user=F7()}if(this.storage.isServer&&$.user){let J=this.suppressGetSessionWarning;$=new Proxy($,{get:(z,G,M)=>{if(!J&&G==="user")console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),J=!0,this.suppressGetSessionWarning=!0;return Reflect.get(z,G,M)}})}return{data:{session:$},error:null}}let{data:Q,error:Y}=await this._callRefreshToken($.refresh_token);if(Y)return{data:{session:null},error:Y};return{data:{session:Q},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser($){if($)return await this._getUser($);return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._getUser()})}async _getUser($){try{if($)return await a(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:$,xform:KZ});return await this._useSession(async(X)=>{var Z,Q,Y;let{data:J,error:W}=X;if(W)throw W;if(!((Z=J.session)===null||Z===void 0?void 0:Z.access_token)&&!this.hasCustomAuthorizationHeader)return{data:{user:null},error:new WZ};return await a(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(Y=(Q=J.session)===null||Q===void 0?void 0:Q.access_token)!==null&&Y!==void 0?Y:void 0,xform:KZ})})}catch(X){if(n(X)){if(sB(X))await this._removeSession(),await sZ(this.storage,`${this.storageKey}-code-verifier`);return{data:{user:null},error:X}}throw X}}async updateUser($,X={}){return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._updateUser($,X)})}async _updateUser($,X={}){try{return await this._useSession(async(Z)=>{let{data:Q,error:Y}=Z;if(Y)throw Y;if(!Q.session)throw new WZ;let J=Q.session,W=null,z=null;if(this.flowType==="pkce"&&$.email!=null)[W,z]=await z9(this.storage,this.storageKey);let{data:G,error:M}=await a(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:X===null||X===void 0?void 0:X.emailRedirectTo,body:Object.assign(Object.assign({},$),{code_challenge:W,code_challenge_method:z}),jwt:J.access_token,xform:KZ});if(M)throw M;return J.user=G.user,await this._saveSession(J),await this._notifyAllSubscribers("USER_UPDATED",J),{data:{user:J.user},error:null}})}catch(Z){if(n(Z))return{data:{user:null},error:Z};throw Z}}async setSession($){return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._setSession($)})}async _setSession($){try{if(!$.access_token||!$.refresh_token)throw new WZ;let X=Date.now()/1000,Z=X,Q=!0,Y=null,{payload:J}=j7($.access_token);if(J.exp)Z=J.exp,Q=Z<=X;if(Q){let{data:W,error:z}=await this._callRefreshToken($.refresh_token);if(z)return{data:{user:null,session:null},error:z};if(!W)return{data:{user:null,session:null},error:null};Y=W}else{let{data:W,error:z}=await this._getUser($.access_token);if(z)throw z;Y={access_token:$.access_token,refresh_token:$.refresh_token,user:W.user,token_type:"bearer",expires_in:Z-X,expires_at:Z},await this._saveSession(Y),await this._notifyAllSubscribers("SIGNED_IN",Y)}return{data:{user:Y.user,session:Y},error:null}}catch(X){if(n(X))return{data:{session:null,user:null},error:X};throw X}}async refreshSession($){return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._refreshSession($)})}async _refreshSession($){try{return await this._useSession(async(X)=>{var Z;if(!$){let{data:J,error:W}=X;if(W)throw W;$=(Z=J.session)!==null&&Z!==void 0?Z:void 0}if(!($===null||$===void 0?void 0:$.refresh_token))throw new WZ;let{data:Q,error:Y}=await this._callRefreshToken($.refresh_token);if(Y)return{data:{user:null,session:null},error:Y};if(!Q)return{data:{user:null,session:null},error:null};return{data:{user:Q.user,session:Q},error:null}})}catch(X){if(n(X))return{data:{user:null,session:null},error:X};throw X}}async _getSessionFromURL($,X){try{if(!a$())throw new MQ("No browser detected.");if($.error||$.error_description||$.error_code)throw new MQ($.error_description||"Error in URL with unspecified error_description",{error:$.error||"unspecified_error",code:$.error_code||"unspecified_code"});switch(X){case"implicit":if(this.flowType==="pkce")throw new N7("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new MQ("Not a valid implicit grant flow url.");break;default:}if(X==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!$.code)throw new N7("No code detected.");let{data:A,error:N}=await this._exchangeCodeForSession($.code);if(N)throw N;let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:A.session,redirectType:null},error:null}}let{provider_token:Z,provider_refresh_token:Q,access_token:Y,refresh_token:J,expires_in:W,expires_at:z,token_type:G}=$;if(!Y||!W||!J||!G)throw new MQ("No session defined in URL");let M=Math.round(Date.now()/1000),q=parseInt(W),B=M+q;if(z)B=parseInt(z);let w=B-M;if(w*1000<=Q9)console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${q}s`);let H=B-q;if(M-H>=120)console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",H,B,M);else if(M-H<0)console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",H,B,M);let{data:U,error:O}=await this._getUser(Y);if(O)throw O;let F={provider_token:Z,provider_refresh_token:Q,access_token:Y,expires_in:q,expires_at:B,refresh_token:J,token_type:G,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:$.type},error:null}}catch(Z){if(n(Z))return{data:{session:null,redirectType:null},error:Z};throw Z}}_isImplicitGrantCallback($){return Boolean($.access_token||$.error_description)}async _isPKCECallback($){let X=await _8(this.storage,`${this.storageKey}-code-verifier`);return!!($.code&&X)}async signOut($={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>{return await this._signOut($)})}async _signOut({scope:$}={scope:"global"}){return await this._useSession(async(X)=>{var Z;let{data:Q,error:Y}=X;if(Y)return{error:Y};let J=(Z=Q.session)===null||Z===void 0?void 0:Z.access_token;if(J){let{error:W}=await this.admin.signOut(J,$);if(W){if(!(rB(W)&&(W.status===404||W.status===401||W.status===403)))return{error:W}}}if($!=="others")await this._removeSession(),await sZ(this.storage,`${this.storageKey}-code-verifier`);return{error:null}})}onAuthStateChange($){let X=Q1(),Z={id:X,callback:$,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",X),this.stateChangeEmitters.delete(X)}};return this._debug("#onAuthStateChange()","registered callback with id",X),this.stateChangeEmitters.set(X,Z),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(X)})})(),{data:{subscription:Z}}}async _emitInitialSession($){return await this._useSession(async(X)=>{var Z,Q;try{let{data:{session:Y},error:J}=X;if(J)throw J;await((Z=this.stateChangeEmitters.get($))===null||Z===void 0?void 0:Z.callback("INITIAL_SESSION",Y)),this._debug("INITIAL_SESSION","callback id",$,"session",Y)}catch(Y){await((Q=this.stateChangeEmitters.get($))===null||Q===void 0?void 0:Q.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",$,"error",Y),console.error(Y)}})}async resetPasswordForEmail($,X={}){let Z=null,Q=null;if(this.flowType==="pkce")[Z,Q]=await z9(this.storage,this.storageKey,!0);try{return await a(this.fetch,"POST",`${this.url}/recover`,{body:{email:$,code_challenge:Z,code_challenge_method:Q,gotrue_meta_security:{captcha_token:X.captchaToken}},headers:this.headers,redirectTo:X.redirectTo})}catch(Y){if(n(Y))return{data:null,error:Y};throw Y}}async getUserIdentities(){var $;try{let{data:X,error:Z}=await this.getUser();if(Z)throw Z;return{data:{identities:($=X.user.identities)!==null&&$!==void 0?$:[]},error:null}}catch(X){if(n(X))return{data:null,error:X};throw X}}async linkIdentity($){if("token"in $)return this.linkIdentityIdToken($);return this.linkIdentityOAuth($)}async linkIdentityOAuth($){var X;try{let{data:Z,error:Q}=await this._useSession(async(Y)=>{var J,W,z,G,M;let{data:q,error:B}=Y;if(B)throw B;let w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,$.provider,{redirectTo:(J=$.options)===null||J===void 0?void 0:J.redirectTo,scopes:(W=$.options)===null||W===void 0?void 0:W.scopes,queryParams:(z=$.options)===null||z===void 0?void 0:z.queryParams,skipBrowserRedirect:!0});return await a(this.fetch,"GET",w,{headers:this.headers,jwt:(M=(G=q.session)===null||G===void 0?void 0:G.access_token)!==null&&M!==void 0?M:void 0})});if(Q)throw Q;if(a$()&&!((X=$.options)===null||X===void 0?void 0:X.skipBrowserRedirect))window.location.assign(Z===null||Z===void 0?void 0:Z.url);return{data:{provider:$.provider,url:Z===null||Z===void 0?void 0:Z.url},error:null}}catch(Z){if(n(Z))return{data:{provider:$.provider,url:null},error:Z};throw Z}}async linkIdentityIdToken($){return await this._useSession(async(X)=>{var Z;try{let{error:Q,data:{session:Y}}=X;if(Q)throw Q;let{options:J,provider:W,token:z,access_token:G,nonce:M}=$,q=await a(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(Z=Y===null||Y===void 0?void 0:Y.access_token)!==null&&Z!==void 0?Z:void 0,body:{provider:W,id_token:z,access_token:G,nonce:M,link_identity:!0,gotrue_meta_security:{captcha_token:J===null||J===void 0?void 0:J.captchaToken}},xform:gX}),{data:B,error:w}=q;if(w)return{data:{user:null,session:null},error:w};else if(!B||!B.session||!B.user)return{data:{user:null,session:null},error:new E8};if(B.session)await this._saveSession(B.session),await this._notifyAllSubscribers("USER_UPDATED",B.session);return{data:B,error:w}}catch(Q){if(n(Q))return{data:{user:null,session:null},error:Q};throw Q}})}async unlinkIdentity($){try{return await this._useSession(async(X)=>{var Z,Q;let{data:Y,error:J}=X;if(J)throw J;return await a(this.fetch,"DELETE",`${this.url}/user/identities/${$.identity_id}`,{headers:this.headers,jwt:(Q=(Z=Y.session)===null||Z===void 0?void 0:Z.access_token)!==null&&Q!==void 0?Q:void 0})})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _refreshAccessToken($){let X=`#_refreshAccessToken(${$.substring(0,5)}...)`;this._debug(X,"begin");try{let Z=Date.now();return await z1(async(Q)=>{if(Q>0)await W1(200*Math.pow(2,Q-1));return this._debug(X,"refreshing attempt",Q),await a(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:$},headers:this.headers,xform:gX})},(Q,Y)=>{let J=200*Math.pow(2,Q);return Y&&w7(Y)&&Date.now()+J-Z<Q9})}catch(Z){if(this._debug(X,"error",Z),n(Z))return{data:{session:null,user:null},error:Z};throw Z}finally{this._debug(X,"end")}}_isValidSession($){return typeof $==="object"&&$!==null&&"access_token"in $&&"refresh_token"in $&&"expires_at"in $}async _handleProviderSignIn($,X){let Z=await this._getUrlForProvider(`${this.url}/authorize`,$,{redirectTo:X.redirectTo,scopes:X.scopes,queryParams:X.queryParams});if(this._debug("#_handleProviderSignIn()","provider",$,"options",X,"url",Z),a$()&&!X.skipBrowserRedirect)window.location.assign(Z);return{data:{provider:$,url:Z},error:null}}async _recoverAndRefresh(){var $,X;let Z="#_recoverAndRefresh()";this._debug("#_recoverAndRefresh()","begin");try{let Q=await _8(this.storage,this.storageKey);if(Q&&this.userStorage){let J=await _8(this.userStorage,this.storageKey+"-user");if(!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!J)J={user:Q.user},await W9(this.userStorage,this.storageKey+"-user",J);Q.user=($=J===null||J===void 0?void 0:J.user)!==null&&$!==void 0?$:F7()}else if(Q&&!Q.user){if(!Q.user){let J=await _8(this.storage,this.storageKey+"-user");if(J&&(J===null||J===void 0?void 0:J.user))Q.user=J.user,await sZ(this.storage,this.storageKey+"-user"),await W9(this.storage,this.storageKey,Q);else Q.user=F7()}}if(this._debug("#_recoverAndRefresh()","session from storage",Q),!this._isValidSession(Q)){if(this._debug("#_recoverAndRefresh()","session is not valid"),Q!==null)await this._removeSession();return}let Y=((X=Q.expires_at)!==null&&X!==void 0?X:1/0)*1000-Date.now()<D7;if(this._debug("#_recoverAndRefresh()",`session has${Y?"":" not"} expired with margin of ${D7}s`),Y){if(this.autoRefreshToken&&Q.refresh_token){let{error:J}=await this._callRefreshToken(Q.refresh_token);if(J){if(console.error(J),!w7(J))this._debug("#_recoverAndRefresh()","refresh failed with a non-retryable error, removing the session",J),await this._removeSession()}}}else if(Q.user&&Q.user.__isUserNotAvailableProxy===!0)try{let{data:J,error:W}=await this._getUser(Q.access_token);if(!W&&(J===null||J===void 0?void 0:J.user))Q.user=J.user,await this._saveSession(Q),await this._notifyAllSubscribers("SIGNED_IN",Q);else this._debug("#_recoverAndRefresh()","could not get user data, skipping SIGNED_IN notification")}catch(J){console.error("Error getting user data:",J),this._debug("#_recoverAndRefresh()","error getting user data, skipping SIGNED_IN notification",J)}else await this._notifyAllSubscribers("SIGNED_IN",Q)}catch(Q){this._debug("#_recoverAndRefresh()","error",Q),console.error(Q);return}finally{this._debug("#_recoverAndRefresh()","end")}}async _callRefreshToken($){var X,Z;if(!$)throw new WZ;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let Q=`#_callRefreshToken(${$.substring(0,5)}...)`;this._debug(Q,"begin");try{this.refreshingDeferred=new jY;let{data:Y,error:J}=await this._refreshAccessToken($);if(J)throw J;if(!Y.session)throw new WZ;await this._saveSession(Y.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",Y.session);let W={data:Y.session,error:null};return this.refreshingDeferred.resolve(W),W}catch(Y){if(this._debug(Q,"error",Y),n(Y)){let J={data:null,error:Y};if(!w7(Y))await this._removeSession();return(X=this.refreshingDeferred)===null||X===void 0||X.resolve(J),J}throw(Z=this.refreshingDeferred)===null||Z===void 0||Z.reject(Y),Y}finally{this.refreshingDeferred=null,this._debug(Q,"end")}}async _notifyAllSubscribers($,X,Z=!0){let Q=`#_notifyAllSubscribers(${$})`;this._debug(Q,"begin",X,`broadcast = ${Z}`);try{if(this.broadcastChannel&&Z)this.broadcastChannel.postMessage({event:$,session:X});let Y=[],J=Array.from(this.stateChangeEmitters.values()).map(async(W)=>{try{await W.callback($,X)}catch(z){Y.push(z)}});if(await Promise.all(J),Y.length>0){for(let W=0;W<Y.length;W+=1)console.error(Y[W]);throw Y[0]}}finally{this._debug(Q,"end")}}async _saveSession($){this._debug("#_saveSession()",$),this.suppressGetSessionWarning=!0;let X=Object.assign({},$),Z=X.user&&X.user.__isUserNotAvailableProxy===!0;if(this.userStorage){if(!Z&&X.user)await W9(this.userStorage,this.storageKey+"-user",{user:X.user});let Q=Object.assign({},X);delete Q.user;let Y=x2(Q);await W9(this.storage,this.storageKey,Y)}else{let Q=x2(X);await W9(this.storage,this.storageKey,Q)}}async _removeSession(){if(this._debug("#_removeSession()"),await sZ(this.storage,this.storageKey),await sZ(this.storage,this.storageKey+"-code-verifier"),await sZ(this.storage,this.storageKey+"-user"),this.userStorage)await sZ(this.userStorage,this.storageKey+"-user");await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let $=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{if($&&a$()&&(window===null||window===void 0?void 0:window.removeEventListener))window.removeEventListener("visibilitychange",$)}catch(X){console.error("removing visibilitychange callback failed",X)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let $=setInterval(()=>this._autoRefreshTokenTick(),Q9);if(this.autoRefreshTicker=$,$&&typeof $==="object"&&typeof $.unref==="function")$.unref();else if(typeof Deno!=="undefined"&&typeof Deno.unrefTimer==="function")Deno.unrefTimer($);setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let $=this.autoRefreshTicker;if(this.autoRefreshTicker=null,$)clearInterval($)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let $=Date.now();try{return await this._useSession(async(X)=>{let{data:{session:Z}}=X;if(!Z||!Z.refresh_token||!Z.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let Q=Math.floor((Z.expires_at*1000-$)/Q9);if(this._debug("#_autoRefreshTokenTick()",`access token expires in ${Q} ticks, a tick lasts ${Q9}ms, refresh threshold is ${U7} ticks`),Q<=U7)await this._callRefreshToken(Z.refresh_token)})}catch(X){console.error("Auto refresh tick failed with error. This is likely a transient error.",X)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch($){if($.isAcquireTimeout||$ instanceof C7)this._debug("auto refresh token tick lock not available");else throw $}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!a$()||!(window===null||window===void 0?void 0:window.addEventListener)){if(this.autoRefreshToken)this.startAutoRefresh();return!1}try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window===null||window===void 0||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch($){console.error("_handleVisibilityChange",$)}}async _onVisibilityChanged($){let X=`#_onVisibilityChanged(${$})`;if(this._debug(X,"visibilityState",document.visibilityState),document.visibilityState==="visible"){if(this.autoRefreshToken)this._startAutoRefresh();if(!$)await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(X,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()})}else if(document.visibilityState==="hidden"){if(this.autoRefreshToken)this._stopAutoRefresh()}}async _getUrlForProvider($,X,Z){let Q=[`provider=${encodeURIComponent(X)}`];if(Z===null||Z===void 0?void 0:Z.redirectTo)Q.push(`redirect_to=${encodeURIComponent(Z.redirectTo)}`);if(Z===null||Z===void 0?void 0:Z.scopes)Q.push(`scopes=${encodeURIComponent(Z.scopes)}`);if(this.flowType==="pkce"){let[Y,J]=await z9(this.storage,this.storageKey),W=new URLSearchParams({code_challenge:`${encodeURIComponent(Y)}`,code_challenge_method:`${encodeURIComponent(J)}`});Q.push(W.toString())}if(Z===null||Z===void 0?void 0:Z.queryParams){let Y=new URLSearchParams(Z.queryParams);Q.push(Y.toString())}if(Z===null||Z===void 0?void 0:Z.skipBrowserRedirect)Q.push(`skip_http_redirect=${Z.skipBrowserRedirect}`);return`${$}?${Q.join("&")}`}async _unenroll($){try{return await this._useSession(async(X)=>{var Z;let{data:Q,error:Y}=X;if(Y)return{data:null,error:Y};return await a(this.fetch,"DELETE",`${this.url}/factors/${$.factorId}`,{headers:this.headers,jwt:(Z=Q===null||Q===void 0?void 0:Q.session)===null||Z===void 0?void 0:Z.access_token})})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _enroll($){try{return await this._useSession(async(X)=>{var Z,Q;let{data:Y,error:J}=X;if(J)return{data:null,error:J};let W=Object.assign({friendly_name:$.friendlyName,factor_type:$.factorType},$.factorType==="phone"?{phone:$.phone}:$.factorType==="totp"?{issuer:$.issuer}:{}),{data:z,error:G}=await a(this.fetch,"POST",`${this.url}/factors`,{body:W,headers:this.headers,jwt:(Z=Y===null||Y===void 0?void 0:Y.session)===null||Z===void 0?void 0:Z.access_token});if(G)return{data:null,error:G};if($.factorType==="totp"&&z.type==="totp"&&((Q=z===null||z===void 0?void 0:z.totp)===null||Q===void 0?void 0:Q.qr_code))z.totp.qr_code=`data:image/svg+xml;utf-8,${z.totp.qr_code}`;return{data:z,error:null}})}catch(X){if(n(X))return{data:null,error:X};throw X}}async _verify($){return this._acquireLock(-1,async()=>{try{return await this._useSession(async(X)=>{var Z;let{data:Q,error:Y}=X;if(Y)return{data:null,error:Y};let J=Object.assign({challenge_id:$.challengeId},"webauthn"in $?{webauthn:Object.assign(Object.assign({},$.webauthn),{credential_response:$.webauthn.type==="create"?P1($.webauthn.credential_response):S1($.webauthn.credential_response)})}:{code:$.code}),{data:W,error:z}=await a(this.fetch,"POST",`${this.url}/factors/${$.factorId}/verify`,{body:J,headers:this.headers,jwt:(Z=Q===null||Q===void 0?void 0:Q.session)===null||Z===void 0?void 0:Z.access_token});if(z)return{data:null,error:z};return await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1000)+W.expires_in},W)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",W),{data:W,error:z}})}catch(X){if(n(X))return{data:null,error:X};throw X}})}async _challenge($){return this._acquireLock(-1,async()=>{try{return await this._useSession(async(X)=>{var Z;let{data:Q,error:Y}=X;if(Y)return{data:null,error:Y};let J=await a(this.fetch,"POST",`${this.url}/factors/${$.factorId}/challenge`,{body:$,headers:this.headers,jwt:(Z=Q===null||Q===void 0?void 0:Q.session)===null||Z===void 0?void 0:Z.access_token});if(J.error)return J;let{data:W}=J;if(W.type!=="webauthn")return{data:W,error:null};switch(W.webauthn.type){case"create":return{data:Object.assign(Object.assign({},W),{webauthn:Object.assign(Object.assign({},W.webauthn),{credential_options:Object.assign(Object.assign({},W.webauthn.credential_options),{publicKey:V1(W.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},W),{webauthn:Object.assign(Object.assign({},W.webauthn),{credential_options:Object.assign(Object.assign({},W.webauthn.credential_options),{publicKey:C1(W.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(X){if(n(X))return{data:null,error:X};throw X}})}async _challengeAndVerify($){let{data:X,error:Z}=await this._challenge({factorId:$.factorId});if(Z)return{data:null,error:Z};return await this._verify({factorId:$.factorId,challengeId:X.id,code:$.code})}async _listFactors(){var $;let{data:{user:X},error:Z}=await this.getUser();if(Z)return{data:null,error:Z};let Q={all:[],phone:[],totp:[],webauthn:[]};for(let Y of($=X===null||X===void 0?void 0:X.factors)!==null&&$!==void 0?$:[])if(Q.all.push(Y),Y.status==="verified")Q[Y.factor_type].push(Y);return{data:Q,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>{return await this._useSession(async($)=>{var X,Z;let{data:{session:Q},error:Y}=$;if(Y)return{data:null,error:Y};if(!Q)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:J}=j7(Q.access_token),W=null;if(J.aal)W=J.aal;let z=W;if(((Z=(X=Q.user.factors)===null||X===void 0?void 0:X.filter((q)=>q.status==="verified"))!==null&&Z!==void 0?Z:[]).length>0)z="aal2";let M=J.amr||[];return{data:{currentLevel:W,nextLevel:z,currentAuthenticationMethods:M},error:null}})})}async fetchJwk($,X={keys:[]}){let Z=X.keys.find((W)=>W.kid===$);if(Z)return Z;let Q=Date.now();if(Z=this.jwks.keys.find((W)=>W.kid===$),Z&&this.jwks_cached_at+oB>Q)return Z;let{data:Y,error:J}=await a(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(J)throw J;if(!Y.keys||Y.keys.length===0)return null;if(this.jwks=Y,this.jwks_cached_at=Q,Z=Y.keys.find((W)=>W.kid===$),!Z)return null;return Z}async getClaims($,X={}){try{let Z=$;if(!Z){let{data:w,error:H}=await this.getSession();if(H||!w.session)return{data:null,error:H};Z=w.session.access_token}let{header:Q,payload:Y,signature:J,raw:{header:W,payload:z}}=j7(Z);if(!(X===null||X===void 0?void 0:X.allowExpired))M1(Y.exp);let G=!Q.alg||Q.alg.startsWith("HS")||!Q.kid||!(("crypto"in globalThis)&&("subtle"in globalThis.crypto))?null:await this.fetchJwk(Q.kid,(X===null||X===void 0?void 0:X.keys)?{keys:X.keys}:X===null||X===void 0?void 0:X.jwks);if(!G){let{error:w}=await this.getUser(Z);if(w)throw w;return{data:{claims:Y,header:Q,signature:J},error:null}}let M=q1(Q.alg),q=await crypto.subtle.importKey("jwk",G,M,!0,["verify"]);if(!await crypto.subtle.verify(M,q,J,X1(`${W}.${z}`)))throw new qQ("Invalid JWT signature");return{data:{claims:Y,header:Q,signature:J},error:null}}catch(Z){if(n(Z))return{data:null,error:Z};throw Z}}}FY.nextInstanceID=0;var c2=FY;var yT=c2,u2=yT;class l2 extends u2{constructor($){super($)}}var hT=function($,X,Z,Q){function Y(J){return J instanceof Z?J:new Z(function(W){W(J)})}return new(Z||(Z=Promise))(function(J,W){function z(q){try{M(Q.next(q))}catch(B){W(B)}}function G(q){try{M(Q.throw(q))}catch(B){W(B)}}function M(q){q.done?J(q.value):Y(q.value).then(z,G)}M((Q=Q.apply($,X||[])).next())})};class S7{constructor($,X,Z){var Q,Y,J;this.supabaseUrl=$,this.supabaseKey=X;let W=uB($);if(!X)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",W),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",W),this.storageUrl=new URL("storage/v1",W),this.functionsUrl=new URL("functions/v1",W);let z=`sb-${W.hostname.split(".")[0]}-auth-token`,G={db:yB,realtime:mB,auth:Object.assign(Object.assign({},hB),{storageKey:z}),global:vB},M=cB(Z!==null&&Z!==void 0?Z:{},G);if(this.storageKey=(Q=M.auth.storageKey)!==null&&Q!==void 0?Q:"",this.headers=(Y=M.global.headers)!==null&&Y!==void 0?Y:{},!M.accessToken)this.auth=this._initSupabaseAuthClient((J=M.auth)!==null&&J!==void 0?J:{},this.headers,M.global.fetch);else this.accessToken=M.accessToken,this.auth=new Proxy({},{get:(q,B)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(B)} is not possible`)}});if(this.fetch=dB(X,this._getAccessToken.bind(this),M.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},M.realtime)),this.rest=new FB(new URL("rest/v1",W).href,{headers:this.headers,schema:M.db.schema,fetch:this.fetch}),this.storage=new B7(this.storageUrl.href,this.headers,this.fetch,Z===null||Z===void 0?void 0:Z.storage),!M.accessToken)this._listenForAuthEvents()}get functions(){return new a6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from($){return this.rest.from($)}schema($){return this.rest.schema($)}rpc($,X={},Z={head:!1,get:!1,count:void 0}){return this.rest.rpc($,X,Z)}channel($,X={config:{}}){return this.realtime.channel($,X)}getChannels(){return this.realtime.getChannels()}removeChannel($){return this.realtime.removeChannel($)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return hT(this,void 0,void 0,function*(){var $,X;if(this.accessToken)return yield this.accessToken();let{data:Z}=yield this.auth.getSession();return(X=($=Z.session)===null||$===void 0?void 0:$.access_token)!==null&&X!==void 0?X:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:$,persistSession:X,detectSessionInUrl:Z,storage:Q,userStorage:Y,storageKey:J,flowType:W,lock:z,debug:G},M,q){let B={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l2({url:this.authUrl.href,headers:Object.assign(Object.assign({},B),M),storageKey:J,autoRefreshToken:$,persistSession:X,detectSessionInUrl:Z,storage:Q,userStorage:Y,flowType:W,lock:z,debug:G,fetch:q,hasCustomAuthorizationHeader:Object.keys(this.headers).some((w)=>w.toLowerCase()==="authorization")})}_initRealtimeClient($){return new DY(this.realtimeUrl.href,Object.assign(Object.assign({},$),{params:Object.assign({apikey:this.supabaseKey},$===null||$===void 0?void 0:$.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((X,Z)=>{this._handleTokenChanged(X,"CLIENT",Z===null||Z===void 0?void 0:Z.access_token)})}_handleTokenChanged($,X,Z){if(($==="TOKEN_REFRESHED"||$==="SIGNED_IN")&&this.changedAccessToken!==Z)this.changedAccessToken=Z,this.realtime.setAuth(Z);else if($==="SIGNED_OUT"){if(this.realtime.setAuth(),X=="STORAGE")this.auth.signOut();this.changedAccessToken=void 0}}}var R1=($,X,Z)=>{return new S7($,X,Z)};function mT(){if(typeof window!=="undefined")return!1;if(typeof process==="undefined")return!1;let $=process.version;if($===void 0||$===null)return!1;let X=$.match(/^v(\d+)\./);if(!X)return!1;return parseInt(X[1],10)<=18}if(mT())console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. "+"Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var b8=R1(Bun.env.SUPABASE_URL||"",Bun.env.SUPABASE_PUBLISHABLE||"");var E1=C.Union([C.Literal("NORMAL"),C.Literal("EMPTY"),C.Literal("FULL")]),I7=C.Object({id:C.Number(),name:C.String(),lat:C.Number(),lng:C.Number(),address:C.String(),total:C.Number(),name_en:C.String(),address_en:C.String()}),T1=C.Object({station_id:C.Number(),unavailable:C.Number(),success:C.Number(),update:C.String(),bikes:C.Number(),slots:C.Number(),full:C.Number(),status:E1,types:C.Any()}),_1=C.Object({station_id:I7,unavailable:C.Number(),success:C.Number(),update:C.String(),bikes:C.Number(),slots:C.Number(),full:C.Number(),status:E1,types:C.Any()}),b1=C.Object({id:C.String(),station_id:C.Number(),available:C.Number(),empty:C.Number(),at:C.String(),types:C.Any()}),FX=C.Object({error:C.String()});var x1=new QZ({prefix:"/stations"}).get("/",async()=>{let{data:$,error:X}=await b8.from("stations").select("*");if(X)return console.error(X),{error:"Internal server error"};return $},{detail:{tags:["Stations"],summary:"Get all stations",description:"List of all stations"},response:{200:C.Array(I7),500:FX}}).get("/:id",async({params:$,set:X})=>{let{id:Z}=$,{data:Q,error:Y}=await b8.from("stations").select("*").eq("id",parseInt(Z)).single();if(Y){if(Y.code==="PGRST116")return X.status=404,{error:"Station not found"};return console.error(Y),X.status=500,{error:"Internal server error"}}return Q},{detail:{tags:["Stations"],summary:"Get station by ID",description:"Station details"},params:C.Object({id:C.String({pattern:"^\\d+$",description:"Station ID",examples:"500306017"})}),response:{200:I7,400:FX,404:FX,500:FX}});var k1=new QZ({prefix:"/current"}).get("/",async()=>{let{data:$,error:X}=await b8.from("current").select("*");if(X)return console.error(X),{error:"Internal server error"};return $},{detail:{tags:["Current"],summary:"Get all current station data",description:"List of all current station data"},response:{200:C.Array(T1),500:FX}}).get("/:id",async({params:$,set:X})=>{let{id:Z}=$,{data:Q,error:Y}=await b8.from("current").select("*, station_id(*)").eq("station_id",parseInt(Z)).single();if(Y){if(Y.code==="PGRST116")return X.status=404,{error:"Current data not found"};return console.error(Y),X.status=500,{error:"Internal server error"}}return Q},{detail:{tags:["Current"],summary:"Get current data by station ID",description:"Current station data with station details"},params:C.Object({id:C.String({pattern:"^\\d+$",description:"Station ID",examples:["500306017"]})}),response:{200:_1,400:FX,404:FX,500:FX}});var g1=new QZ({prefix:"/history"}).get("/:id",async({params:$,query:X,set:Z})=>{let{id:Q}=$,{limit:Y}=X,J=b8.from("history").select("*").eq("station_id",parseInt(Q)).order("at",{ascending:!1});if(Y)J=J.limit(parseInt(Y));let{data:W,error:z}=await J;if(z)return console.error(z),Z.status=500,{error:"Internal server error"};return W},{detail:{tags:["History"],summary:"Get history by station ID",description:"List of historical data for the station"},params:C.Object({id:C.String({pattern:"^\\d+$",description:"Station ID",examples:["500306017"]})}),query:C.Object({limit:C.Optional(C.String({pattern:"^\\d+$",description:"Limit the results",examples:"10"}))}),response:{200:C.Array(b1),400:FX,500:FX}});var dT=new QZ().use(QB({documentation:{info:{title:"YouBike API",version:"1.0.0",description:"Get access to underlying data used by Cha Bike. For more information, visit [Cha Bike](https://youbike.wolf-yuan.dev/) homepage."},servers:[{url:"https://youbike.wolf-yuan.dev",description:"Production server"},{url:"http://localhost:3000",description:"Local development server"}]},path:"/",specPath:"/openapi.json",scalar:{theme:"deepSpace"}})).use(x1).use(k1).use(g1),Lo=dT;export{Lo as default};
